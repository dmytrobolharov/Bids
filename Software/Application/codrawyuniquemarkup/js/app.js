/*!
 * jQuery JavaScript Library v1.9.1
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2012 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-2-4
 */

/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */

/**
 * Durandal 2.0.1 Copyright (c) 2012 Blue Spire Consulting, Inc. All Rights Reserved.
 * Available via the MIT license.
 * see: http://durandaljs.com or https://github.com/BlueSpire/Durandal for details.
 */

// Knockout JavaScript library v2.3.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

/**
 * @license RequireJS text 2.0.3 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

// relative cubic (c)

/*!
 * Bootstrap v3.1.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

/* ========================================================================
 * Bootstrap: transition.js v3.1.1
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: alert.js v3.1.1
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: button.js v3.1.1
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: carousel.js v3.1.1
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: collapse.js v3.1.1
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: dropdown.js v3.1.1
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: modal.js v3.1.1
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tooltip.js v3.1.1
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: popover.js v3.1.1
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: scrollspy.js v3.1.1
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: tab.js v3.1.1
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* ========================================================================
 * Bootstrap: affix.js v3.1.1
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

/* =========================================================
 * bootstrap-slider.js v2.0.0
 * http://www.eyecon.ro/bootstrap-slider
 * =========================================================
 * Copyright 2012 Stefan Petre
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */

!function(){var t,e,n;if(function(i){function r(t,e){return w.call(t,e)}function a(t,e){var n,i,r,a,o,s,l,u,c,d,h=e&&e.split("/"),p=b.map,f=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(e){for(h=h.slice(0,h.length-1),t=h.concat(t.split("/")),u=0;u<t.length;u+=1)if(d=t[u],"."===d)t.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||f)&&p){for(n=t.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(c=h.length;c>0;c-=1)if(r=p[h.slice(0,c).join("/")],r&&(r=r[i])){a=r,o=u;break}if(a)break;!s&&f&&f[i]&&(s=f[i],l=u)}!a&&s&&(a=s,o=l),a&&(n.splice(0,o,a),t=n.join("/"))}return t}function o(t,e){return function(){return f.apply(i,k.call(arguments,0).concat([t,e]))}}function s(t){return function(e){return a(e,t)}}function l(t){return function(e){v[t]=e}}function u(t){if(r(y,t)){var e=y[t];delete y[t],x[t]=!0,p.apply(i,e)}if(!r(v,t)&&!r(x,t))throw new Error("No "+t);return v[t]}function c(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function d(e,n,i){t.onResourceLoad&&e&&t.onResourceLoad({defined:n},{id:e},i)}function h(t){return function(){return b&&b.config&&b.config[t]||{}}}var p,f,m,g,v={},y={},b={},x={},w=Object.prototype.hasOwnProperty,k=[].slice;m=function(t,e){var n,i=c(t),r=i[0];return t=i[1],r&&(r=a(r,e),n=u(r)),r?t=n&&n.normalize?n.normalize(t,s(e)):a(t,e):(t=a(t,e),i=c(t),r=i[0],t=i[1],r&&(n=u(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},g={require:function(t){return o(t)},exports:function(t){var e=v[t];return"undefined"!=typeof e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:h(t)}}},p=function(t,e,n,a){var s,c,h,p,f,b,w=[];if(a=a||t,"function"==typeof n){for(e=!e.length&&n.length?["require","exports","module"]:e,f=0;f<e.length;f+=1)if(p=m(e[f],a),c=p.f,"require"===c)w[f]=g.require(t);else if("exports"===c)w[f]=g.exports(t),b=!0;else if("module"===c)s=w[f]=g.module(t);else if(r(v,c)||r(y,c)||r(x,c))w[f]=u(c);else{if(!p.p)throw new Error(t+" missing "+c);p.p.load(p.n,o(a,!0),l(c),{}),w[f]=v[c]}h=n.apply(v[t],w),t&&(s&&s.exports!==i&&s.exports!==v[t]?v[t]=s.exports:h===i&&b||(v[t]=h))}else t&&(v[t]=n);d(t,v,w)},t=e=f=function(t,e,n,r,a){return"string"==typeof t?g[t]?g[t](e):u(m(t,e).f):(t.splice||(b=t,e.splice?(t=e,e=n,n=null):t=i),e=e||function(){},"function"==typeof n&&(n=r,r=a),r?p(i,t,e,n):setTimeout(function(){p(i,t,e,n)},4),f)},f.config=function(t){return b=t,b.deps&&f(b.deps,b.callback),f},t._defined=v,n=function(t,e,n){e.splice||(n=e,e=[]),r(v,t)||r(y,t)||(y[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("../bower_components/durandal-almond/almond",function(){}),function(){n("config",["require"],function(){var t={imageServer:window.markupConfig?window.markupConfig.imageServer:"http://192.168.88.189/plmOn_JSImageServer/",appServer:window.markupConfig?window.markupConfig.appServer:"http://192.168.88.189/plmOn_JSCodrawMarkup/",defaultStrokeWidth:3,defaultStrokeFill:"ff0000",defaultFill:"none",defaultFont:"Serif",defaultFontSize:25,defaultFontColor:"000000",defaultTool:"select",bgImageSizeLimit:2e3};return t})}(),function(t,e){function i(t){var e=t.length,n=ue.type(t);return ue.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||"function"!==n&&(0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t){var e=Ce[t]={};return ue.each(t.match(de)||[],function(t,n){e[n]=!0}),e}function a(t,n,i,r){if(ue.acceptData(t)){var a,o,s=ue.expando,l="string"==typeof n,u=t.nodeType,c=u?ue.cache:t,d=u?t[s]:t[s]&&s;if(d&&c[d]&&(r||c[d].data)||!l||i!==e)return d||(u?t[s]=d=te.pop()||ue.guid++:d=s),c[d]||(c[d]={},u||(c[d].toJSON=ue.noop)),("object"==typeof n||"function"==typeof n)&&(r?c[d]=ue.extend(c[d],n):c[d].data=ue.extend(c[d].data,n)),a=c[d],r||(a.data||(a.data={}),a=a.data),i!==e&&(a[ue.camelCase(n)]=i),l?(o=a[n],null==o&&(o=a[ue.camelCase(n)])):o=a,o}}function o(t,e,n){if(ue.acceptData(t)){var i,r,a,o=t.nodeType,s=o?ue.cache:t,u=o?t[ue.expando]:ue.expando;if(s[u]){if(e&&(a=n?s[u]:s[u].data)){ue.isArray(e)?e=e.concat(ue.map(e,ue.camelCase)):e in a?e=[e]:(e=ue.camelCase(e),e=e in a?[e]:e.split(" "));for(i=0,r=e.length;r>i;i++)delete a[e[i]];if(!(n?l:ue.isEmptyObject)(a))return}(n||(delete s[u].data,l(s[u])))&&(o?ue.cleanData([t],!0):ue.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}function s(t,n,i){if(i===e&&1===t.nodeType){var r="data-"+n.replace(_e,"-$1").toLowerCase();if(i=t.getAttribute(r),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Ee.test(i)?ue.parseJSON(i):i}catch(a){}ue.data(t,n,i)}else i=e}return i}function l(t){var e;for(e in t)if(("data"!==e||!ue.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function u(){return!0}function c(){return!1}function d(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function h(t,e,n){if(e=e||0,ue.isFunction(e))return ue.grep(t,function(t,i){var r=!!e.call(t,i,t);return r===n});if(e.nodeType)return ue.grep(t,function(t){return t===e===n});if("string"==typeof e){var i=ue.grep(t,function(t){return 1===t.nodeType});if(He.test(e))return ue.filter(e,i,!n);e=ue.filter(e,i)}return ue.grep(t,function(t){return ue.inArray(t,e)>=0===n})}function p(t){var e=We.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function f(t,e){return t.getElementsByTagName(e)[0]||t.appendChild(t.ownerDocument.createElement(e))}function m(t){var e=t.getAttributeNode("type");return t.type=(e&&e.specified)+"/"+t.type,t}function g(t){var e=on.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function v(t,e){for(var n,i=0;null!=(n=t[i]);i++)ue._data(n,"globalEval",!e||ue._data(e[i],"globalEval"))}function y(t,e){if(1===e.nodeType&&ue.hasData(t)){var n,i,r,a=ue._data(t),o=ue._data(e,a),s=a.events;if(s){delete o.handle,o.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)ue.event.add(e,n,s[n][i])}o.data&&(o.data=ue.extend({},o.data))}}function b(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ue.support.noCloneEvent&&e[ue.expando]){r=ue._data(e);for(i in r.events)ue.removeEvent(e,i,r.handle);e.removeAttribute(ue.expando)}"script"===n&&e.text!==t.text?(m(e).text=t.text,g(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ue.support.html5Clone&&t.innerHTML&&!ue.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&nn.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function x(t,n){var i,r,a=0,o=typeof t.getElementsByTagName!==X?t.getElementsByTagName(n||"*"):typeof t.querySelectorAll!==X?t.querySelectorAll(n||"*"):e;if(!o)for(o=[],i=t.childNodes||t;null!=(r=i[a]);a++)!n||ue.nodeName(r,n)?o.push(r):ue.merge(o,x(r,n));return n===e||n&&ue.nodeName(t,n)?ue.merge([t],o):o}function w(t){nn.test(t.type)&&(t.defaultChecked=t.checked)}function k(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=_n.length;r--;)if(e=_n[r]+n,e in t)return e;return i}function S(t,e){return t=e||t,"none"===ue.css(t,"display")||!ue.contains(t.ownerDocument,t)}function C(t,e){for(var n,i,r,a=[],o=0,s=t.length;s>o;o++)i=t[o],i.style&&(a[o]=ue._data(i,"olddisplay"),n=i.style.display,e?(a[o]||"none"!==n||(i.style.display=""),""===i.style.display&&S(i)&&(a[o]=ue._data(i,"olddisplay",A(i.nodeName)))):a[o]||(r=S(i),(n&&"none"!==n||!r)&&ue._data(i,"olddisplay",r?n:ue.css(i,"display"))));for(o=0;s>o;o++)i=t[o],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?a[o]||"":"none"));return t}function E(t,e,n){var i=bn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function _(t,e,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===e?1:0,o=0;4>a;a+=2)"margin"===n&&(o+=ue.css(t,n+En[a],!0,r)),i?("content"===n&&(o-=ue.css(t,"padding"+En[a],!0,r)),"margin"!==n&&(o-=ue.css(t,"border"+En[a]+"Width",!0,r))):(o+=ue.css(t,"padding"+En[a],!0,r),"padding"!==n&&(o+=ue.css(t,"border"+En[a]+"Width",!0,r)));return o}function T(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,a=hn(t),o=ue.support.boxSizing&&"border-box"===ue.css(t,"boxSizing",!1,a);if(0>=r||null==r){if(r=pn(t,e,a),(0>r||null==r)&&(r=t.style[e]),xn.test(r))return r;i=o&&(ue.support.boxSizingReliable||r===t.style[e]),r=parseFloat(r)||0}return r+_(t,e,n||(o?"border":"content"),i,a)+"px"}function A(t){var e=Y,n=kn[t];return n||(n=N(t,e),"none"!==n&&n||(dn=(dn||ue("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(e.documentElement),e=(dn[0].contentWindow||dn[0].contentDocument).document,e.write("<!doctype html><html><body>"),e.close(),n=N(t,e),dn.detach()),kn[t]=n),n}function N(t,e){var n=ue(e.createElement(t)).appendTo(e.body),i=ue.css(n[0],"display");return n.remove(),i}function P(t,e,n,i){var r;if(ue.isArray(e))ue.each(e,function(e,r){n||An.test(t)?i(t,r):P(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==ue.type(e))i(t,e);else for(r in e)P(t+"["+r+"]",e[r],n,i)}function I(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,a=e.toLowerCase().match(de)||[];if(ue.isFunction(n))for(;i=a[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function M(t,e,n,i){function r(s){var l;return a[s]=!0,ue.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||o||a[u]?o?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var a={},o=t===zn;return r(e.dataTypes[0])||!a["*"]&&r("*")}function B(t,n){var i,r,a=ue.ajaxSettings.flatOptions||{};for(r in n)n[r]!==e&&((a[r]?t:i||(i={}))[r]=n[r]);return i&&ue.extend(!0,t,i),t}function L(t,n,i){var r,a,o,s,l=t.contents,u=t.dataTypes,c=t.responseFields;for(s in c)s in i&&(n[c[s]]=i[s]);for(;"*"===u[0];)u.shift(),a===e&&(a=t.mimeType||n.getResponseHeader("Content-Type"));if(a)for(s in l)if(l[s]&&l[s].test(a)){u.unshift(s);break}if(u[0]in i)o=u[0];else{for(s in i){if(!u[0]||t.converters[s+" "+u[0]]){o=s;break}r||(r=s)}o=o||r}return o?(o!==u[0]&&u.unshift(o),i[o]):void 0}function D(t,e){var n,i,r,a,o={},s=0,l=t.dataTypes.slice(),u=l[0];if(t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l[1])for(r in t.converters)o[r.toLowerCase()]=t.converters[r];for(;i=l[++s];)if("*"!==i){if("*"!==u&&u!==i){if(r=o[u+" "+i]||o["* "+i],!r)for(n in o)if(a=n.split(" "),a[1]===i&&(r=o[u+" "+a[0]]||o["* "+a[0]])){r===!0?r=o[n]:o[n]!==!0&&(i=a[0],l.splice(s--,0,i));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(c){return{state:"parsererror",error:r?c:"No conversion from "+u+" to "+i}}}u=i}return{state:"success",data:e}}function O(){try{return new t.XMLHttpRequest}catch(e){}}function j(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function V(){return setTimeout(function(){ti=e}),ti=ue.now()}function F(t,e){ue.each(e,function(e,n){for(var i=(oi[e]||[]).concat(oi["*"]),r=0,a=i.length;a>r;r++)if(i[r].call(t,e,n))return})}function R(t,e,n){var i,r,a=0,o=ai.length,s=ue.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=ti||V(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,a=1-i,o=0,l=u.tweens.length;l>o;o++)u.tweens[o].run(a);return s.notifyWith(t,[u,a,n]),1>a&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:ue.extend({},e),opts:ue.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:ti||V(),duration:n.duration,tweens:[],createTween:function(e,n){var i=ue.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),c=u.props;for($(c,u.opts.specialEasing);o>a;a++)if(i=ai[a].call(u,t,c,u.opts))return i;return F(u,c),ue.isFunction(u.opts.start)&&u.opts.start.call(t,u),ue.fx.timer(ue.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function $(t,e){var n,i,r,a,o;for(r in t)if(i=ue.camelCase(r),a=e[i],n=t[r],ue.isArray(n)&&(a=n[1],n=t[r]=n[0]),r!==i&&(t[i]=n,delete t[r]),o=ue.cssHooks[i],o&&"expand"in o){n=o.expand(n),delete t[i];for(r in n)r in t||(t[r]=n[r],e[r]=a)}else e[i]=a}function q(t,e,n){var i,r,a,o,s,l,u,c,d,h=this,p=t.style,f={},m=[],g=t.nodeType&&S(t);n.queue||(c=ue._queueHooks(t,"fx"),null==c.unqueued&&(c.unqueued=0,d=c.empty.fire,c.empty.fire=function(){c.unqueued||d()}),c.unqueued++,h.always(function(){h.always(function(){c.unqueued--,ue.queue(t,"fx").length||c.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===ue.css(t,"display")&&"none"===ue.css(t,"float")&&(ue.support.inlineBlockNeedsLayout&&"inline"!==A(t.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ue.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in e)if(o=e[r],ni.exec(o)){if(delete e[r],l=l||"toggle"===o,o===(g?"hide":"show"))continue;m.push(r)}if(a=m.length){s=ue._data(t,"fxshow")||ue._data(t,"fxshow",{}),"hidden"in s&&(g=s.hidden),l&&(s.hidden=!g),g?ue(t).show():h.done(function(){ue(t).hide()}),h.done(function(){var e;ue._removeData(t,"fxshow");for(e in f)ue.style(t,e,f[e])});for(r=0;a>r;r++)i=m[r],u=h.createTween(i,g?s[i]:0),f[i]=s[i]||ue.style(t,i),i in s||(s[i]=u.start,g&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}function G(t,e,n,i,r){return new G.prototype.init(t,e,n,i,r)}function H(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=En[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function z(t){return ue.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var U,W,X=typeof e,Y=t.document,Z=t.location,Q=t.jQuery,K=t.$,J={},te=[],ee="1.9.1",ne=te.concat,ie=te.push,re=te.slice,ae=te.indexOf,oe=J.toString,se=J.hasOwnProperty,le=ee.trim,ue=function(t,e){return new ue.fn.init(t,e,W)},ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=/\S+/g,he=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pe=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,fe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,me=/^[\],:{}\s]*$/,ge=/(?:^|:|,)(?:\s*\[)+/g,ve=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ye=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,be=/^-ms-/,xe=/-([\da-z])/gi,we=function(t,e){return e.toUpperCase()},ke=function(t){(Y.addEventListener||"load"===t.type||"complete"===Y.readyState)&&(Se(),ue.ready())},Se=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",ke,!1),t.removeEventListener("load",ke,!1)):(Y.detachEvent("onreadystatechange",ke),t.detachEvent("onload",ke))};ue.fn=ue.prototype={jquery:ee,constructor:ue,init:function(t,n,i){var r,a;if(!t)return this;if("string"==typeof t){if(r="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:pe.exec(t),!r||!r[1]&&n)return!n||n.jquery?(n||i).find(t):this.constructor(n).find(t);if(r[1]){if(n=n instanceof ue?n[0]:n,ue.merge(this,ue.parseHTML(r[1],n&&n.nodeType?n.ownerDocument||n:Y,!0)),fe.test(r[1])&&ue.isPlainObject(n))for(r in n)ue.isFunction(this[r])?this[r](n[r]):this.attr(r,n[r]);return this}if(a=Y.getElementById(r[2]),a&&a.parentNode){if(a.id!==r[2])return i.find(t);this.length=1,this[0]=a}return this.context=Y,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ue.isFunction(t)?i.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),ue.makeArray(t,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return re.call(this)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t){var e=ue.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return ue.each(this,t,e)},ready:function(t){return ue.ready.promise().done(t),this},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},map:function(t){return this.pushStack(ue.map(this,function(e,n){return t.call(e,n,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:ie,sort:[].sort,splice:[].splice},ue.fn.init.prototype=ue.fn,ue.extend=ue.fn.extend=function(){var t,n,i,r,a,o,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},l=2),"object"==typeof s||ue.isFunction(s)||(s={}),u===l&&(s=this,--l);u>l;l++)if(null!=(a=arguments[l]))for(r in a)t=s[r],i=a[r],s!==i&&(c&&i&&(ue.isPlainObject(i)||(n=ue.isArray(i)))?(n?(n=!1,o=t&&ue.isArray(t)?t:[]):o=t&&ue.isPlainObject(t)?t:{},s[r]=ue.extend(c,o,i)):i!==e&&(s[r]=i));return s},ue.extend({noConflict:function(e){return t.$===ue&&(t.$=K),e&&t.jQuery===ue&&(t.jQuery=Q),ue},isReady:!1,readyWait:1,holdReady:function(t){t?ue.readyWait++:ue.ready(!0)},ready:function(t){if(t===!0?!--ue.readyWait:!ue.isReady){if(!Y.body)return setTimeout(ue.ready);ue.isReady=!0,t!==!0&&--ue.readyWait>0||(U.resolveWith(Y,[ue]),ue.fn.trigger&&ue(Y).trigger("ready").off("ready"))}},isFunction:function(t){return"function"===ue.type(t)},isArray:Array.isArray||function(t){return"array"===ue.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):"object"==typeof t||"function"==typeof t?J[oe.call(t)]||"object":typeof t},isPlainObject:function(t){if(!t||"object"!==ue.type(t)||t.nodeType||ue.isWindow(t))return!1;try{if(t.constructor&&!se.call(t,"constructor")&&!se.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in t);return i===e||se.call(t,i)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},error:function(t){throw new Error(t)},parseHTML:function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||Y;var i=fe.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=ue.buildFragment([t],e,r),r&&ue(r).remove(),ue.merge([],i.childNodes))},parseJSON:function(e){return t.JSON&&t.JSON.parse?t.JSON.parse(e):null===e?e:"string"==typeof e&&(e=ue.trim(e),e&&me.test(e.replace(ve,"@").replace(ye,"]").replace(ge,"")))?new Function("return "+e)():void ue.error("Invalid JSON: "+e)},parseXML:function(n){var i,r;if(!n||"string"!=typeof n)return null;try{t.DOMParser?(r=new DOMParser,i=r.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(a){i=e}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||ue.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(e){e&&ue.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(be,"ms-").replace(xe,we)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,a=0,o=t.length,s=i(t);if(n){if(s)for(;o>a&&(r=e.apply(t[a],n),r!==!1);a++);else for(a in t)if(r=e.apply(t[a],n),r===!1)break}else if(s)for(;o>a&&(r=e.call(t[a],a,t[a]),r!==!1);a++);else for(a in t)if(r=e.call(t[a],a,t[a]),r===!1)break;return t},trim:le&&!le.call("﻿ ")?function(t){return null==t?"":le.call(t)}:function(t){return null==t?"":(t+"").replace(he,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?ue.merge(n,"string"==typeof t?[t]:t):ie.call(n,t)),n},inArray:function(t,e,n){var i;if(e){if(ae)return ae.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,n){var i=n.length,r=t.length,a=0;if("number"==typeof i)for(;i>a;a++)t[r++]=n[a];else for(;n[a]!==e;)t[r++]=n[a++];return t.length=r,t},grep:function(t,e,n){var i,r=[],a=0,o=t.length;for(n=!!n;o>a;a++)i=!!e(t[a],a),n!==i&&r.push(t[a]);return r},map:function(t,e,n){var r,a=0,o=t.length,s=i(t),l=[];if(s)for(;o>a;a++)r=e(t[a],a,n),null!=r&&(l[l.length]=r);else for(a in t)r=e(t[a],a,n),null!=r&&(l[l.length]=r);return ne.apply([],l)},guid:1,proxy:function(t,n){var i,r,a;return"string"==typeof n&&(a=t[n],n=t,t=a),ue.isFunction(t)?(i=re.call(arguments,2),r=function(){return t.apply(n||this,i.concat(re.call(arguments)))},r.guid=t.guid=t.guid||ue.guid++,r):e},access:function(t,n,i,r,a,o,s){var l=0,u=t.length,c=null==i;if("object"===ue.type(i)){a=!0;for(l in i)ue.access(t,n,l,i[l],!0,o,s)}else if(r!==e&&(a=!0,ue.isFunction(r)||(s=!0),c&&(s?(n.call(t,r),n=null):(c=n,n=function(t,e,n){return c.call(ue(t),n)})),n))for(;u>l;l++)n(t[l],i,s?r:r.call(t[l],l,n(t[l],i)));return a?t:c?n.call(t):u?n(t[0],i):o},now:function(){return(new Date).getTime()}}),ue.ready.promise=function(e){if(!U)if(U=ue.Deferred(),"complete"===Y.readyState)setTimeout(ue.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",ke,!1),t.addEventListener("load",ke,!1);else{Y.attachEvent("onreadystatechange",ke),t.attachEvent("onload",ke);var n=!1;try{n=null==t.frameElement&&Y.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!ue.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}Se(),ue.ready()}}()}return U.promise(e)},ue.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){J["[object "+e+"]"]=e.toLowerCase()}),W=ue(Y);var Ce={};ue.Callbacks=function(t){t="string"==typeof t?Ce[t]||r(t):ue.extend({},t);var n,i,a,o,s,l,u=[],c=!t.once&&[],d=function(e){for(i=t.memory&&e,a=!0,s=l||0,l=0,o=u.length,n=!0;u&&o>s;s++)if(u[s].apply(e[0],e[1])===!1&&t.stopOnFalse){i=!1;break}n=!1,u&&(c?c.length&&d(c.shift()):i?u=[]:h.disable())},h={add:function(){if(u){var e=u.length;!function r(e){ue.each(e,function(e,n){var i=ue.type(n);"function"===i?t.unique&&h.has(n)||u.push(n):n&&n.length&&"string"!==i&&r(n)})}(arguments),n?o=u.length:i&&(l=e,d(i))}return this},remove:function(){return u&&ue.each(arguments,function(t,e){for(var i;(i=ue.inArray(e,u,i))>-1;)u.splice(i,1),n&&(o>=i&&o--,s>=i&&s--)}),this},has:function(t){return t?ue.inArray(t,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=c=i=e,this},disabled:function(){return!u},lock:function(){return c=e,i||h.disable(),this},locked:function(){return!c},fireWith:function(t,e){return e=e||[],e=[t,e.slice?e.slice():e],!u||a&&!c||(n?c.push(e):d(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!a}};return h},ue.extend({Deferred:function(t){var e=[["resolve","done",ue.Callbacks("once memory"),"resolved"],["reject","fail",ue.Callbacks("once memory"),"rejected"],["notify","progress",ue.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ue.Deferred(function(n){ue.each(e,function(e,a){var o=a[0],s=ue.isFunction(t[e])&&t[e];r[a[1]](function(){var t=s&&s.apply(this,arguments);t&&ue.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===i?n.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ue.extend(t,i):i}},r={};return i.pipe=i.then,ue.each(e,function(t,a){var o=a[2],s=a[3];i[a[1]]=o.add,s&&o.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[a[0]]=function(){return r[a[0]+"With"](this===r?i:this,arguments),this},r[a[0]+"With"]=o.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,a=re.call(arguments),o=a.length,s=1!==o||t&&ue.isFunction(t.promise)?o:0,l=1===s?t:ue.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?re.call(arguments):r,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(o>1)for(e=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)a[r]&&ue.isFunction(a[r].promise)?a[r].promise().done(u(r,i,a)).fail(l.reject).progress(u(r,n,e)):--s;return s||l.resolveWith(i,a),l.promise()}}),ue.support=function(){var e,n,i,r,a,o,s,l,u,c,d=Y.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),i=d.getElementsByTagName("a")[0],!n||!i||!n.length)return{};a=Y.createElement("select"),s=a.appendChild(Y.createElement("option")),r=d.getElementsByTagName("input")[0],i.style.cssText="top:1px;float:left;opacity:.5",e={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:!!r.value,optSelected:s.selected,enctype:!!Y.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===Y.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},r.checked=!0,e.noCloneChecked=r.cloneNode(!0).checked,a.disabled=!0,e.optDisabled=!s.disabled;try{delete d.test}catch(h){e.deleteExpando=!1}r=Y.createElement("input"),r.setAttribute("value",""),e.input=""===r.getAttribute("value"),r.value="t",r.setAttribute("type","radio"),e.radioValue="t"===r.value,r.setAttribute("checked","t"),r.setAttribute("name","t"),o=Y.createDocumentFragment(),o.appendChild(r),e.appendChecked=r.checked,e.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){e.noCloneEvent=!1}),d.cloneNode(!0).click());for(c in{submit:!0,change:!0,focusin:!0})d.setAttribute(l="on"+c,"t"),e[c+"Bubbles"]=l in t||d.attributes[l].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",e.clearCloneStyle="content-box"===d.style.backgroundClip,ue(function(){var n,i,r,a="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",o=Y.getElementsByTagName("body")[0];o&&(n=Y.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",o.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=d.getElementsByTagName("td"),r[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===r[0].offsetHeight,r[0].style.display="",r[1].style.display="none",e.reliableHiddenOffsets=u&&0===r[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",e.boxSizing=4===d.offsetWidth,e.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,t.getComputedStyle&&(e.pixelPosition="1%"!==(t.getComputedStyle(d,null)||{}).top,e.boxSizingReliable="4px"===(t.getComputedStyle(d,null)||{width:"4px"}).width,i=d.appendChild(Y.createElement("div")),i.style.cssText=d.style.cssText=a,i.style.marginRight=i.style.width="0",d.style.width="1px",e.reliableMarginRight=!parseFloat((t.getComputedStyle(i,null)||{}).marginRight)),typeof d.style.zoom!==X&&(d.innerHTML="",d.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",e.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",e.shrinkWrapBlocks=3!==d.offsetWidth,e.inlineBlockNeedsLayout&&(o.style.zoom=1)),o.removeChild(n),n=d=r=i=null)}),n=a=o=s=i=r=null,e}();var Ee=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,_e=/([A-Z])/g;ue.extend({cache:{},expando:"jQuery"+(ee+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?ue.cache[t[ue.expando]]:t[ue.expando],!!t&&!l(t)},data:function(t,e,n){return a(t,e,n)},removeData:function(t,e){return o(t,e)},_data:function(t,e,n){return a(t,e,n,!0)},_removeData:function(t,e){return o(t,e,!0)},acceptData:function(t){if(t.nodeType&&1!==t.nodeType&&9!==t.nodeType)return!1;var e=t.nodeName&&ue.noData[t.nodeName.toLowerCase()];return!e||e!==!0&&t.getAttribute("classid")===e}}),ue.fn.extend({data:function(t,n){var i,r,a=this[0],o=0,l=null;if(t===e){if(this.length&&(l=ue.data(a),1===a.nodeType&&!ue._data(a,"parsedAttrs"))){for(i=a.attributes;o<i.length;o++)r=i[o].name,r.indexOf("data-")||(r=ue.camelCase(r.slice(5)),s(a,r,l[r]));ue._data(a,"parsedAttrs",!0)}return l}return"object"==typeof t?this.each(function(){ue.data(this,t)}):ue.access(this,function(n){return n===e?a?s(a,t,ue.data(a,t)):null:void this.each(function(){ue.data(this,t,n)})},null,n,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ue.removeData(this,t)})}}),ue.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=ue._data(t,e),n&&(!i||ue.isArray(n)?i=ue._data(t,e,ue.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=ue.queue(t,e),i=n.length,r=n.shift(),a=ue._queueHooks(t,e),o=function(){ue.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),a.cur=r,r&&("fx"===e&&n.unshift("inprogress"),delete a.stop,r.call(t,o,a)),!i&&a&&a.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return ue._data(t,n)||ue._data(t,n,{empty:ue.Callbacks("once memory").add(function(){ue._removeData(t,e+"queue"),ue._removeData(t,n)})})}}),ue.fn.extend({queue:function(t,n){var i=2;return"string"!=typeof t&&(n=t,t="fx",i--),arguments.length<i?ue.queue(this[0],t):n===e?this:this.each(function(){var e=ue.queue(this,t,n);ue._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ue.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ue.dequeue(this,t)})},delay:function(t,e){return t=ue.fx?ue.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,n){var i,r=1,a=ue.Deferred(),o=this,s=this.length,l=function(){--r||a.resolveWith(o,[o])};for("string"!=typeof t&&(n=t,t=e),t=t||"fx";s--;)i=ue._data(o[s],t+"queueHooks"),i&&i.empty&&(r++,i.empty.add(l));return l(),a.promise(n)}});var Te,Ae,Ne=/[\t\r\n]/g,Pe=/\r/g,Ie=/^(?:input|select|textarea|button|object)$/i,Me=/^(?:a|area)$/i,Be=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Le=/^(?:checked|selected)$/i,De=ue.support.getSetAttribute,Oe=ue.support.input;ue.fn.extend({attr:function(t,e){return ue.access(this,ue.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ue.removeAttr(this,t)})},prop:function(t,e){return ue.access(this,ue.prop,t,e,arguments.length>1)},removeProp:function(t){return t=ue.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(n){}})},addClass:function(t){var e,n,i,r,a,o=0,s=this.length,l="string"==typeof t&&t;if(ue.isFunction(t))return this.each(function(e){ue(this).addClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(de)||[];s>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ne," "):" ")){for(a=0;r=e[a++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");n.className=ue.trim(i)}return this},removeClass:function(t){var e,n,i,r,a,o=0,s=this.length,l=0===arguments.length||"string"==typeof t&&t;if(ue.isFunction(t))return this.each(function(e){ue(this).removeClass(t.call(this,e,this.className))});if(l)for(e=(t||"").match(de)||[];s>o;o++)if(n=this[o],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(Ne," "):"")){for(a=0;r=e[a++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");n.className=t?ue.trim(i):""}return this},toggleClass:function(t,e){var n=typeof t,i="boolean"==typeof e;return this.each(ue.isFunction(t)?function(n){ue(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var r,a=0,o=ue(this),s=e,l=t.match(de)||[];r=l[a++];)s=i?s:!o.hasClass(r),o[s?"addClass":"removeClass"](r);else(n===X||"boolean"===n)&&(this.className&&ue._data(this,"__className__",this.className),this.className=this.className||t===!1?"":ue._data(this,"__className__")||"")
})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(Ne," ").indexOf(e)>=0)return!0;return!1},val:function(t){var n,i,r,a=this[0];{if(arguments.length)return r=ue.isFunction(t),this.each(function(n){var a,o=ue(this);1===this.nodeType&&(a=r?t.call(this,n,o.val()):t,null==a?a="":"number"==typeof a?a+="":ue.isArray(a)&&(a=ue.map(a,function(t){return null==t?"":t+""})),i=ue.valHooks[this.type]||ue.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,a,"value")!==e||(this.value=a))});if(a)return i=ue.valHooks[a.type]||ue.valHooks[a.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(a,"value"))!==e?n:(n=a.value,"string"==typeof n?n.replace(Pe,""):null==n?"":n)}}}),ue.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,a="select-one"===t.type||0>r,o=a?null:[],s=a?r+1:i.length,l=0>r?s:a?r:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==r||(ue.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ue.nodeName(n.parentNode,"optgroup"))){if(e=ue(n).val(),a)return e;o.push(e)}return o},set:function(t,e){var n=ue.makeArray(e);return ue(t).find("option").each(function(){this.selected=ue.inArray(ue(this).val(),n)>=0}),n.length||(t.selectedIndex=-1),n}}},attr:function(t,n,i){var r,a,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===X?ue.prop(t,n,i):(a=1!==s||!ue.isXMLDoc(t),a&&(n=n.toLowerCase(),r=ue.attrHooks[n]||(Be.test(n)?Ae:Te)),i===e?r&&a&&"get"in r&&null!==(o=r.get(t,n))?o:(typeof t.getAttribute!==X&&(o=t.getAttribute(n)),null==o?e:o):null!==i?r&&a&&"set"in r&&(o=r.set(t,i,n))!==e?o:(t.setAttribute(n,i+""),i):void ue.removeAttr(t,n))},removeAttr:function(t,e){var n,i,r=0,a=e&&e.match(de);if(a&&1===t.nodeType)for(;n=a[r++];)i=ue.propFix[n]||n,Be.test(n)?!De&&Le.test(n)?t[ue.camelCase("default-"+n)]=t[i]=!1:t[i]=!1:ue.attr(t,n,""),t.removeAttribute(De?n:i)},attrHooks:{type:{set:function(t,e){if(!ue.support.radioValue&&"radio"===e&&ue.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,n,i){var r,a,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return o=1!==s||!ue.isXMLDoc(t),o&&(n=ue.propFix[n]||n,a=ue.propHooks[n]),i!==e?a&&"set"in a&&(r=a.set(t,i,n))!==e?r:t[n]=i:a&&"get"in a&&null!==(r=a.get(t,n))?r:t[n]},propHooks:{tabIndex:{get:function(t){var n=t.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):Ie.test(t.nodeName)||Me.test(t.nodeName)&&t.href?0:e}}}}),Ae={get:function(t,n){var i=ue.prop(t,n),r="boolean"==typeof i&&t.getAttribute(n),a="boolean"==typeof i?Oe&&De?null!=r:Le.test(n)?t[ue.camelCase("default-"+n)]:!!r:t.getAttributeNode(n);return a&&a.value!==!1?n.toLowerCase():e},set:function(t,e,n){return e===!1?ue.removeAttr(t,n):Oe&&De||!Le.test(n)?t.setAttribute(!De&&ue.propFix[n]||n,n):t[ue.camelCase("default-"+n)]=t[n]=!0,n}},Oe&&De||(ue.attrHooks.value={get:function(t,n){var i=t.getAttributeNode(n);return ue.nodeName(t,"input")?t.defaultValue:i&&i.specified?i.value:e},set:function(t,e,n){return ue.nodeName(t,"input")?void(t.defaultValue=e):Te&&Te.set(t,e,n)}}),De||(Te=ue.valHooks.button={get:function(t,n){var i=t.getAttributeNode(n);return i&&("id"===n||"name"===n||"coords"===n?""!==i.value:i.specified)?i.value:e},set:function(t,n,i){var r=t.getAttributeNode(i);return r||t.setAttributeNode(r=t.ownerDocument.createAttribute(i)),r.value=n+="","value"===i||n===t.getAttribute(i)?n:e}},ue.attrHooks.contenteditable={get:Te.get,set:function(t,e,n){Te.set(t,""===e?!1:e,n)}},ue.each(["width","height"],function(t,e){ue.attrHooks[e]=ue.extend(ue.attrHooks[e],{set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}})})),ue.support.hrefNormalized||(ue.each(["href","src","width","height"],function(t,n){ue.attrHooks[n]=ue.extend(ue.attrHooks[n],{get:function(t){var i=t.getAttribute(n,2);return null==i?e:i}})}),ue.each(["href","src"],function(t,e){ue.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}})),ue.support.style||(ue.attrHooks.style={get:function(t){return t.style.cssText||e},set:function(t,e){return t.style.cssText=e+""}}),ue.support.optSelected||(ue.propHooks.selected=ue.extend(ue.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),ue.support.enctype||(ue.propFix.enctype="encoding"),ue.support.checkOn||ue.each(["radio","checkbox"],function(){ue.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),ue.each(["radio","checkbox"],function(){ue.valHooks[this]=ue.extend(ue.valHooks[this],{set:function(t,e){return ue.isArray(e)?t.checked=ue.inArray(ue(t).val(),e)>=0:void 0}})});var je=/^(?:input|select|textarea)$/i,Ve=/^key/,Fe=/^(?:mouse|contextmenu)|click/,Re=/^(?:focusinfocus|focusoutblur)$/,$e=/^([^.]*)(?:\.(.+)|)$/;ue.event={global:{},add:function(t,n,i,r,a){var o,s,l,u,c,d,h,p,f,m,g,v=ue._data(t);if(v){for(i.handler&&(u=i,i=u.handler,a=u.selector),i.guid||(i.guid=ue.guid++),(s=v.events)||(s=v.events={}),(d=v.handle)||(d=v.handle=function(t){return typeof ue===X||t&&ue.event.triggered===t.type?e:ue.event.dispatch.apply(d.elem,arguments)},d.elem=t),n=(n||"").match(de)||[""],l=n.length;l--;)o=$e.exec(n[l])||[],f=g=o[1],m=(o[2]||"").split(".").sort(),c=ue.event.special[f]||{},f=(a?c.delegateType:c.bindType)||f,c=ue.event.special[f]||{},h=ue.extend({type:f,origType:g,data:r,handler:i,guid:i.guid,selector:a,needsContext:a&&ue.expr.match.needsContext.test(a),namespace:m.join(".")},u),(p=s[f])||(p=s[f]=[],p.delegateCount=0,c.setup&&c.setup.call(t,r,m,d)!==!1||(t.addEventListener?t.addEventListener(f,d,!1):t.attachEvent&&t.attachEvent("on"+f,d))),c.add&&(c.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),a?p.splice(p.delegateCount++,0,h):p.push(h),ue.event.global[f]=!0;t=null}},remove:function(t,e,n,i,r){var a,o,s,l,u,c,d,h,p,f,m,g=ue.hasData(t)&&ue._data(t);if(g&&(c=g.events)){for(e=(e||"").match(de)||[""],u=e.length;u--;)if(s=$e.exec(e[u])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(d=ue.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,h=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=a=h.length;a--;)o=h[a],!r&&m!==o.origType||n&&n.guid!==o.guid||s&&!s.test(o.namespace)||i&&i!==o.selector&&("**"!==i||!o.selector)||(h.splice(a,1),o.selector&&h.delegateCount--,d.remove&&d.remove.call(t,o));l&&!h.length&&(d.teardown&&d.teardown.call(t,f,g.handle)!==!1||ue.removeEvent(t,p,g.handle),delete c[p])}else for(p in c)ue.event.remove(t,p+e[u],n,i,!0);ue.isEmptyObject(c)&&(delete g.handle,ue._removeData(t,"events"))}},trigger:function(n,i,r,a){var o,s,l,u,c,d,h,p=[r||Y],f=se.call(n,"type")?n.type:n,m=se.call(n,"namespace")?n.namespace.split("."):[];if(l=d=r=r||Y,3!==r.nodeType&&8!==r.nodeType&&!Re.test(f+ue.event.triggered)&&(f.indexOf(".")>=0&&(m=f.split("."),f=m.shift(),m.sort()),s=f.indexOf(":")<0&&"on"+f,n=n[ue.expando]?n:new ue.Event(f,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=e,n.target||(n.target=r),i=null==i?[n]:ue.makeArray(i,[n]),c=ue.event.special[f]||{},a||!c.trigger||c.trigger.apply(r,i)!==!1)){if(!a&&!c.noBubble&&!ue.isWindow(r)){for(u=c.delegateType||f,Re.test(u+f)||(l=l.parentNode);l;l=l.parentNode)p.push(l),d=l;d===(r.ownerDocument||Y)&&p.push(d.defaultView||d.parentWindow||t)}for(h=0;(l=p[h++])&&!n.isPropagationStopped();)n.type=h>1?u:c.bindType||f,o=(ue._data(l,"events")||{})[n.type]&&ue._data(l,"handle"),o&&o.apply(l,i),o=s&&l[s],o&&ue.acceptData(l)&&o.apply&&o.apply(l,i)===!1&&n.preventDefault();if(n.type=f,!(a||n.isDefaultPrevented()||c._default&&c._default.apply(r.ownerDocument,i)!==!1||"click"===f&&ue.nodeName(r,"a")||!ue.acceptData(r)||!s||!r[f]||ue.isWindow(r))){d=r[s],d&&(r[s]=null),ue.event.triggered=f;try{r[f]()}catch(g){}ue.event.triggered=e,d&&(r[s]=d)}return n.result}},dispatch:function(t){t=ue.event.fix(t);var n,i,r,a,o,s=[],l=re.call(arguments),u=(ue._data(this,"events")||{})[t.type]||[],c=ue.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(s=ue.event.handlers.call(this,t,u),n=0;(a=s[n++])&&!t.isPropagationStopped();)for(t.currentTarget=a.elem,o=0;(r=a.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(r.namespace))&&(t.handleObj=r,t.data=r.data,i=((ue.event.special[r.origType]||{}).handle||r.handler).apply(a.elem,l),i!==e&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,n){var i,r,a,o,s=[],l=n.delegateCount,u=t.target;if(l&&u.nodeType&&(!t.button||"click"!==t.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==t.type)){for(a=[],o=0;l>o;o++)r=n[o],i=r.selector+" ",a[i]===e&&(a[i]=r.needsContext?ue(i,this).index(u)>=0:ue.find(i,this,null,[u]).length),a[i]&&a.push(r);a.length&&s.push({elem:u,handlers:a})}return l<n.length&&s.push({elem:this,handlers:n.slice(l)}),s},fix:function(t){if(t[ue.expando])return t;var e,n,i,r=t.type,a=t,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=Fe.test(r)?this.mouseHooks:Ve.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,t=new ue.Event(a),e=i.length;e--;)n=i[e],t[n]=a[n];return t.target||(t.target=a.srcElement||Y),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,o.filter?o.filter(t,a):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,n){var i,r,a,o=n.button,s=n.fromElement;return null==t.pageX&&null!=n.clientX&&(r=t.target.ownerDocument||Y,a=r.documentElement,i=r.body,t.pageX=n.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a&&a.clientLeft||i&&i.clientLeft||0),t.pageY=n.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a&&a.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?n.toElement:s),t.which||o===e||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},click:{trigger:function(){return ue.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==Y.activeElement&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===Y.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(t){t.result!==e&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=ue.extend(new ue.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?ue.event.trigger(r,null,e):ue.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},ue.removeEvent=Y.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===X&&(t[i]=null),t.detachEvent(i,n))},ue.Event=function(t,e){return this instanceof ue.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?u:c):this.type=t,e&&ue.extend(this,e),this.timeStamp=t&&t.timeStamp||ue.now(),void(this[ue.expando]=!0)):new ue.Event(t,e)},ue.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=u,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=u,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=u,this.stopPropagation()}},ue.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){ue.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,a=t.handleObj;return(!r||r!==i&&!ue.contains(i,r))&&(t.type=a.origType,n=a.handler.apply(this,arguments),t.type=e),n}}}),ue.support.submitBubbles||(ue.event.special.submit={setup:function(){return ue.nodeName(this,"form")?!1:void ue.event.add(this,"click._submit keypress._submit",function(t){var n=t.target,i=ue.nodeName(n,"input")||ue.nodeName(n,"button")?n.form:e;i&&!ue._data(i,"submitBubbles")&&(ue.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),ue._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&ue.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return ue.nodeName(this,"form")?!1:void ue.event.remove(this,"._submit")}}),ue.support.changeBubbles||(ue.event.special.change={setup:function(){return je.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ue.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),ue.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),ue.event.simulate("change",this,t,!0)})),!1):void ue.event.add(this,"beforeactivate._change",function(t){var e=t.target;je.test(e.nodeName)&&!ue._data(e,"changeBubbles")&&(ue.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||ue.event.simulate("change",this.parentNode,t,!0)}),ue._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ue.event.remove(this,"._change"),!je.test(this.nodeName)}}),ue.support.focusinBubbles||ue.each({focus:"focusin",blur:"focusout"},function(t,e){var n=0,i=function(t){ue.event.simulate(e,t.target,ue.event.fix(t),!0)};ue.event.special[e]={setup:function(){0===n++&&Y.addEventListener(t,i,!0)},teardown:function(){0===--n&&Y.removeEventListener(t,i,!0)}}}),ue.fn.extend({on:function(t,n,i,r,a){var o,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=e);for(o in t)this.on(o,n,i,t[o],a);return this}if(null==i&&null==r?(r=n,i=n=e):null==r&&("string"==typeof n?(r=i,i=e):(r=i,i=n,n=e)),r===!1)r=c;else if(!r)return this;return 1===a&&(s=r,r=function(t){return ue().off(t),s.apply(this,arguments)},r.guid=s.guid||(s.guid=ue.guid++)),this.each(function(){ue.event.add(this,t,r,i,n)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,n,i){var r,a;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,ue(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(a in t)this.off(a,n,t[a]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=e),i===!1&&(i=c),this.each(function(){ue.event.remove(this,t,i,n)})},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},trigger:function(t,e){return this.each(function(){ue.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?ue.event.trigger(t,e,n,!0):void 0}}),function(t,e){function n(t){return fe.test(t+"")}function i(){var t,e=[];return t=function(n,i){return e.push(n+=" ")>C.cacheLength&&delete t[e.shift()],t[n]=i}}function r(t){return t[F]=!0,t}function a(t){var e=I.createElement("div");try{return t(e)}catch(n){return!1}finally{e=null}}function o(t,e,n,i){var r,a,o,s,l,u,c,p,f,m;if((e?e.ownerDocument||e:R)!==I&&P(e),e=e||I,n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=e.nodeType)&&9!==s)return[];if(!B&&!i){if(r=me.exec(t))if(o=r[1]){if(9===s){if(a=e.getElementById(o),!a||!a.parentNode)return n;if(a.id===o)return n.push(a),n}else if(e.ownerDocument&&(a=e.ownerDocument.getElementById(o))&&j(e,a)&&a.id===o)return n.push(a),n}else{if(r[2])return Q.apply(n,K.call(e.getElementsByTagName(t),0)),n;if((o=r[3])&&$.getByClassName&&e.getElementsByClassName)return Q.apply(n,K.call(e.getElementsByClassName(o),0)),n}if($.qsa&&!L.test(t)){if(c=!0,p=F,f=e,m=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=d(t),(c=e.getAttribute("id"))?p=c.replace(ye,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+h(u[l]);f=pe.test(t)&&e.parentNode||e,m=u.join(",")}if(m)try{return Q.apply(n,K.call(f.querySelectorAll(m),0)),n}catch(g){}finally{c||e.removeAttribute("id")}}}return x(t.replace(oe,"$1"),e,n,i)}function s(t,e){var n=e&&t,i=n&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function l(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function u(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return r(function(e){return e=+e,r(function(n,i){for(var r,a=t([],n.length,e),o=a.length;o--;)n[r=a[o]]&&(n[r]=!(i[r]=n[r]))})})}function d(t,e){var n,i,r,a,s,l,u,c=z[t+" "];if(c)return e?0:c.slice(0);for(s=t,l=[],u=C.preFilter;s;){(!n||(i=se.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(r=[])),n=!1,(i=le.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(oe," ")}),s=s.slice(n.length));for(a in C.filter)!(i=he[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),r.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?o.error(t):z(t,l).slice(0)}function h(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function p(t,e,n){var i=e.dir,r=n&&"parentNode"===i,a=G++;return e.first?function(e,n,a){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,a)}:function(e,n,o){var s,l,u,c=q+" "+a;if(o){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,o))return!0}else for(;e=e[i];)if(1===e.nodeType||r)if(u=e[F]||(e[F]={}),(l=u[i])&&l[0]===c){if((s=l[1])===!0||s===S)return s===!0}else if(l=u[i]=[c],l[1]=t(e,n,o)||S,l[1]===!0)return!0}}function f(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,e,n,i,r){for(var a,o=[],s=0,l=t.length,u=null!=e;l>s;s++)(a=t[s])&&(!n||n(a,i,r))&&(o.push(a),u&&e.push(s));return o}function g(t,e,n,i,a,o){return i&&!i[F]&&(i=g(i)),a&&!a[F]&&(a=g(a,o)),r(function(r,o,s,l){var u,c,d,h=[],p=[],f=o.length,g=r||b(e||"*",s.nodeType?[s]:s,[]),v=!t||!r&&e?g:m(g,h,t,s,l),y=n?a||(r?t:f||i)?[]:o:v;if(n&&n(v,y,s,l),i)for(u=m(y,p),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(y[p[c]]=!(v[p[c]]=d));if(r){if(a||t){if(a){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(v[c]=d);a(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=a?J.call(r,d):h[c])>-1&&(r[u]=!(o[u]=d))}}else y=m(y===o?y.splice(f,y.length):y),a?a(null,o,y,l):Q.apply(o,y)})}function v(t){for(var e,n,i,r=t.length,a=C.relative[t[0].type],o=a||C.relative[" "],s=a?1:0,l=p(function(t){return t===e},o,!0),u=p(function(t){return J.call(e,t)>-1},o,!0),c=[function(t,n,i){return!a&&(i||n!==N)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];r>s;s++)if(n=C.relative[t[s].type])c=[p(f(c),n)];else{if(n=C.filter[t[s].type].apply(null,t[s].matches),n[F]){for(i=++s;r>i&&!C.relative[t[i].type];i++);return g(s>1&&f(c),s>1&&h(t.slice(0,s-1)).replace(oe,"$1"),n,i>s&&v(t.slice(s,i)),r>i&&v(t=t.slice(i)),r>i&&h(t))}c.push(n)}return f(c)}function y(t,e){var n=0,i=e.length>0,a=t.length>0,s=function(r,s,l,u,c){var d,h,p,f=[],g=0,v="0",y=r&&[],b=null!=c,x=N,w=r||a&&C.find.TAG("*",c&&s.parentNode||s),k=q+=null==x?1:Math.random()||.1;for(b&&(N=s!==I&&s,S=n);null!=(d=w[v]);v++){if(a&&d){for(h=0;p=t[h++];)if(p(d,s,l)){u.push(d);break}b&&(q=k,S=++n)}i&&((d=!p&&d)&&g--,r&&y.push(d))}if(g+=v,i&&v!==g){for(h=0;p=e[h++];)p(y,f,s,l);if(r){if(g>0)for(;v--;)y[v]||f[v]||(f[v]=Z.call(u));f=m(f)}Q.apply(u,f),b&&!r&&f.length>0&&g+e.length>1&&o.uniqueSort(u)}return b&&(q=k,N=x),y};return i?r(s):s}function b(t,e,n){for(var i=0,r=e.length;r>i;i++)o(t,e[i],n);return n}function x(t,e,n,i){var r,a,o,s,l,u=d(t);if(!i&&1===u.length){if(a=u[0]=u[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&9===e.nodeType&&!B&&C.relative[a[1].type]){if(e=C.find.ID(o.matches[0].replace(xe,we),e)[0],!e)return n;t=t.slice(a.shift().value.length)}for(r=he.needsContext.test(t)?0:a.length;r--&&(o=a[r],!C.relative[s=o.type]);)if((l=C.find[s])&&(i=l(o.matches[0].replace(xe,we),pe.test(a[0].type)&&e.parentNode||e))){if(a.splice(r,1),t=i.length&&h(a),!t)return Q.apply(n,K.call(i,0)),n;break}}return T(t,u)(i,e,B,n,pe.test(t)),n}function w(){}var k,S,C,E,_,T,A,N,P,I,M,B,L,D,O,j,V,F="sizzle"+-new Date,R=t.document,$={},q=0,G=0,H=i(),z=i(),U=i(),W=typeof e,X=1<<31,Y=[],Z=Y.pop,Q=Y.push,K=Y.slice,J=Y.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},te="[\\x20\\t\\r\\n\\f]",ee="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ne=ee.replace("w","w#"),ie="([*^$|!~]?=)",re="\\["+te+"*("+ee+")"+te+"*(?:"+ie+te+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ne+")|)|)"+te+"*\\]",ae=":("+ee+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+re.replace(3,8)+")*)|.*)\\)|)",oe=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),se=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([\\x20\\t\\r\\n\\f>+~])"+te+"*"),ce=new RegExp(ae),de=new RegExp("^"+ne+"$"),he={ID:new RegExp("^#("+ee+")"),CLASS:new RegExp("^\\.("+ee+")"),NAME:new RegExp("^\\[name=['\"]?("+ee+")['\"]?\\]"),TAG:new RegExp("^("+ee.replace("w","w*")+")"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/[\x20\t\r\n\f]*[+~]/,fe=/^[^{]+\{\s*\[native code/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/'|\\/g,be=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,xe=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,we=function(t,e){var n="0x"+e-65536;return n!==n?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{K.call(R.documentElement.childNodes,0)[0].nodeType}catch(ke){K=function(t){for(var e,n=[];e=this[t++];)n.push(e);return n}}_=o.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},P=o.setDocument=function(t){var i=t?t.ownerDocument||t:R;return i!==I&&9===i.nodeType&&i.documentElement?(I=i,M=i.documentElement,B=_(i),$.tagNameNoComments=a(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),$.attributes=a(function(t){t.innerHTML="<select></select>";var e=typeof t.lastChild.getAttribute("multiple");return"boolean"!==e&&"string"!==e}),$.getByClassName=a(function(t){return t.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",t.getElementsByClassName&&t.getElementsByClassName("e").length?(t.lastChild.className="e",2===t.getElementsByClassName("e").length):!1}),$.getByName=a(function(t){t.id=F+0,t.innerHTML="<a name='"+F+"'></a><div name='"+F+"'></div>",M.insertBefore(t,M.firstChild);var e=i.getElementsByName&&i.getElementsByName(F).length===2+i.getElementsByName(F+0).length;return $.getIdNotName=!i.getElementById(F),M.removeChild(t),e}),C.attrHandle=a(function(t){return t.innerHTML="<a href='#'></a>",t.firstChild&&typeof t.firstChild.getAttribute!==W&&"#"===t.firstChild.getAttribute("href")})?{}:{href:function(t){return t.getAttribute("href",2)},type:function(t){return t.getAttribute("type")}},$.getIdNotName?(C.find.ID=function(t,e){if(typeof e.getElementById!==W&&!B){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(xe,we);return function(t){return t.getAttribute("id")===e}}):(C.find.ID=function(t,n){if(typeof n.getElementById!==W&&!B){var i=n.getElementById(t);return i?i.id===t||typeof i.getAttributeNode!==W&&i.getAttributeNode("id").value===t?[i]:e:[]}},C.filter.ID=function(t){var e=t.replace(xe,we);return function(t){var n=typeof t.getAttributeNode!==W&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=$.tagNameNoComments?function(t,e){return typeof e.getElementsByTagName!==W?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,a=e.getElementsByTagName(t);if("*"===t){for(;n=a[r++];)1===n.nodeType&&i.push(n);return i}return a},C.find.NAME=$.getByName&&function(t,e){return typeof e.getElementsByName!==W?e.getElementsByName(name):void 0},C.find.CLASS=$.getByClassName&&function(t,e){return typeof e.getElementsByClassName===W||B?void 0:e.getElementsByClassName(t)},D=[],L=[":focus"],($.qsa=n(i.querySelectorAll))&&(a(function(t){t.innerHTML="<select><option selected=''></option></select>",t.querySelectorAll("[selected]").length||L.push("\\["+te+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),t.querySelectorAll(":checked").length||L.push(":checked")}),a(function(t){t.innerHTML="<input type='hidden' i=''/>",t.querySelectorAll("[i^='']").length&&L.push("[*^$]="+te+"*(?:\"\"|'')"),t.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),L.push(",.*:")})),($.matchesSelector=n(O=M.matchesSelector||M.mozMatchesSelector||M.webkitMatchesSelector||M.oMatchesSelector||M.msMatchesSelector))&&a(function(t){$.disconnectedMatch=O.call(t,"div"),O.call(t,"[s!='']:x"),D.push("!=",ae)}),L=new RegExp(L.join("|")),D=new RegExp(D.join("|")),j=n(M.contains)||M.compareDocumentPosition?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=M.compareDocumentPosition?function(t,e){var n;return t===e?(A=!0,0):(n=e.compareDocumentPosition&&t.compareDocumentPosition&&t.compareDocumentPosition(e))?1&n||t.parentNode&&11===t.parentNode.nodeType?t===i||j(R,t)?-1:e===i||j(R,e)?1:0:4&n?-1:1:t.compareDocumentPosition?-1:1}:function(t,e){var n,r=0,a=t.parentNode,o=e.parentNode,l=[t],u=[e];if(t===e)return A=!0,0;if(!a||!o)return t===i?-1:e===i?1:a?-1:o?1:0;if(a===o)return s(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?s(l[r],u[r]):l[r]===R?-1:u[r]===R?1:0},A=!1,[0,0].sort(V),$.detectDuplicates=A,I):I},o.matches=function(t,e){return o(t,null,null,e)},o.matchesSelector=function(t,e){if((t.ownerDocument||t)!==I&&P(t),e=e.replace(be,"='$1']"),!(!$.matchesSelector||B||D&&D.test(e)||L.test(e)))try{var n=O.call(t,e);if(n||$.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(i){}return o(e,I,null,[t]).length>0},o.contains=function(t,e){return(t.ownerDocument||t)!==I&&P(t),j(t,e)},o.attr=function(t,e){var n;return(t.ownerDocument||t)!==I&&P(t),B||(e=e.toLowerCase()),(n=C.attrHandle[e])?n(t):B||$.attributes?t.getAttribute(e):((n=t.getAttributeNode(e))||t.getAttribute(e))&&t[e]===!0?e:n&&n.specified?n.value:null},o.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},o.uniqueSort=function(t){var e,n=[],i=1,r=0;if(A=!$.detectDuplicates,t.sort(V),A){for(;e=t[i];i++)e===t[i-1]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return t},E=o.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=E(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i];i++)n+=E(e);return n},C=o.selectors={cacheLength:50,createPseudo:r,match:he,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xe,we),t[3]=(t[4]||t[5]||"").replace(xe,we),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||o.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&o.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return he.CHILD.test(t[0])?null:(t[4]?t[2]=t[4]:n&&ce.test(n)&&(e=d(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(xe,we).toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(t){var e=H[t+" "];return e||(e=new RegExp("(^|"+te+")"+t+"("+te+"|$)"))&&H(t,function(t){return e.test(t.className||typeof t.getAttribute!==W&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=o.attr(i,t);return null==r?"!="===e:e?(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r+" ").indexOf(n)>-1:"|="===e?r===n||r.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,n,i,r){var a="nth"!==t.slice(0,3),o="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,c,d,h,p,f,m=a!==o?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),y=!l&&!s;if(g){if(a){for(;m;){for(d=e;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(c=g[F]||(g[F]={}),u=c[t]||[],p=u[0]===q&&u[1],h=u[0]===q&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(h=p=0)||f.pop();)if(1===d.nodeType&&++h&&d===e){c[t]=[q,p,h];break}}else if(y&&(u=(e[F]||(e[F]={}))[t])&&u[0]===q)h=u[1];else for(;(d=++p&&d&&d[m]||(h=p=0)||f.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++h||(y&&((d[F]||(d[F]={}))[t]=[q,h]),d!==e)););return h-=r,h===i||h%i===0&&h/i>=0}}},PSEUDO:function(t,e){var n,i=C.pseudos[t]||C.setFilters[t.toLowerCase()]||o.error("unsupported pseudo: "+t);return i[F]?i(e):i.length>1?(n=[t,t,"",e],C.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,n){for(var r,a=i(t,e),o=a.length;o--;)r=J.call(t,a[o]),t[r]=!(n[r]=a[o])}):function(t){return i(t,0,n)}):i}},pseudos:{not:r(function(t){var e=[],n=[],i=T(t.replace(oe,"$1"));return i[F]?r(function(t,e,n,r){for(var a,o=i(t,null,r,[]),s=t.length;s--;)(a=o[s])&&(t[s]=!(e[s]=a))}):function(t,r,a){return e[0]=t,i(e,null,a,n),!n.pop()}}),has:r(function(t){return function(e){return o(t,e).length>0}}),contains:r(function(t){return function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:r(function(t){return de.test(t||"")||o.error("unsupported lang: "+t),t=t.replace(xe,we).toLowerCase(),function(e){var n;do if(n=B?e.getAttribute("xml:lang")||e.getAttribute("lang"):e.lang)return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===M},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeName>"@"||3===t.nodeType||4===t.nodeType)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)
},header:function(t){return ve.test(t.nodeName)},input:function(t){return ge.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||e.toLowerCase()===t.type)},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}};for(k in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[k]=l(k);for(k in{submit:!0,reset:!0})C.pseudos[k]=u(k);T=o.compile=function(t,e){var n,i=[],r=[],a=U[t+" "];if(!a){for(e||(e=d(t)),n=e.length;n--;)a=v(e[n]),a[F]?i.push(a):r.push(a);a=U(t,y(r,i))}return a},C.pseudos.nth=C.pseudos.eq,C.filters=w.prototype=C.pseudos,C.setFilters=new w,P(),o.attr=ue.attr,ue.find=o,ue.expr=o.selectors,ue.expr[":"]=ue.expr.pseudos,ue.unique=o.uniqueSort,ue.text=o.getText,ue.isXMLDoc=o.isXML,ue.contains=o.contains}(t);var qe=/Until$/,Ge=/^(?:parents|prev(?:Until|All))/,He=/^.[^:#\[\.,]*$/,ze=ue.expr.match.needsContext,Ue={children:!0,contents:!0,next:!0,prev:!0};ue.fn.extend({find:function(t){var e,n,i,r=this.length;if("string"!=typeof t)return i=this,this.pushStack(ue(t).filter(function(){for(e=0;r>e;e++)if(ue.contains(i[e],this))return!0}));for(n=[],e=0;r>e;e++)ue.find(t,this[e],n);return n=this.pushStack(r>1?ue.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+t,n},has:function(t){var e,n=ue(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(ue.contains(this,n[e]))return!0})},not:function(t){return this.pushStack(h(this,t,!1))},filter:function(t){return this.pushStack(h(this,t,!0))},is:function(t){return!!t&&("string"==typeof t?ze.test(t)?ue(t,this.context).index(this[0])>=0:ue.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){for(var n,i=0,r=this.length,a=[],o=ze.test(t)||"string"!=typeof t?ue(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n.ownerDocument&&n!==e&&11!==n.nodeType;){if(o?o.index(n)>-1:ue.find.matchesSelector(n,t)){a.push(n);break}n=n.parentNode}return this.pushStack(a.length>1?ue.unique(a):a)},index:function(t){return t?"string"==typeof t?ue.inArray(this[0],ue(t)):ue.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){var n="string"==typeof t?ue(t,e):ue.makeArray(t&&t.nodeType?[t]:t),i=ue.merge(this.get(),n);return this.pushStack(ue.unique(i))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ue.fn.andSelf=ue.fn.addBack,ue.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ue.dir(t,"parentNode")},parentsUntil:function(t,e,n){return ue.dir(t,"parentNode",n)},next:function(t){return d(t,"nextSibling")},prev:function(t){return d(t,"previousSibling")},nextAll:function(t){return ue.dir(t,"nextSibling")},prevAll:function(t){return ue.dir(t,"previousSibling")},nextUntil:function(t,e,n){return ue.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return ue.dir(t,"previousSibling",n)},siblings:function(t){return ue.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return ue.sibling(t.firstChild)},contents:function(t){return ue.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:ue.merge([],t.childNodes)}},function(t,e){ue.fn[t]=function(n,i){var r=ue.map(this,e,n);return qe.test(t)||(i=n),i&&"string"==typeof i&&(r=ue.filter(i,r)),r=this.length>1&&!Ue[t]?ue.unique(r):r,this.length>1&&Ge.test(t)&&(r=r.reverse()),this.pushStack(r)}}),ue.extend({filter:function(t,e,n){return n&&(t=":not("+t+")"),1===e.length?ue.find.matchesSelector(e[0],t)?[e[0]]:[]:ue.find.matches(t,e)},dir:function(t,n,i){for(var r=[],a=t[n];a&&9!==a.nodeType&&(i===e||1!==a.nodeType||!ue(a).is(i));)1===a.nodeType&&r.push(a),a=a[n];return r},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}});var We="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Xe=/ jQuery\d+="(?:null|\d+)"/g,Ye=new RegExp("<(?:"+We+")[\\s/>]","i"),Ze=/^\s+/,Qe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ke=/<([\w:]+)/,Je=/<tbody/i,tn=/<|&#?\w+;/,en=/<(?:script|style|link)/i,nn=/^(?:checkbox|radio)$/i,rn=/checked\s*(?:[^=]|=\s*.checked.)/i,an=/^$|\/(?:java|ecma)script/i,on=/^true\/(.*)/,sn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ln={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ue.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},un=p(Y),cn=un.appendChild(Y.createElement("div"));ln.optgroup=ln.option,ln.tbody=ln.tfoot=ln.colgroup=ln.caption=ln.thead,ln.th=ln.td,ue.fn.extend({text:function(t){return ue.access(this,function(t){return t===e?ue.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if(ue.isFunction(t))return this.each(function(e){ue(this).wrapAll(t.call(this,e))});if(this[0]){var e=ue(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(ue.isFunction(t)?function(e){ue(this).wrapInner(t.call(this,e))}:function(){var e=ue(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=ue.isFunction(t);return this.each(function(n){ue(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){ue.nodeName(this,"body")||ue(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(t,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,!1,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=0;null!=(n=this[i]);i++)(!t||ue.filter(t,[n]).length>0)&&(e||1!==n.nodeType||ue.cleanData(x(n)),n.parentNode&&(e&&ue.contains(n.ownerDocument,n)&&v(x(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&ue.cleanData(x(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&ue.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return ue.clone(this,t,e)})},html:function(t){return ue.access(this,function(t){var n=this[0]||{},i=0,r=this.length;if(t===e)return 1===n.nodeType?n.innerHTML.replace(Xe,""):e;if(!("string"!=typeof t||en.test(t)||!ue.support.htmlSerialize&&Ye.test(t)||!ue.support.leadingWhitespace&&Ze.test(t)||ln[(Ke.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Qe,"<$1></$2>");try{for(;r>i;i++)n=this[i]||{},1===n.nodeType&&(ue.cleanData(x(n,!1)),n.innerHTML=t);n=0}catch(a){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){var e=ue.isFunction(t);return e||"string"==typeof t||(t=ue(t).not(this).detach()),this.domManip([t],!0,function(t){var e=this.nextSibling,n=this.parentNode;n&&(ue(this).remove(),n.insertBefore(t,e))})},detach:function(t){return this.remove(t,!0)},domManip:function(t,n,i){t=ne.apply([],t);var r,a,o,s,l,u,c=0,d=this.length,h=this,p=d-1,v=t[0],y=ue.isFunction(v);if(y||!(1>=d||"string"!=typeof v||ue.support.checkClone)&&rn.test(v))return this.each(function(r){var a=h.eq(r);y&&(t[0]=v.call(this,r,n?a.html():e)),a.domManip(t,n,i)});if(d&&(u=ue.buildFragment(t,this[0].ownerDocument,!1,this),r=u.firstChild,1===u.childNodes.length&&(u=r),r)){for(n=n&&ue.nodeName(r,"tr"),s=ue.map(x(u,"script"),m),o=s.length;d>c;c++)a=u,c!==p&&(a=ue.clone(a,!0,!0),o&&ue.merge(s,x(a,"script"))),i.call(n&&ue.nodeName(this[c],"table")?f(this[c],"tbody"):this[c],a,c);if(o)for(l=s[s.length-1].ownerDocument,ue.map(s,g),c=0;o>c;c++)a=s[c],an.test(a.type||"")&&!ue._data(a,"globalEval")&&ue.contains(l,a)&&(a.src?ue.ajax({url:a.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ue.globalEval((a.text||a.textContent||a.innerHTML||"").replace(sn,"")));u=r=null}return this}}),ue.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ue.fn[t]=function(t){for(var n,i=0,r=[],a=ue(t),o=a.length-1;o>=i;i++)n=i===o?this:this.clone(!0),ue(a[i])[e](n),ie.apply(r,n.get());return this.pushStack(r)}}),ue.extend({clone:function(t,e,n){var i,r,a,o,s,l=ue.contains(t.ownerDocument,t);if(ue.support.html5Clone||ue.isXMLDoc(t)||!Ye.test("<"+t.nodeName+">")?a=t.cloneNode(!0):(cn.innerHTML=t.outerHTML,cn.removeChild(a=cn.firstChild)),!(ue.support.noCloneEvent&&ue.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ue.isXMLDoc(t)))for(i=x(a),s=x(t),o=0;null!=(r=s[o]);++o)i[o]&&b(r,i[o]);if(e)if(n)for(s=s||x(t),i=i||x(a),o=0;null!=(r=s[o]);o++)y(r,i[o]);else y(t,a);return i=x(a,"script"),i.length>0&&v(i,!l&&x(t,"script")),i=s=r=null,a},buildFragment:function(t,e,n,i){for(var r,a,o,s,l,u,c,d=t.length,h=p(e),f=[],m=0;d>m;m++)if(a=t[m],a||0===a)if("object"===ue.type(a))ue.merge(f,a.nodeType?[a]:a);else if(tn.test(a)){for(s=s||h.appendChild(e.createElement("div")),l=(Ke.exec(a)||["",""])[1].toLowerCase(),c=ln[l]||ln._default,s.innerHTML=c[1]+a.replace(Qe,"<$1></$2>")+c[2],r=c[0];r--;)s=s.lastChild;if(!ue.support.leadingWhitespace&&Ze.test(a)&&f.push(e.createTextNode(Ze.exec(a)[0])),!ue.support.tbody)for(a="table"!==l||Je.test(a)?"<table>"!==c[1]||Je.test(a)?0:s:s.firstChild,r=a&&a.childNodes.length;r--;)ue.nodeName(u=a.childNodes[r],"tbody")&&!u.childNodes.length&&a.removeChild(u);for(ue.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=h.lastChild}else f.push(e.createTextNode(a));for(s&&h.removeChild(s),ue.support.appendChecked||ue.grep(x(f,"input"),w),m=0;a=f[m++];)if((!i||-1===ue.inArray(a,i))&&(o=ue.contains(a.ownerDocument,a),s=x(h.appendChild(a),"script"),o&&v(s),n))for(r=0;a=s[r++];)an.test(a.type||"")&&n.push(a);return s=null,h},cleanData:function(t,e){for(var n,i,r,a,o=0,s=ue.expando,l=ue.cache,u=ue.support.deleteExpando,c=ue.event.special;null!=(n=t[o]);o++)if((e||ue.acceptData(n))&&(r=n[s],a=r&&l[r])){if(a.events)for(i in a.events)c[i]?ue.event.remove(n,i):ue.removeEvent(n,i,a.handle);l[r]&&(delete l[r],u?delete n[s]:typeof n.removeAttribute!==X?n.removeAttribute(s):n[s]=null,te.push(r))}}});var dn,hn,pn,fn=/alpha\([^)]*\)/i,mn=/opacity\s*=\s*([^)]*)/,gn=/^(top|right|bottom|left)$/,vn=/^(none|table(?!-c[ea]).+)/,yn=/^margin/,bn=new RegExp("^("+ce+")(.*)$","i"),xn=new RegExp("^("+ce+")(?!px)[a-z%]+$","i"),wn=new RegExp("^([+-])=("+ce+")","i"),kn={BODY:"block"},Sn={position:"absolute",visibility:"hidden",display:"block"},Cn={letterSpacing:0,fontWeight:400},En=["Top","Right","Bottom","Left"],_n=["Webkit","O","Moz","ms"];ue.fn.extend({css:function(t,n){return ue.access(this,function(t,n,i){var r,a,o={},s=0;if(ue.isArray(n)){for(a=hn(t),r=n.length;r>s;s++)o[n[s]]=ue.css(t,n[s],!1,a);return o}return i!==e?ue.style(t,n,i):ue.css(t,n)},t,n,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(t){var e="boolean"==typeof t;return this.each(function(){(e?t:S(this))?ue(this).show():ue(this).hide()})}}),ue.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=pn(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ue.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,n,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var a,o,s,l=ue.camelCase(n),u=t.style;if(n=ue.cssProps[l]||(ue.cssProps[l]=k(u,l)),s=ue.cssHooks[n]||ue.cssHooks[l],i===e)return s&&"get"in s&&(a=s.get(t,!1,r))!==e?a:u[n];if(o=typeof i,"string"===o&&(a=wn.exec(i))&&(i=(a[1]+1)*a[2]+parseFloat(ue.css(t,n)),o="number"),!(null==i||"number"===o&&isNaN(i)||("number"!==o||ue.cssNumber[l]||(i+="px"),ue.support.clearCloneStyle||""!==i||0!==n.indexOf("background")||(u[n]="inherit"),s&&"set"in s&&(i=s.set(t,i,r))===e)))try{u[n]=i}catch(c){}}},css:function(t,n,i,r){var a,o,s,l=ue.camelCase(n);return n=ue.cssProps[l]||(ue.cssProps[l]=k(t.style,l)),s=ue.cssHooks[n]||ue.cssHooks[l],s&&"get"in s&&(o=s.get(t,!0,i)),o===e&&(o=pn(t,n,r)),"normal"===o&&n in Cn&&(o=Cn[n]),""===i||i?(a=parseFloat(o),i===!0||ue.isNumeric(a)?a||0:o):o},swap:function(t,e,n,i){var r,a,o={};for(a in e)o[a]=t.style[a],t.style[a]=e[a];r=n.apply(t,i||[]);for(a in e)t.style[a]=o[a];return r}}),t.getComputedStyle?(hn=function(e){return t.getComputedStyle(e,null)},pn=function(t,n,i){var r,a,o,s=i||hn(t),l=s?s.getPropertyValue(n)||s[n]:e,u=t.style;return s&&(""!==l||ue.contains(t.ownerDocument,t)||(l=ue.style(t,n)),xn.test(l)&&yn.test(n)&&(r=u.width,a=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=l,l=s.width,u.width=r,u.minWidth=a,u.maxWidth=o)),l}):Y.documentElement.currentStyle&&(hn=function(t){return t.currentStyle},pn=function(t,n,i){var r,a,o,s=i||hn(t),l=s?s[n]:e,u=t.style;return null==l&&u&&u[n]&&(l=u[n]),xn.test(l)&&!gn.test(n)&&(r=u.left,a=t.runtimeStyle,o=a&&a.left,o&&(a.left=t.currentStyle.left),u.left="fontSize"===n?"1em":l,l=u.pixelLeft+"px",u.left=r,o&&(a.left=o)),""===l?"auto":l}),ue.each(["height","width"],function(t,e){ue.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&vn.test(ue.css(t,"display"))?ue.swap(t,Sn,function(){return T(t,e,i)}):T(t,e,i):void 0},set:function(t,n,i){var r=i&&hn(t);return E(t,n,i?_(t,e,i,ue.support.boxSizing&&"border-box"===ue.css(t,"boxSizing",!1,r),r):0)}}}),ue.support.opacity||(ue.cssHooks.opacity={get:function(t,e){return mn.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=ue.isNumeric(e)?"alpha(opacity="+100*e+")":"",a=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===ue.trim(a.replace(fn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=fn.test(a)?a.replace(fn,r):a+" "+r)}}),ue(function(){ue.support.reliableMarginRight||(ue.cssHooks.marginRight={get:function(t,e){return e?ue.swap(t,{display:"inline-block"},pn,[t,"marginRight"]):void 0}}),!ue.support.pixelPosition&&ue.fn.position&&ue.each(["top","left"],function(t,e){ue.cssHooks[e]={get:function(t,n){return n?(n=pn(t,e),xn.test(n)?ue(t).position()[e]+"px":n):void 0}}})}),ue.expr&&ue.expr.filters&&(ue.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ue.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||ue.css(t,"display"))},ue.expr.filters.visible=function(t){return!ue.expr.filters.hidden(t)}),ue.each({margin:"",padding:"",border:"Width"},function(t,e){ue.cssHooks[t+e]={expand:function(n){for(var i=0,r={},a="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+En[i]+e]=a[i]||a[i-2]||a[0];return r}},yn.test(t)||(ue.cssHooks[t+e].set=E)});var Tn=/%20/g,An=/\[\]$/,Nn=/\r?\n/g,Pn=/^(?:submit|button|image|reset|file)$/i,In=/^(?:input|select|textarea|keygen)/i;ue.fn.extend({serialize:function(){return ue.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ue.prop(this,"elements");return t?ue.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ue(this).is(":disabled")&&In.test(this.nodeName)&&!Pn.test(t)&&(this.checked||!nn.test(t))}).map(function(t,e){var n=ue(this).val();return null==n?null:ue.isArray(n)?ue.map(n,function(t){return{name:e.name,value:t.replace(Nn,"\r\n")}}):{name:e.name,value:n.replace(Nn,"\r\n")}}).get()}}),ue.param=function(t,n){var i,r=[],a=function(t,e){e=ue.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(n===e&&(n=ue.ajaxSettings&&ue.ajaxSettings.traditional),ue.isArray(t)||t.jquery&&!ue.isPlainObject(t))ue.each(t,function(){a(this.name,this.value)});else for(i in t)P(i,t[i],n,a);return r.join("&").replace(Tn,"+")},ue.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ue.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),ue.fn.hover=function(t,e){return this.mouseenter(t).mouseleave(e||t)};var Mn,Bn,Ln=ue.now(),Dn=/\?/,On=/#.*$/,jn=/([?&])_=[^&]*/,Vn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Rn=/^(?:GET|HEAD)$/,$n=/^\/\//,qn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Gn=ue.fn.load,Hn={},zn={},Un="*/".concat("*");try{Bn=Z.href}catch(Wn){Bn=Y.createElement("a"),Bn.href="",Bn=Bn.href}Mn=qn.exec(Bn.toLowerCase())||[],ue.fn.load=function(t,n,i){if("string"!=typeof t&&Gn)return Gn.apply(this,arguments);var r,a,o,s=this,l=t.indexOf(" ");return l>=0&&(r=t.slice(l,t.length),t=t.slice(0,l)),ue.isFunction(n)?(i=n,n=e):n&&"object"==typeof n&&(o="POST"),s.length>0&&ue.ajax({url:t,type:o,dataType:"html",data:n}).done(function(t){a=arguments,s.html(r?ue("<div>").append(ue.parseHTML(t)).find(r):t)}).complete(i&&function(t,e){s.each(i,a||[t.responseText,e,t])}),this},ue.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ue.fn[e]=function(t){return this.on(e,t)}}),ue.each(["get","post"],function(t,n){ue[n]=function(t,i,r,a){return ue.isFunction(i)&&(a=a||r,r=i,i=e),ue.ajax({url:t,type:n,dataType:a,data:i,success:r})}}),ue.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Bn,type:"GET",isLocal:Fn.test(Mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Un,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":ue.parseJSON,"text xml":ue.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?B(B(t,ue.ajaxSettings),e):B(ue.ajaxSettings,t)},ajaxPrefilter:I(Hn),ajaxTransport:I(zn),ajax:function(t,n){function i(t,n,i,r){var a,d,y,b,w,S=n;2!==x&&(x=2,l&&clearTimeout(l),c=e,s=r||"",k.readyState=t>0?4:0,i&&(b=L(h,k,i)),t>=200&&300>t||304===t?(h.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(ue.lastModified[o]=w),w=k.getResponseHeader("etag"),w&&(ue.etag[o]=w)),204===t?(a=!0,S="nocontent"):304===t?(a=!0,S="notmodified"):(a=D(h,b),S=a.state,d=a.data,y=a.error,a=!y)):(y=S,(t||!S)&&(S="error",0>t&&(t=0))),k.status=t,k.statusText=(n||S)+"",a?m.resolveWith(p,[d,S,k]):m.rejectWith(p,[k,S,y]),k.statusCode(v),v=e,u&&f.trigger(a?"ajaxSuccess":"ajaxError",[k,h,a?d:y]),g.fireWith(p,[k,S]),u&&(f.trigger("ajaxComplete",[k,h]),--ue.active||ue.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=e),n=n||{};var r,a,o,s,l,u,c,d,h=ue.ajaxSetup({},n),p=h.context||h,f=h.context&&(p.nodeType||p.jquery)?ue(p):ue.event,m=ue.Deferred(),g=ue.Callbacks("once memory"),v=h.statusCode||{},y={},b={},x=0,w="canceled",k={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!d)for(d={};e=Vn.exec(s);)d[e[1].toLowerCase()]=e[2];e=d[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?s:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return x||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>x)for(e in t)v[e]=[v[e],t[e]];else k.always(t[k.status]);return this},abort:function(t){var e=t||w;return c&&c.abort(e),i(0,e),this}};if(m.promise(k).complete=g.add,k.success=k.done,k.error=k.fail,h.url=((t||h.url||Bn)+"").replace(On,"").replace($n,Mn[1]+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=ue.trim(h.dataType||"*").toLowerCase().match(de)||[""],null==h.crossDomain&&(r=qn.exec(h.url.toLowerCase()),h.crossDomain=!(!r||r[1]===Mn[1]&&r[2]===Mn[2]&&(r[3]||("http:"===r[1]?80:443))==(Mn[3]||("http:"===Mn[1]?80:443)))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ue.param(h.data,h.traditional)),M(Hn,h,n,k),2===x)return k;u=h.global,u&&0===ue.active++&&ue.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Rn.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(Dn.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=jn.test(o)?o.replace(jn,"$1_="+Ln++):o+(Dn.test(o)?"&":"?")+"_="+Ln++)),h.ifModified&&(ue.lastModified[o]&&k.setRequestHeader("If-Modified-Since",ue.lastModified[o]),ue.etag[o]&&k.setRequestHeader("If-None-Match",ue.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Un+"; q=0.01":""):h.accepts["*"]);for(a in h.headers)k.setRequestHeader(a,h.headers[a]);if(h.beforeSend&&(h.beforeSend.call(p,k,h)===!1||2===x))return k.abort();w="abort";for(a in{success:1,error:1,complete:1})k[a](h[a]);if(c=M(zn,h,n,k)){k.readyState=1,u&&f.trigger("ajaxSend",[k,h]),h.async&&h.timeout>0&&(l=setTimeout(function(){k.abort("timeout")},h.timeout));try{x=1,c.send(y,i)}catch(S){if(!(2>x))throw S;i(-1,S)}}else i(-1,"No Transport");return k},getScript:function(t,n){return ue.get(t,e,n,"script")},getJSON:function(t,e,n){return ue.get(t,e,n,"json")}}),ue.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return ue.globalEval(t),t}}}),ue.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),ue.ajaxTransport("script",function(t){if(t.crossDomain){var n,i=Y.head||ue("head")[0]||Y.documentElement;return{send:function(e,r){n=Y.createElement("script"),n.async=!0,t.scriptCharset&&(n.charset=t.scriptCharset),n.src=t.url,n.onload=n.onreadystatechange=function(t,e){(e||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,e||r(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(e,!0)}}}});var Xn=[],Yn=/(=)\?(?=&|$)|\?\?/;ue.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Xn.pop()||ue.expando+"_"+Ln++;return this[t]=!0,t}}),ue.ajaxPrefilter("json jsonp",function(n,i,r){var a,o,s,l=n.jsonp!==!1&&(Yn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yn.test(n.data)&&"data");return l||"jsonp"===n.dataTypes[0]?(a=n.jsonpCallback=ue.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,l?n[l]=n[l].replace(Yn,"$1"+a):n.jsonp!==!1&&(n.url+=(Dn.test(n.url)?"&":"?")+n.jsonp+"="+a),n.converters["script json"]=function(){return s||ue.error(a+" was not called"),s[0]},n.dataTypes[0]="json",o=t[a],t[a]=function(){s=arguments},r.always(function(){t[a]=o,n[a]&&(n.jsonpCallback=i.jsonpCallback,Xn.push(a)),s&&ue.isFunction(o)&&o(s[0]),s=o=e}),"script"):void 0});var Zn,Qn,Kn=0,Jn=t.ActiveXObject&&function(){var t;for(t in Zn)Zn[t](e,!0)};ue.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&O()||j()}:O,Qn=ue.ajaxSettings.xhr(),ue.support.cors=!!Qn&&"withCredentials"in Qn,Qn=ue.support.ajax=!!Qn,Qn&&ue.ajaxTransport(function(n){if(!n.crossDomain||ue.support.cors){var i;return{send:function(r,a){var o,s,l=n.xhr();if(n.username?l.open(n.type,n.url,n.async,n.username,n.password):l.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)l[s]=n.xhrFields[s];n.mimeType&&l.overrideMimeType&&l.overrideMimeType(n.mimeType),n.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");try{for(s in r)l.setRequestHeader(s,r[s])}catch(u){}l.send(n.hasContent&&n.data||null),i=function(t,r){var s,u,c,d;try{if(i&&(r||4===l.readyState))if(i=e,o&&(l.onreadystatechange=ue.noop,Jn&&delete Zn[o]),r)4!==l.readyState&&l.abort();else{d={},s=l.status,u=l.getAllResponseHeaders(),"string"==typeof l.responseText&&(d.text=l.responseText);try{c=l.statusText}catch(h){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=d.text?200:404}}catch(p){r||a(-1,p)}d&&a(s,c,d,u)},n.async?4===l.readyState?setTimeout(i):(o=++Kn,Jn&&(Zn||(Zn={},ue(t).unload(Jn)),Zn[o]=i),l.onreadystatechange=i):i()},abort:function(){i&&i(e,!0)}}}});var ti,ei,ni=/^(?:toggle|show|hide)$/,ii=new RegExp("^(?:([+-])=|)("+ce+")([a-z%]*)$","i"),ri=/queueHooks$/,ai=[q],oi={"*":[function(t,e){var n,i,r=this.createTween(t,e),a=ii.exec(e),o=r.cur(),s=+o||0,l=1,u=20;if(a){if(n=+a[2],i=a[3]||(ue.cssNumber[t]?"":"px"),"px"!==i&&s){s=ue.css(r.elem,t,!0)||n||1;do l=l||".5",s/=l,ue.style(r.elem,t,s+i);while(l!==(l=r.cur()/o)&&1!==l&&--u)}r.unit=i,r.start=s,r.end=a[1]?s+(a[1]+1)*n:n}return r}]};ue.Animation=ue.extend(R,{tweener:function(t,e){ue.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],oi[n]=oi[n]||[],oi[n].unshift(e)},prefilter:function(t,e){e?ai.unshift(t):ai.push(t)}}),ue.Tween=G,G.prototype={constructor:G,init:function(t,e,n,i,r,a){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=a||(ue.cssNumber[n]?"":"px")},cur:function(){var t=G.propHooks[this.prop];return t&&t.get?t.get(this):G.propHooks._default.get(this)},run:function(t){var e,n=G.propHooks[this.prop];return this.pos=e=this.options.duration?ue.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=ue.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){ue.fx.step[t.prop]?ue.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[ue.cssProps[t.prop]]||ue.cssHooks[t.prop])?ue.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ue.each(["toggle","show","hide"],function(t,e){var n=ue.fn[e];ue.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(H(e,!0),t,i,r)}}),ue.fn.extend({fadeTo:function(t,e,n,i){return this.filter(S).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=ue.isEmptyObject(t),a=ue.speed(e,n,i),o=function(){var e=R(this,ue.extend({},t),a);o.finish=function(){e.stop(!0)},(r||ue._data(this,"finish"))&&e.stop(!0)};return o.finish=o,r||a.queue===!1?this.each(o):this.queue(a.queue,o)},stop:function(t,n,i){var r=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=n,n=t,t=e),n&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,n=null!=t&&t+"queueHooks",a=ue.timers,o=ue._data(this);if(n)o[n]&&o[n].stop&&r(o[n]);else for(n in o)o[n]&&o[n].stop&&ri.test(n)&&r(o[n]);for(n=a.length;n--;)a[n].elem!==this||null!=t&&a[n].queue!==t||(a[n].anim.stop(i),e=!1,a.splice(n,1));(e||!i)&&ue.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=ue._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],a=ue.timers,o=i?i.length:0;for(n.finish=!0,ue.queue(this,t,[]),r&&r.cur&&r.cur.finish&&r.cur.finish.call(this),e=a.length;e--;)a[e].elem===this&&a[e].queue===t&&(a[e].anim.stop(!0),a.splice(e,1));for(e=0;o>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),ue.each({slideDown:H("show"),slideUp:H("hide"),slideToggle:H("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ue.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),ue.speed=function(t,e,n){var i=t&&"object"==typeof t?ue.extend({},t):{complete:n||!n&&e||ue.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ue.isFunction(e)&&e};return i.duration=ue.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ue.fx.speeds?ue.fx.speeds[i.duration]:ue.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){ue.isFunction(i.old)&&i.old.call(this),i.queue&&ue.dequeue(this,i.queue)},i},ue.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},ue.timers=[],ue.fx=G.prototype.init,ue.fx.tick=function(){var t,n=ue.timers,i=0;for(ti=ue.now();i<n.length;i++)t=n[i],t()||n[i]!==t||n.splice(i--,1);n.length||ue.fx.stop(),ti=e},ue.fx.timer=function(t){t()&&ue.timers.push(t)&&ue.fx.start()},ue.fx.interval=13,ue.fx.start=function(){ei||(ei=setInterval(ue.fx.tick,ue.fx.interval))},ue.fx.stop=function(){clearInterval(ei),ei=null},ue.fx.speeds={slow:600,fast:200,_default:400},ue.fx.step={},ue.expr&&ue.expr.filters&&(ue.expr.filters.animated=function(t){return ue.grep(ue.timers,function(e){return t===e.elem}).length}),ue.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){ue.offset.setOffset(this,t,e)});var n,i,r={top:0,left:0},a=this[0],o=a&&a.ownerDocument;if(o)return n=o.documentElement,ue.contains(n,a)?(typeof a.getBoundingClientRect!==X&&(r=a.getBoundingClientRect()),i=z(o),{top:r.top+(i.pageYOffset||n.scrollTop)-(n.clientTop||0),left:r.left+(i.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):r},ue.offset={setOffset:function(t,e,n){var i=ue.css(t,"position");"static"===i&&(t.style.position="relative");var r,a,o=ue(t),s=o.offset(),l=ue.css(t,"top"),u=ue.css(t,"left"),c=("absolute"===i||"fixed"===i)&&ue.inArray("auto",[l,u])>-1,d={},h={};c?(h=o.position(),r=h.top,a=h.left):(r=parseFloat(l)||0,a=parseFloat(u)||0),ue.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+r),null!=e.left&&(d.left=e.left-s.left+a),"using"in e?e.using.call(t,d):o.css(d)}},ue.fn.extend({position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===ue.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ue.nodeName(t[0],"html")||(n=t.offset()),n.top+=ue.css(t[0],"borderTopWidth",!0),n.left+=ue.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-ue.css(i,"marginTop",!0),left:e.left-n.left-ue.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Y.documentElement;t&&!ue.nodeName(t,"html")&&"static"===ue.css(t,"position");)t=t.offsetParent;return t||Y.documentElement})}}),ue.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var i=/Y/.test(n);ue.fn[t]=function(r){return ue.access(this,function(t,r,a){var o=z(t);return a===e?o?n in o?o[n]:o.document.documentElement[r]:t[r]:void(o?o.scrollTo(i?ue(o).scrollLeft():a,i?a:ue(o).scrollTop()):t[r]=a)},t,r,arguments.length,null)}}),ue.each({Height:"height",Width:"width"},function(t,n){ue.each({padding:"inner"+t,content:n,"":"outer"+t},function(i,r){ue.fn[r]=function(r,a){var o=arguments.length&&(i||"boolean"!=typeof r),s=i||(r===!0||a===!0?"margin":"border");return ue.access(this,function(n,i,r){var a;return ue.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(a=n.documentElement,Math.max(n.body["scroll"+t],a["scroll"+t],n.body["offset"+t],a["offset"+t],a["client"+t])):r===e?ue.css(n,i,s):ue.style(n,i,r,s)
},n,o?r:e,o,null)}})}),t.jQuery=t.$=ue,"function"==typeof n&&n.amd&&n.amd.jQuery&&n("jquery",[],function(){return ue})}(window),n("durandal/system",["require","jquery"],function(e,n){function i(t){var e="[object "+t+"]";r["is"+t]=function(t){return l.call(t)==e}}var r,a=!1,o=Object.keys,s=Object.prototype.hasOwnProperty,l=Object.prototype.toString,u=!1,c=Array.isArray,d=Array.prototype.slice;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(t){console[t]=this.call(console[t],console)},Function.prototype.bind)}catch(h){u=!0}e.on&&e.on("moduleLoaded",function(t,e){r.setModuleId(t,e)}),"undefined"!=typeof t&&(t.onResourceLoad=function(t,e){r.setModuleId(t.defined[e.id],e.id)});var p=function(){},f=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var t=0;t<arguments.length;)console.log("Item "+(t+1)+": "+arguments[t]),t++;else 1==d.call(arguments).length&&"string"==typeof d.call(arguments)[0]?console.log(d.call(arguments).toString()):console.log.apply(console,d.call(arguments));else Function.prototype.bind&&!u||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,d.call(arguments))}catch(e){}},m=function(t){if(t instanceof Error)throw t;throw new Error(t)};r={version:"2.0.1",noop:p,getModuleId:function(t){return t?"function"==typeof t?t.prototype.__moduleId__:"string"==typeof t?null:t.__moduleId__:null},setModuleId:function(t,e){return t?"function"==typeof t?void(t.prototype.__moduleId__=e):void("string"!=typeof t&&(t.__moduleId__=e)):void 0},resolveObject:function(t){return r.isFunction(t)?new t:t},debug:function(t){return 1==arguments.length&&(a=t,a?(this.log=f,this.error=m,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=p,this.error=p)),a},log:p,error:p,assert:function(t,e){t||r.error(new Error(e||"Assert:Failed"))},defer:function(t){return n.Deferred(t)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})},acquire:function(){var t,n=arguments[0],i=!1;return r.isArray(n)?(t=n,i=!0):t=d.call(arguments,0),this.defer(function(n){e(t,function(){var t=arguments;setTimeout(function(){n.resolve(t.length>1||i?d.call(t,0):t[0])},1)},function(t){n.reject(t)})}).promise()},extend:function(t){for(var e=d.call(arguments,1),n=0;n<e.length;n++){var i=e[n];if(i)for(var r in i)t[r]=i[r]}return t},wait:function(t){return r.defer(function(e){setTimeout(e.resolve,t)}).promise()}},r.keys=o||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)s.call(t,n)&&(e[e.length]=n);return e},r.isElement=function(t){return!(!t||1!==t.nodeType)},r.isArray=c||function(t){return"[object Array]"==l.call(t)},r.isObject=function(t){return t===Object(t)},r.isBoolean=function(t){return"boolean"==typeof t},r.isPromise=function(t){return t&&r.isFunction(t.then)};for(var g=["Arguments","Function","String","Number","Date","RegExp"],v=0;v<g.length;v++)i(g[v]);return r}),n("durandal/viewEngine",["durandal/system","jquery"],function(t,e){var n;return n=e.parseHTML?function(t){return e.parseHTML(t)}:function(t){return e(t).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(t){return-1!==t.indexOf(this.viewExtension,t.length-this.viewExtension.length)},convertViewUrlToViewId:function(t){return t.substring(0,t.length-this.viewExtension.length)},convertViewIdToRequirePath:function(t){return this.viewPlugin+"!"+t+this.viewExtension},parseMarkup:n,processMarkup:function(t){var e=this.parseMarkup(t);return this.ensureSingleElement(e)},ensureSingleElement:function(t){if(1==t.length)return t[0];for(var n=[],i=0;i<t.length;i++){var r=t[i];if(8!=r.nodeType){if(3==r.nodeType){var a=/\S/.test(r.nodeValue);if(!a)continue}n.push(r)}}return n.length>1?e(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},createView:function(e){var n=this,i=this.convertViewIdToRequirePath(e);return t.defer(function(r){t.acquire(i).then(function(t){var i=n.processMarkup(t);i.setAttribute("data-view",e),r.resolve(i)}).fail(function(t){n.createFallbackView(e,i,t).then(function(t){t.setAttribute("data-view",e),r.resolve(t)})})}).promise()},createFallbackView:function(e,n){var i=this,r='View Not Found. Searched for "'+e+'" via path "'+n+'".';return t.defer(function(t){t.resolve(i.processMarkup('<div class="durandal-view-404">'+r+"</div>"))}).promise()}}}),n("durandal/viewLocator",["durandal/system","durandal/viewEngine"],function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=i.getAttribute("data-view");if(r==e)return i}}function i(t){return(t+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(t,e,n){t=t||"viewmodels",e=e||"views",n=n||e;var r=new RegExp(i(t),"gi");this.convertModuleIdToViewId=function(t){return t.replace(r,e)},this.translateViewIdToArea=function(t,e){return e&&"partial"!=e?n+"/"+e+"/"+t:n+"/"+t}},locateViewForObject:function(e,n,i){var r;if(e.getView&&(r=e.getView()))return this.locateView(r,n,i);if(e.viewUrl)return this.locateView(e.viewUrl,n,i);var a=t.getModuleId(e);return a?this.locateView(this.convertModuleIdToViewId(a),n,i):this.locateView(this.determineFallbackViewId(e),n,i)},convertModuleIdToViewId:function(t){return t},determineFallbackViewId:function(t){var e=/function (.{1,})\(/,n=e.exec(t.constructor.toString()),i=n&&n.length>1?n[1]:"";return"views/"+i},translateViewIdToArea:function(t){return t},locateView:function(i,r,a){if("string"==typeof i){var o;if(o=e.isViewUrl(i)?e.convertViewUrlToViewId(i):i,r&&(o=this.translateViewIdToArea(o,r)),a){var s=n(a,o);if(s)return t.defer(function(t){t.resolve(s)}).promise()}return e.createView(o)}return t.defer(function(t){t.resolve(i)}).promise()}}}),function(){function t(t){return function(){return t}}!function(i){var r=this||(0,eval)("this"),a=r.document,o=r.navigator,s=r.jQuery,l=r.JSON;!function(t){"function"==typeof e&&"object"==typeof exports&&"object"==typeof module?t(module.exports||exports):"function"==typeof n&&n.amd?n("knockout",["exports"],t):t(r.ko={})}(function(e){function n(t,e,n,i){c.d[t]={init:function(t){return c.a.f.set(t,f,{}),{controlsDescendantBindings:!0}},update:function(t,r,a,o,s){a=c.a.f.get(t,f),r=c.a.c(r()),o=!n!=!r;var l=!a.fb;(l||e||o!==a.vb)&&(l&&(a.fb=c.a.Oa(c.e.childNodes(t),!0)),o?(l||c.e.P(t,c.a.Oa(a.fb)),c.Ja(i?i(s,r):s,t)):c.e.ba(t),a.vb=o)}},c.g.S[t]=!1,c.e.L[t]=!0}function u(t,e,n){n&&e!==c.h.n(t)&&c.h.W(t,e),e!==c.h.n(t)&&c.q.I(c.a.Ga,null,[t,"change"])}var c="undefined"!=typeof e?e:{};c.b=function(t,e){for(var n=t.split("."),i=c,r=0;r<n.length-1;r++)i=i[n[r]];i[n[n.length-1]]=e},c.r=function(t,e,n){t[e]=n},c.version="2.3.0",c.b("version",c.version),c.a=function(){function t(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function e(t,e){if("input"!==c.a.u(t)||!t.type||"click"!=e.toLowerCase())return!1;var n=t.type;return"checkbox"==n||"radio"==n}var n={},u={};n[o&&/Firefox\/2/i.test(o.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],n.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),t(n,function(t,e){if(e.length)for(var n=0,i=e.length;i>n;n++)u[e[n]]=t});var d={propertychange:!0},h=a&&function(){for(var t=3,e=a.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",n[0];);return t>4?t:i}();return{Ta:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],p:function(t,e){for(var n=0,i=t.length;i>n;n++)e(t[n])},k:function(t,e){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(t,e);for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},La:function(t,e,n){for(var i=0,r=t.length;r>i;i++)if(e.call(n,t[i]))return t[i];return null},ka:function(t,e){var n=c.a.k(t,e);n>=0&&t.splice(n,1)},Ma:function(t){t=t||[];for(var e=[],n=0,i=t.length;i>n;n++)0>c.a.k(e,t[n])&&e.push(t[n]);return e},Z:function(t,e){t=t||[];for(var n=[],i=0,r=t.length;r>i;i++)n.push(e(t[i]));return n},Y:function(t,e){t=t||[];for(var n=[],i=0,r=t.length;r>i;i++)e(t[i])&&n.push(t[i]);return n},R:function(t,e){if(e instanceof Array)t.push.apply(t,e);else for(var n=0,i=e.length;i>n;n++)t.push(e[n]);return t},ja:function(t,e,n){var i=t.indexOf?t.indexOf(e):c.a.k(t,e);0>i?n&&t.push(e):n||t.splice(i,1)},extend:function(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},w:t,oa:function(t){for(;t.firstChild;)c.removeNode(t.firstChild)},Mb:function(t){t=c.a.N(t);for(var e=a.createElement("div"),n=0,i=t.length;i>n;n++)e.appendChild(c.H(t[n]));return e},Oa:function(t,e){for(var n=0,i=t.length,r=[];i>n;n++){var a=t[n].cloneNode(!0);r.push(e?c.H(a):a)}return r},P:function(t,e){if(c.a.oa(t),e)for(var n=0,i=e.length;i>n;n++)t.appendChild(e[n])},eb:function(t,e){var n=t.nodeType?[t]:t;if(0<n.length){for(var i=n[0],r=i.parentNode,a=0,o=e.length;o>a;a++)r.insertBefore(e[a],i);for(a=0,o=n.length;o>a;a++)c.removeNode(n[a])}},hb:function(t,e){7>h?t.setAttribute("selected",e):t.selected=e},F:function(t){return null===t||t===i?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Wb:function(t,e){for(var n=[],i=(t||"").split(e),r=0,a=i.length;a>r;r++){var o=c.a.F(i[r]);""!==o&&n.push(o)}return n},Tb:function(t,e){return t=t||"",e.length>t.length?!1:t.substring(0,e.length)===e},yb:function(t,e){if(e.compareDocumentPosition)return 16==(16&e.compareDocumentPosition(t));for(;null!=t;){if(t==e)return!0;t=t.parentNode}return!1},aa:function(t){return c.a.yb(t,t.ownerDocument)},pb:function(t){return!!c.a.La(t,c.a.aa)},u:function(t){return t&&t.tagName&&t.tagName.toLowerCase()},o:function(t,n,i){var r=h&&d[n];if(r||"undefined"==typeof s)if(r||"function"!=typeof t.addEventListener){if("undefined"==typeof t.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var a=function(e){i.call(t,e)},o="on"+n;t.attachEvent(o,a),c.a.C.ia(t,function(){t.detachEvent(o,a)})}else t.addEventListener(n,i,!1);else{if(e(t,n)){var l=i;i=function(t,e){var n=this.checked;e&&(this.checked=!0!==e.sb),l.call(this,t),this.checked=n}}s(t).bind(n,i)}},Ga:function(t,n){if(!t||!t.nodeType)throw Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof s){var i=[];e(t,n)&&i.push({sb:t.checked}),s(t).trigger(n,i)}else if("function"==typeof a.createEvent){if("function"!=typeof t.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");i=a.createEvent(u[n]||"HTMLEvents"),i.initEvent(n,!0,!0,r,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(i)}else{if("undefined"==typeof t.fireEvent)throw Error("Browser doesn't support triggering events");e(t,n)&&(t.checked=!0!==t.checked),t.fireEvent("on"+n)}},c:function(t){return c.T(t)?t():t},ya:function(t){return c.T(t)?t.t():t},ga:function(t,e,n){if(e){var i=/\S+/g,r=t.className.match(i)||[];c.a.p(e.match(i),function(t){c.a.ja(r,t,n)}),t.className=r.join(" ")}},ib:function(t,e){var n=c.a.c(e);(null===n||n===i)&&(n="");var r=c.e.firstChild(t);!r||3!=r.nodeType||c.e.nextSibling(r)?c.e.P(t,[a.createTextNode(n)]):r.data=n,c.a.Bb(t)},gb:function(t,e){if(t.name=e,7>=h)try{t.mergeAttributes(a.createElement("<input name='"+t.name+"'/>"),!1)}catch(n){}},Bb:function(t){h>=9&&(t=1==t.nodeType?t:t.parentNode,t.style&&(t.style.zoom=t.style.zoom))},zb:function(t){if(h){var e=t.style.width;t.style.width=0,t.style.width=e}},Qb:function(t,e){t=c.a.c(t),e=c.a.c(e);for(var n=[],i=t;e>=i;i++)n.push(i);return n},N:function(t){for(var e=[],n=0,i=t.length;i>n;n++)e.push(t[n]);return e},Ub:6===h,Vb:7===h,ca:h,Ua:function(t,e){for(var n=c.a.N(t.getElementsByTagName("input")).concat(c.a.N(t.getElementsByTagName("textarea"))),i="string"==typeof e?function(t){return t.name===e}:function(t){return e.test(t.name)},r=[],a=n.length-1;a>=0;a--)i(n[a])&&r.push(n[a]);return r},Nb:function(t){return"string"==typeof t&&(t=c.a.F(t))?l&&l.parse?l.parse(t):new Function("return "+t)():null},Ca:function(t,e,n){if(!l||!l.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return l.stringify(c.a.c(t),e,n)},Ob:function(e,n,i){i=i||{};var r=i.params||{},o=i.includeFields||this.Ta,s=e;if("object"==typeof e&&"form"===c.a.u(e))for(var s=e.action,l=o.length-1;l>=0;l--)for(var u=c.a.Ua(e,o[l]),d=u.length-1;d>=0;d--)r[u[d].name]=u[d].value;n=c.a.c(n);var h=a.createElement("form");h.style.display="none",h.action=s,h.method="post";for(var p in n)e=a.createElement("input"),e.name=p,e.value=c.a.Ca(c.a.c(n[p])),h.appendChild(e);t(r,function(t,e){var n=a.createElement("input");n.name=t,n.value=e,h.appendChild(n)}),a.body.appendChild(h),i.submitter?i.submitter(h):h.submit(),setTimeout(function(){h.parentNode.removeChild(h)},0)}}}(),c.b("utils",c.a),c.b("utils.arrayForEach",c.a.p),c.b("utils.arrayFirst",c.a.La),c.b("utils.arrayFilter",c.a.Y),c.b("utils.arrayGetDistinctValues",c.a.Ma),c.b("utils.arrayIndexOf",c.a.k),c.b("utils.arrayMap",c.a.Z),c.b("utils.arrayPushAll",c.a.R),c.b("utils.arrayRemoveItem",c.a.ka),c.b("utils.extend",c.a.extend),c.b("utils.fieldsIncludedWithJsonPost",c.a.Ta),c.b("utils.getFormFields",c.a.Ua),c.b("utils.peekObservable",c.a.ya),c.b("utils.postJson",c.a.Ob),c.b("utils.parseJson",c.a.Nb),c.b("utils.registerEventHandler",c.a.o),c.b("utils.stringifyJson",c.a.Ca),c.b("utils.range",c.a.Qb),c.b("utils.toggleDomNodeCssClass",c.a.ga),c.b("utils.triggerEvent",c.a.Ga),c.b("utils.unwrapObservable",c.a.c),c.b("utils.objectForEach",c.a.w),c.b("utils.addOrRemoveItem",c.a.ja),c.b("unwrap",c.a.c),Function.prototype.bind||(Function.prototype.bind=function(t){var e=this,n=Array.prototype.slice.call(arguments);return t=n.shift(),function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}}),c.a.f=new function(){var t=0,e="__ko__"+(new Date).getTime(),n={};return{get:function(t,e){var n=c.a.f.pa(t,!1);return n===i?i:n[e]},set:function(t,e,n){(n!==i||c.a.f.pa(t,!1)!==i)&&(c.a.f.pa(t,!0)[e]=n)},pa:function(r,a){var o=r[e];if(!o||"null"===o||!n[o]){if(!a)return i;o=r[e]="ko"+t++,n[o]={}}return n[o]},clear:function(t){var i=t[e];return i?(delete n[i],t[e]=null,!0):!1}}},c.b("utils.domData",c.a.f),c.b("utils.domData.clear",c.a.f.clear),c.a.C=new function(){function t(t,e){var r=c.a.f.get(t,n);return r===i&&e&&(r=[],c.a.f.set(t,n,r)),r}function e(n){var i=t(n,!1);if(i)for(var i=i.slice(0),r=0;r<i.length;r++)i[r](n);if(c.a.f.clear(n),"function"==typeof s&&"function"==typeof s.cleanData&&s.cleanData([n]),a[n.nodeType])for(i=n.firstChild;n=i;)i=n.nextSibling,8===n.nodeType&&e(n)}var n="__ko_domNodeDisposal__"+(new Date).getTime(),r={1:!0,8:!0,9:!0},a={1:!0,9:!0};return{ia:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},cb:function(e,r){var a=t(e,!1);a&&(c.a.ka(a,r),0==a.length&&c.a.f.set(e,n,i))},H:function(t){if(r[t.nodeType]&&(e(t),a[t.nodeType])){var n=[];c.a.R(n,t.getElementsByTagName("*"));for(var i=0,o=n.length;o>i;i++)e(n[i])}return t},removeNode:function(t){c.H(t),t.parentNode&&t.parentNode.removeChild(t)}}},c.H=c.a.C.H,c.removeNode=c.a.C.removeNode,c.b("cleanNode",c.H),c.b("removeNode",c.removeNode),c.b("utils.domNodeDisposal",c.a.C),c.b("utils.domNodeDisposal.addDisposeCallback",c.a.C.ia),c.b("utils.domNodeDisposal.removeDisposeCallback",c.a.C.cb),function(){c.a.xa=function(t){var e;if("undefined"!=typeof s){if(s.parseHTML)e=s.parseHTML(t)||[];else if((e=s.clean([t]))&&e[0]){for(t=e[0];t.parentNode&&11!==t.parentNode.nodeType;)t=t.parentNode;t.parentNode&&t.parentNode.removeChild(t)}}else{var n=c.a.F(t).toLowerCase();for(e=a.createElement("div"),n=n.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!n.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!n.indexOf("<td")||!n.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],t="ignored<div>"+n[1]+t+n[2]+"</div>","function"==typeof r.innerShiv?e.appendChild(r.innerShiv(t)):e.innerHTML=t;n[0]--;)e=e.lastChild;e=c.a.N(e.lastChild.childNodes)}return e},c.a.fa=function(t,e){if(c.a.oa(t),e=c.a.c(e),null!==e&&e!==i)if("string"!=typeof e&&(e=e.toString()),"undefined"!=typeof s)s(t).html(e);else for(var n=c.a.xa(e),r=0;r<n.length;r++)t.appendChild(n[r])}}(),c.b("utils.parseHtmlFragment",c.a.xa),c.b("utils.setHtml",c.a.fa),c.s=function(){function t(e,n){if(e)if(8==e.nodeType){var i=c.s.$a(e.nodeValue);null!=i&&n.push({xb:e,Kb:i})}else if(1==e.nodeType)for(var i=0,r=e.childNodes,a=r.length;a>i;i++)t(r[i],n)}var e={};return{va:function(t){if("function"!=typeof t)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return e[n]=t,"<!--[ko_memo:"+n+"]-->"},mb:function(t,n){var r=e[t];if(r===i)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return r.apply(null,n||[]),!0}finally{delete e[t]}},nb:function(e,n){var i=[];t(e,i);for(var r=0,a=i.length;a>r;r++){var o=i[r].xb,s=[o];n&&c.a.R(s,n),c.s.mb(i[r].Kb,s),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},$a:function(t){return(t=t.match(/^\[ko_memo\:(.*?)\]$/))?t[1]:null}}}(),c.b("memoization",c.s),c.b("memoization.memoize",c.s.va),c.b("memoization.unmemoize",c.s.mb),c.b("memoization.parseMemoText",c.s.$a),c.b("memoization.unmemoizeDomNodeAndDescendants",c.s.nb),c.Sa={throttle:function(t,e){t.throttleEvaluation=e;var n=null;return c.j({read:t,write:function(i){clearTimeout(n),n=setTimeout(function(){t(i)},e)}})},notify:function(e,n){return e.equalityComparer="always"==n?t(!1):c.m.fn.equalityComparer,e}},c.b("extenders",c.Sa),c.kb=function(t,e,n){this.target=t,this.la=e,this.wb=n,c.r(this,"dispose",this.B)},c.kb.prototype.B=function(){this.Hb=!0,this.wb()},c.V=function(){this.G={},c.a.extend(this,c.V.fn),c.r(this,"subscribe",this.Da),c.r(this,"extend",this.extend),c.r(this,"getSubscriptionsCount",this.Db)},c.V.fn={Da:function(t,e,n){n=n||"change";var i=new c.kb(this,e?t.bind(e):t,function(){c.a.ka(this.G[n],i)}.bind(this));return this.G[n]||(this.G[n]=[]),this.G[n].push(i),i},notifySubscribers:function(t,e){e=e||"change",this.G[e]&&c.q.I(function(){c.a.p(this.G[e].slice(0),function(e){e&&!0!==e.Hb&&e.la(t)})},this)},Db:function(){var t=0;return c.a.w(this.G,function(e,n){t+=n.length}),t},extend:function(t){var e=this;return t&&c.a.w(t,function(t,n){var i=c.Sa[t];"function"==typeof i&&(e=i(e,n))}),e}},c.Wa=function(t){return null!=t&&"function"==typeof t.Da&&"function"==typeof t.notifySubscribers},c.b("subscribable",c.V),c.b("isSubscribable",c.Wa),c.q=function(){var t=[];return{rb:function(e){t.push({la:e,Ra:[]})},end:function(){t.pop()},bb:function(e){if(!c.Wa(e))throw Error("Only subscribable things can act as dependencies");if(0<t.length){var n=t[t.length-1];!n||0<=c.a.k(n.Ra,e)||(n.Ra.push(e),n.la(e))}},I:function(e,n,i){try{return t.push(null),e.apply(n,i||[])}finally{t.pop()}}}}();var d={undefined:!0,"boolean":!0,number:!0,string:!0};c.m=function(t){function e(){return 0<arguments.length?(e.equalityComparer&&e.equalityComparer(n,arguments[0])||(e.K(),n=arguments[0],e.J()),this):(c.q.bb(e),n)}var n=t;return c.V.call(e),e.t=function(){return n},e.J=function(){e.notifySubscribers(n)},e.K=function(){e.notifySubscribers(n,"beforeChange")},c.a.extend(e,c.m.fn),c.r(e,"peek",e.t),c.r(e,"valueHasMutated",e.J),c.r(e,"valueWillMutate",e.K),e},c.m.fn={equalityComparer:function(t,e){return null===t||typeof t in d?t===e:!1}};var h=c.m.Pb="__ko_proto__";c.m.fn[h]=c.m,c.qa=function(t,e){return null===t||t===i||t[h]===i?!1:t[h]===e?!0:c.qa(t[h],e)},c.T=function(t){return c.qa(t,c.m)},c.Xa=function(t){return"function"==typeof t&&t[h]===c.m||"function"==typeof t&&t[h]===c.j&&t.Eb?!0:!1},c.b("observable",c.m),c.b("isObservable",c.T),c.b("isWriteableObservable",c.Xa),c.U=function(t){if(t=t||[],"object"!=typeof t||!("length"in t))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return t=c.m(t),c.a.extend(t,c.U.fn),t},c.U.fn={remove:function(t){for(var e=this.t(),n=[],i="function"==typeof t?t:function(e){return e===t},r=0;r<e.length;r++){var a=e[r];i(a)&&(0===n.length&&this.K(),n.push(a),e.splice(r,1),r--)}return n.length&&this.J(),n},removeAll:function(t){if(t===i){var e=this.t(),n=e.slice(0);return this.K(),e.splice(0,e.length),this.J(),n}return t?this.remove(function(e){return 0<=c.a.k(t,e)}):[]},destroy:function(t){var e=this.t(),n="function"==typeof t?t:function(e){return e===t};this.K();for(var i=e.length-1;i>=0;i--)n(e[i])&&(e[i]._destroy=!0);this.J()},destroyAll:function(e){return e===i?this.destroy(t(!0)):e?this.destroy(function(t){return 0<=c.a.k(e,t)}):[]},indexOf:function(t){var e=this();return c.a.k(e,t)},replace:function(t,e){var n=this.indexOf(t);n>=0&&(this.K(),this.t()[n]=e,this.J())}},c.a.p("pop push reverse shift sort splice unshift".split(" "),function(t){c.U.fn[t]=function(){var e=this.t();return this.K(),e=e[t].apply(e,arguments),this.J(),e}}),c.a.p(["slice"],function(t){c.U.fn[t]=function(){var e=this();return e[t].apply(e,arguments)}}),c.b("observableArray",c.U),c.j=function(e,n,r){function a(){c.a.p(b,function(t){t.B()}),b=[]}function o(){var t=l.throttleEvaluation;t&&t>=0?(clearTimeout(x),x=setTimeout(s,t)):s()}function s(){if(!p)if(h&&v())y();else{p=!0;try{var t=c.a.Z(b,function(t){return t.target});c.q.rb(function(e){var n;0<=(n=c.a.k(t,e))?t[n]=i:b.push(e.Da(o))});for(var e=f.call(n),r=t.length-1;r>=0;r--)t[r]&&b.splice(r,1)[0].B();h=!0,l.notifySubscribers(d,"beforeChange"),d=e,l.notifySubscribers(d)}finally{c.q.end(),p=!1}b.length||y()}}function l(){if(0<arguments.length){if("function"!=typeof m)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return m.apply(n,arguments),this}return h||s(),c.q.bb(l),d}function u(){return!h||0<b.length}var d,h=!1,p=!1,f=e;if(f&&"object"==typeof f?(r=f,f=r.read):(r=r||{},f||(f=r.read)),"function"!=typeof f)throw Error("Pass a function that returns the value of the ko.computed");var m=r.write,g=r.disposeWhenNodeIsRemoved||r.$||null,v=r.disposeWhen||r.Qa||t(!1),y=a,b=[],x=null;if(n||(n=r.owner),l.t=function(){return h||s(),d},l.Cb=function(){return b.length},l.Eb="function"==typeof r.write,l.B=function(){y()},l.ta=u,c.V.call(l),c.a.extend(l,c.j.fn),c.r(l,"peek",l.t),c.r(l,"dispose",l.B),c.r(l,"isActive",l.ta),c.r(l,"getDependenciesCount",l.Cb),!0!==r.deferEvaluation&&s(),g&&u()){y=function(){c.a.C.cb(g,y),a()},c.a.C.ia(g,y);var w=v,v=function(){return!c.a.aa(g)||w()}}return l},c.Gb=function(t){return c.qa(t,c.j)},e=c.m.Pb,c.j[e]=c.m,c.j.fn={},c.j.fn[e]=c.j,c.b("dependentObservable",c.j),c.b("computed",c.j),c.b("isComputed",c.Gb),function(){function t(r,a,o){if(o=o||new n,r=a(r),"object"!=typeof r||null===r||r===i||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var s=r instanceof Array?[]:{};return o.save(r,s),e(r,function(e){var n=a(r[e]);switch(typeof n){case"boolean":case"number":case"string":case"function":s[e]=n;break;case"object":case"undefined":var l=o.get(n);s[e]=l!==i?l:t(n,a,o)}}),s}function e(t,e){if(t instanceof Array){for(var n=0;n<t.length;n++)e(n);"function"==typeof t.toJSON&&e("toJSON")}else for(n in t)e(n)}function n(){this.keys=[],this.Ha=[]}c.lb=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(t){for(var e=0;c.T(t)&&10>e;e++)t=t();return t})},c.toJSON=function(t,e,n){return t=c.lb(t),c.a.Ca(t,e,n)},n.prototype={save:function(t,e){var n=c.a.k(this.keys,t);n>=0?this.Ha[n]=e:(this.keys.push(t),this.Ha.push(e))},get:function(t){return t=c.a.k(this.keys,t),t>=0?this.Ha[t]:i}}}(),c.b("toJS",c.lb),c.b("toJSON",c.toJSON),function(){c.h={n:function(t){switch(c.a.u(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?c.a.f.get(t,c.d.options.wa):7>=c.a.ca?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?c.h.n(t.options[t.selectedIndex]):i;default:return t.value}},W:function(t,e){switch(c.a.u(t)){case"option":switch(typeof e){case"string":c.a.f.set(t,c.d.options.wa,i),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=e;break;default:c.a.f.set(t,c.d.options.wa,e),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof e?e:""}break;case"select":""===e&&(e=i),(null===e||e===i)&&(t.selectedIndex=-1);for(var n=t.options.length-1;n>=0;n--)if(c.h.n(t.options[n])==e){t.selectedIndex=n;break}1<t.size||-1!==t.selectedIndex||(t.selectedIndex=0);break;default:(null===e||e===i)&&(e=""),t.value=e}}}}(),c.b("selectExtensions",c.h),c.b("selectExtensions.readValue",c.h.n),c.b("selectExtensions.writeValue",c.h.W),c.g=function(){function t(t,n){for(var i=null;t!=i;)i=t,t=t.replace(e,function(t,e){return n[e]});return t}var e=/\@ko_token_(\d+)\@/g,n=["true","false","null","undefined"],i=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;return{S:[],da:function(e){var n=c.a.F(e);if(3>n.length)return[];"{"===n.charAt(0)&&(n=n.substring(1,n.length-1)),e=[];for(var i,r=null,a=0;a<n.length;a++){var o=n.charAt(a);if(null===r)switch(o){case'"':case"'":case"/":r=a,i=o}else if(o==i&&"\\"!==n.charAt(a-1)){o=n.substring(r,a+1),e.push(o);var s="@ko_token_"+(e.length-1)+"@",n=n.substring(0,r)+s+n.substring(a+1),a=a-(o.length-s.length),r=null}}i=r=null;for(var l=0,u=null,a=0;a<n.length;a++){if(o=n.charAt(a),null===r)switch(o){case"{":r=a,u=o,i="}";break;case"(":r=a,u=o,i=")";break;case"[":r=a,u=o,i="]"}o===u?l++:o===i&&(l--,0===l&&(o=n.substring(r,a+1),e.push(o),s="@ko_token_"+(e.length-1)+"@",n=n.substring(0,r)+s+n.substring(a+1),a-=o.length-s.length,r=null))}for(i=[],n=n.split(","),r=0,a=n.length;a>r;r++)l=n[r],u=l.indexOf(":"),u>0&&u<l.length-1?(o=l.substring(u+1),i.push({key:t(l.substring(0,u),e),value:t(o,e)})):i.push({unknown:t(l,e)});return i},ea:function(t){var e="string"==typeof t?c.g.da(t):t,r=[];t=[];for(var a,o=0;a=e[o];o++)if(0<r.length&&r.push(","),a.key){var s;t:{s=a.key;var l=c.a.F(s);switch(l.length&&l.charAt(0)){case"'":case'"':break t;default:s="'"+l+"'"}}a=a.value,r.push(s),r.push(":"),r.push(a),a=c.a.F(a),0<=c.a.k(n,c.a.F(a).toLowerCase())?a=!1:(l=a.match(i),a=null===l?!1:l[1]?"Object("+l[1]+")"+l[2]:a),a&&(0<t.length&&t.push(", "),t.push(s+" : function(__ko_value) { "+a+" = __ko_value; }"))}else a.unknown&&r.push(a.unknown);return e=r.join(""),0<t.length&&(e=e+", '_ko_property_writers' : { "+t.join("")+" } "),e},Jb:function(t,e){for(var n=0;n<t.length;n++)if(c.a.F(t[n].key)==e)return!0;return!1},ha:function(t,e,n,i,r){t&&c.T(t)?!c.Xa(t)||r&&t.t()===i||t(i):(t=e()._ko_property_writers)&&t[n]&&t[n](i)}}}(),c.b("expressionRewriting",c.g),c.b("expressionRewriting.bindingRewriteValidators",c.g.S),c.b("expressionRewriting.parseObjectLiteral",c.g.da),c.b("expressionRewriting.preProcessBindings",c.g.ea),c.b("jsonExpressionRewriting",c.g),c.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",c.g.ea),function(){function t(t){return 8==t.nodeType&&(r?t.text:t.nodeValue).match(o)}function e(t){return 8==t.nodeType&&(r?t.text:t.nodeValue).match(s)}function n(n,i){for(var r=n,a=1,o=[];r=r.nextSibling;){if(e(r)&&(a--,0===a))return o;o.push(r),t(r)&&a++}if(!i)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(t,e){var i=n(t,e);return i?0<i.length?i[i.length-1].nextSibling:t.nextSibling:null}var r=a&&"<!--test-->"===a.createComment("test").text,o=r?/^\x3c!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*--\x3e$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,s=r?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};c.e={L:{},childNodes:function(e){return t(e)?n(e):e.childNodes},ba:function(e){if(t(e)){e=c.e.childNodes(e);for(var n=0,i=e.length;i>n;n++)c.removeNode(e[n])}else c.a.oa(e)},P:function(e,n){if(t(e)){c.e.ba(e);for(var i=e.nextSibling,r=0,a=n.length;a>r;r++)i.parentNode.insertBefore(n[r],i)}else c.a.P(e,n)},ab:function(e,n){t(e)?e.parentNode.insertBefore(n,e.nextSibling):e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)},Va:function(e,n,i){i?t(e)?e.parentNode.insertBefore(n,i.nextSibling):i.nextSibling?e.insertBefore(n,i.nextSibling):e.appendChild(n):c.e.ab(e,n)},firstChild:function(n){return t(n)?!n.nextSibling||e(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return t(n)&&(n=i(n)),n.nextSibling&&e(n.nextSibling)?null:n.nextSibling},ob:function(e){return(e=t(e))?e[1]:null},Za:function(n){if(l[c.a.u(n)]){var r=n.firstChild;if(r)do if(1===r.nodeType){var a;a=r.firstChild;var o=null;if(a)do if(o)o.push(a);else if(t(a)){var s=i(a,!0);s?a=s:o=[a]}else e(a)&&(o=[a]);while(a=a.nextSibling);if(a=o)for(o=r.nextSibling,s=0;s<a.length;s++)o?n.insertBefore(a[s],o):n.appendChild(a[s])}while(r=r.nextSibling)}}}}(),c.b("virtualElements",c.e),c.b("virtualElements.allowedBindings",c.e.L),c.b("virtualElements.emptyNode",c.e.ba),c.b("virtualElements.insertAfter",c.e.Va),c.b("virtualElements.prepend",c.e.ab),c.b("virtualElements.setDomNodeChildren",c.e.P),function(){c.M=function(){this.Na={}},c.a.extend(c.M.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return null!=t.getAttribute("data-bind");case 8:return null!=c.e.ob(t);default:return!1}},getBindings:function(t,e){var n=this.getBindingsString(t,e);return n?this.parseBindingsString(n,e,t):null},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute("data-bind");case 8:return c.e.ob(t);default:return null}},parseBindingsString:function(t,e,n){try{var i;if(!(i=this.Na[t])){var r,a=this.Na,o="with($context){with($data||{}){return{"+c.g.ea(t)+"}}}";r=new Function("$context","$element",o),i=a[t]=r}return i(e,n)}catch(s){throw s.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+s.message,s}}}),c.M.instance=new c.M}(),c.b("bindingProvider",c.M),function(){function t(t,n,i){for(var r=c.e.firstChild(n);n=r;)r=c.e.nextSibling(n),e(t,n,i)}function e(e,i,r){var a=!0,o=1===i.nodeType;o&&c.e.Za(i),(o&&r||c.M.instance.nodeHasBindings(i))&&(a=n(i,null,e,r).Sb),a&&t(e,i,!o)}function n(t,e,n,r){function o(t){return function(){return l[t]}}function s(){return l}var l,u,d=0,h=c.a.f.get(t,a);if(!e){if(h)throw Error("You cannot apply bindings multiple times to the same element.");c.a.f.set(t,a,!0)}return c.j(function(){var a=n&&n instanceof c.A?n:new c.A(c.a.c(n)),p=a.$data;!h&&r&&c.jb(t,a),(l=("function"==typeof e?e(a,t):e)||c.M.instance.getBindings(t,a))&&(0===d&&(d=1,c.a.w(l,function(e){var n=c.d[e];if(n&&8===t.nodeType&&!c.e.L[e])throw Error("The binding '"+e+"' cannot be used with virtual elements");if(n&&"function"==typeof n.init&&(n=n.init(t,o(e),s,p,a))&&n.controlsDescendantBindings){if(u!==i)throw Error("Multiple bindings ("+u+" and "+e+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");u=e}}),d=2),2===d&&c.a.w(l,function(e){var n=c.d[e];n&&"function"==typeof n.update&&n.update(t,o(e),s,p,a)}))},null,{$:t}),{Sb:u===i}}c.d={},c.A=function(t,e,n){e?(c.a.extend(this,e),this.$parentContext=e,this.$parent=e.$data,this.$parents=(e.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=t,this.ko=c),this.$data=t,n&&(this[n]=t)},c.A.prototype.createChildContext=function(t,e){return new c.A(t,this,e)},c.A.prototype.extend=function(t){var e=c.a.extend(new c.A,this);return c.a.extend(e,t)};var a="__ko_boundElement";c.jb=function(t,e){return 2!=arguments.length?c.a.f.get(t,"__ko_bindingContext__"):void c.a.f.set(t,"__ko_bindingContext__",e)},c.Ka=function(t,e,i){return 1===t.nodeType&&c.e.Za(t),n(t,e,i,!0)},c.Ja=function(e,n){1!==n.nodeType&&8!==n.nodeType||t(e,n,!0)
},c.Ia=function(t,n){if(n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||r.document.body,e(t,n,!0)},c.na=function(t){switch(t.nodeType){case 1:case 8:var e=c.jb(t);if(e)return e;if(t.parentNode)return c.na(t.parentNode)}return i},c.ub=function(t){return(t=c.na(t))?t.$data:i},c.b("bindingHandlers",c.d),c.b("applyBindings",c.Ia),c.b("applyBindingsToDescendants",c.Ja),c.b("applyBindingsToNode",c.Ka),c.b("contextFor",c.na),c.b("dataFor",c.ub)}();var p={"class":"className","for":"htmlFor"};c.d.attr={update:function(t,e){var n=c.a.c(e())||{};c.a.w(n,function(e,n){n=c.a.c(n);var r=!1===n||null===n||n===i;r&&t.removeAttribute(e),8>=c.a.ca&&e in p?(e=p[e],r?t.removeAttribute(e):t[e]=n):r||t.setAttribute(e,n.toString()),"name"===e&&c.a.gb(t,r?"":n.toString())})}},c.d.checked={init:function(e,n,i){c.a.o(e,"click",function(){var t;if("checkbox"==e.type)t=e.checked;else{if("radio"!=e.type||!e.checked)return;t=e.value}var r=n(),a=c.a.c(r);"checkbox"==e.type&&a instanceof Array?c.a.ja(r,e.value,e.checked):c.g.ha(r,i,"checked",t,!0)}),"radio"!=e.type||e.name||c.d.uniqueName.init(e,t(!0))},update:function(t,e){var n=c.a.c(e());"checkbox"==t.type?t.checked=n instanceof Array?0<=c.a.k(n,t.value):n:"radio"==t.type&&(t.checked=t.value==n)}},c.d.css={update:function(t,e){var n=c.a.c(e());"object"==typeof n?c.a.w(n,function(e,n){n=c.a.c(n),c.a.ga(t,e,n)}):(n=String(n||""),c.a.ga(t,t.__ko__cssValue,!1),t.__ko__cssValue=n,c.a.ga(t,n,!0))}},c.d.enable={update:function(t,e){var n=c.a.c(e());n&&t.disabled?t.removeAttribute("disabled"):n||t.disabled||(t.disabled=!0)}},c.d.disable={update:function(t,e){c.d.enable.update(t,function(){return!c.a.c(e())})}},c.d.event={init:function(t,e,n,i){var r=e()||{};c.a.w(r,function(r){"string"==typeof r&&c.a.o(t,r,function(t){var a,o=e()[r];if(o){var s=n();try{var l=c.a.N(arguments);l.unshift(i),a=o.apply(i,l)}finally{!0!==a&&(t.preventDefault?t.preventDefault():t.returnValue=!1)}!1===s[r+"Bubble"]&&(t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation())}})})}},c.d.foreach={Ya:function(t){return function(){var e=t(),n=c.a.ya(e);return n&&"number"!=typeof n.length?(c.a.c(e),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:c.D.sa}):{foreach:e,templateEngine:c.D.sa}}},init:function(t,e){return c.d.template.init(t,c.d.foreach.Ya(e))},update:function(t,e,n,i,r){return c.d.template.update(t,c.d.foreach.Ya(e),n,i,r)}},c.g.S.foreach=!1,c.e.L.foreach=!0,c.d.hasfocus={init:function(t,e,n){function i(i){t.__ko_hasfocusUpdating=!0;var r=t.ownerDocument;if("activeElement"in r){var a;try{a=r.activeElement}catch(o){a=r.body}i=a===t}r=e(),c.g.ha(r,n,"hasfocus",i,!0),t.__ko_hasfocusLastValue=i,t.__ko_hasfocusUpdating=!1}var r=i.bind(null,!0),a=i.bind(null,!1);c.a.o(t,"focus",r),c.a.o(t,"focusin",r),c.a.o(t,"blur",a),c.a.o(t,"focusout",a)},update:function(t,e){var n=!!c.a.c(e());t.__ko_hasfocusUpdating||t.__ko_hasfocusLastValue===n||(n?t.focus():t.blur(),c.q.I(c.a.Ga,null,[t,n?"focusin":"focusout"]))}},c.d.hasFocus=c.d.hasfocus,c.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e){c.a.fa(t,e())}};var f="__ko_withIfBindingData";n("if"),n("ifnot",!1,!0),n("with",!0,!1,function(t,e){return t.createChildContext(e)}),c.d.options={init:function(t){if("select"!==c.a.u(t))throw Error("options binding applies only to SELECT elements");for(;0<t.length;)t.remove(0);return{controlsDescendantBindings:!0}},update:function(t,e,n){function r(t,e,n){var i=typeof e;return"function"==i?e(t):"string"==i?t[e]:n}function o(t,e){if(h){var n=0<=c.a.k(h,c.h.n(e[0]));c.a.hb(e[0],n)}}var s=0==t.length,l=!s&&t.multiple?t.scrollTop:null;e=c.a.c(e());var d,h,p=n(),f=p.optionsIncludeDestroyed,m={};if(t.multiple?h=c.a.Z(t.selectedOptions||c.a.Y(t.childNodes,function(t){return t.tagName&&"option"===c.a.u(t)&&t.selected}),function(t){return c.h.n(t)}):0<=t.selectedIndex&&(h=[c.h.n(t.options[t.selectedIndex])]),e){"undefined"==typeof e.length&&(e=[e]);var g=c.a.Y(e,function(t){return f||t===i||null===t||!c.a.c(t._destroy)});"optionsCaption"in p&&(d=c.a.c(p.optionsCaption),null!==d&&d!==i&&g.unshift(m))}else e=[];n=o,p.optionsAfterRender&&(n=function(t,e){o(0,e),c.q.I(p.optionsAfterRender,null,[e[0],t!==m?t:i])}),c.a.Aa(t,g,function(t,e,n){return n.length&&(h=n[0].selected&&[c.h.n(n[0])]),e=a.createElement("option"),t===m?(c.a.fa(e,d),c.h.W(e,i)):(n=r(t,p.optionsValue,t),c.h.W(e,c.a.c(n)),t=r(t,p.optionsText,n),c.a.ib(e,t)),[e]},null,n),h=null,s&&"value"in p&&u(t,c.a.ya(p.value),!0),c.a.zb(t),l&&20<Math.abs(l-t.scrollTop)&&(t.scrollTop=l)}},c.d.options.wa="__ko.optionValueDomData__",c.d.selectedOptions={init:function(t,e,n){c.a.o(t,"change",function(){var i=e(),r=[];c.a.p(t.getElementsByTagName("option"),function(t){t.selected&&r.push(c.h.n(t))}),c.g.ha(i,n,"selectedOptions",r)})},update:function(t,e){if("select"!=c.a.u(t))throw Error("values binding applies only to SELECT elements");var n=c.a.c(e());n&&"number"==typeof n.length&&c.a.p(t.getElementsByTagName("option"),function(t){var e=0<=c.a.k(n,c.h.n(t));c.a.hb(t,e)})}},c.d.style={update:function(t,e){var n=c.a.c(e()||{});c.a.w(n,function(e,n){n=c.a.c(n),t.style[e]=n||""})}},c.d.submit={init:function(t,e,n,i){if("function"!=typeof e())throw Error("The value for a submit binding must be a function");c.a.o(t,"submit",function(n){var r,a=e();try{r=a.call(i,t)}finally{!0!==r&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},c.d.text={update:function(t,e){c.a.ib(t,e())}},c.e.L.text=!0,c.d.uniqueName={init:function(t,e){if(e()){var n="ko_unique_"+ ++c.d.uniqueName.tb;c.a.gb(t,n)}}},c.d.uniqueName.tb=0,c.d.value={init:function(t,e,n){function i(){o=!1;var i=e(),r=c.h.n(t);c.g.ha(i,n,"value",r)}var r=["change"],a=n().valueUpdate,o=!1;a&&("string"==typeof a&&(a=[a]),c.a.R(r,a),r=c.a.Ma(r)),!c.a.ca||"input"!=t.tagName.toLowerCase()||"text"!=t.type||"off"==t.autocomplete||t.form&&"off"==t.form.autocomplete||-1!=c.a.k(r,"propertychange")||(c.a.o(t,"propertychange",function(){o=!0}),c.a.o(t,"blur",function(){o&&i()})),c.a.p(r,function(e){var n=i;c.a.Tb(e,"after")&&(n=function(){setTimeout(i,0)},e=e.substring(5)),c.a.o(t,e,n)})},update:function(t,e){var n="select"===c.a.u(t),i=c.a.c(e()),r=c.h.n(t);i!==r&&(r=function(){c.h.W(t,i)},r(),n&&setTimeout(r,0)),n&&0<t.length&&u(t,i,!1)}},c.d.visible={update:function(t,e){var n=c.a.c(e()),i="none"!=t.style.display;n&&!i?t.style.display="":!n&&i&&(t.style.display="none")}},function(t){c.d[t]={init:function(e,n,i,r){return c.d.event.init.call(this,e,function(){var e={};return e[t]=n(),e},i,r)}}}("click"),c.v=function(){},c.v.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},c.v.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},c.v.prototype.makeTemplateSource=function(t,e){if("string"==typeof t){e=e||a;var n=e.getElementById(t);if(!n)throw Error("Cannot find template with ID "+t);return new c.l.i(n)}if(1==t.nodeType||8==t.nodeType)return new c.l.Q(t);throw Error("Unknown template type: "+t)},c.v.prototype.renderTemplate=function(t,e,n,i){return t=this.makeTemplateSource(t,i),this.renderTemplateSource(t,e,n)},c.v.prototype.isTemplateRewritten=function(t,e){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(t,e).data("isRewritten")},c.v.prototype.rewriteTemplate=function(t,e,n){t=this.makeTemplateSource(t,n),e=e(t.text()),t.text(e),t.data("isRewritten",!0)},c.b("templateEngine",c.v),c.Ea=function(){function t(t,e,n,i){t=c.g.da(t);for(var r=c.g.S,a=0;a<t.length;a++){var o=t[a].key;if(r.hasOwnProperty(o)){var s=r[o];if("function"==typeof s){if(o=s(t[a].value))throw Error(o)}else if(!s)throw Error("This template engine does not support the '"+o+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+c.g.ea(t)+" } })()},'"+n.toLowerCase()+"')",i.createJavaScriptEvaluatorBlock(n)+e}var e=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ab:function(t,e,n){e.isTemplateRewritten(t,n)||e.rewriteTemplate(t,function(t){return c.Ea.Lb(t,e)},n)},Lb:function(i,r){return i.replace(e,function(e,n,i,a,o){return t(o,n,i,r)}).replace(n,function(e,n){return t(n,"<!-- ko -->","#comment",r)})},qb:function(t,e){return c.s.va(function(n,i){var r=n.nextSibling;r&&r.nodeName.toLowerCase()===e&&c.Ka(r,t,i)})}}}(),c.b("__tr_ambtns",c.Ea.qb),function(){c.l={},c.l.i=function(t){this.i=t},c.l.i.prototype.text=function(){var t=c.a.u(this.i),t="script"===t?"text":"textarea"===t?"value":"innerHTML";if(0==arguments.length)return this.i[t];var e=arguments[0];"innerHTML"===t?c.a.fa(this.i,e):this.i[t]=e},c.l.i.prototype.data=function(t){return 1===arguments.length?c.a.f.get(this.i,"templateSourceData_"+t):void c.a.f.set(this.i,"templateSourceData_"+t,arguments[1])},c.l.Q=function(t){this.i=t},c.l.Q.prototype=new c.l.i,c.l.Q.prototype.text=function(){if(0==arguments.length){var t=c.a.f.get(this.i,"__ko_anon_template__")||{};return t.Fa===i&&t.ma&&(t.Fa=t.ma.innerHTML),t.Fa}c.a.f.set(this.i,"__ko_anon_template__",{Fa:arguments[0]})},c.l.i.prototype.nodes=function(){return 0==arguments.length?(c.a.f.get(this.i,"__ko_anon_template__")||{}).ma:void c.a.f.set(this.i,"__ko_anon_template__",{ma:arguments[0]})},c.b("templateSources",c.l),c.b("templateSources.domElement",c.l.i),c.b("templateSources.anonymousTemplate",c.l.Q)}(),function(){function t(t,e,n){var i;for(e=c.e.nextSibling(e);t&&(i=t)!==e;)t=c.e.nextSibling(i),1!==i.nodeType&&8!==i.nodeType||n(i)}function e(e,n){if(e.length){var i=e[0],r=e[e.length-1];t(i,r,function(t){c.Ia(n,t)}),t(i,r,function(t){c.s.nb(t,[n])})}}function n(t){return t.nodeType?t:0<t.length?t[0]:null}function r(t,i,r,o,s){s=s||{};var l=t&&n(t),l=l&&l.ownerDocument,u=s.templateEngine||a;if(c.Ea.Ab(r,u,l),r=u.renderTemplate(r,o,s,l),"number"!=typeof r.length||0<r.length&&"number"!=typeof r[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,i){case"replaceChildren":c.e.P(t,r),l=!0;break;case"replaceNode":c.a.eb(t,r),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+i)}return l&&(e(r,o),s.afterRender&&c.q.I(s.afterRender,null,[r,o.$data])),r}var a;c.Ba=function(t){if(t!=i&&!(t instanceof c.v))throw Error("templateEngine must inherit from ko.templateEngine");a=t},c.za=function(t,e,o,s,l){if(o=o||{},(o.templateEngine||a)==i)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",s){var u=n(s);return c.j(function(){var i=e&&e instanceof c.A?e:new c.A(c.a.c(e)),a="function"==typeof t?t(i.$data,i):t,i=r(s,l,a,i,o);"replaceNode"==l&&(s=i,u=n(s))},null,{Qa:function(){return!u||!c.a.aa(u)},$:u&&"replaceNode"==l?u.parentNode:u})}return c.s.va(function(n){c.za(t,e,o,n,"replaceNode")})},c.Rb=function(t,n,a,o,s){function l(t,n){e(n,d),a.afterRender&&a.afterRender(n,t)}function u(e,n){d=s.createChildContext(c.a.c(e),a.as),d.$index=n;var i="function"==typeof t?t(e,d):t;return r(null,"ignoreTargetNode",i,d,a)}var d;return c.j(function(){var t=c.a.c(n)||[];"undefined"==typeof t.length&&(t=[t]),t=c.a.Y(t,function(t){return a.includeDestroyed||t===i||null===t||!c.a.c(t._destroy)}),c.q.I(c.a.Aa,null,[o,t,u,a,l])},null,{$:o})},c.d.template={init:function(t,e){var n=c.a.c(e());return"string"==typeof n||n.name||1!=t.nodeType&&8!=t.nodeType||(n=1==t.nodeType?t.childNodes:c.e.childNodes(t),n=c.a.Mb(n),new c.l.Q(t).nodes(n)),{controlsDescendantBindings:!0}},update:function(t,e,n,r,a){e=c.a.c(e()),n={},r=!0;var o,s=null;"string"!=typeof e&&(n=e,e=c.a.c(n.name),"if"in n&&(r=c.a.c(n["if"])),r&&"ifnot"in n&&(r=!c.a.c(n.ifnot)),o=c.a.c(n.data)),"foreach"in n?s=c.Rb(e||t,r&&n.foreach||[],n,t,a):r?(a="data"in n?a.createChildContext(o,n.as):a,s=c.za(e||t,a,n,t)):c.e.ba(t),a=s,(o=c.a.f.get(t,"__ko__templateComputedDomDataKey__"))&&"function"==typeof o.B&&o.B(),c.a.f.set(t,"__ko__templateComputedDomDataKey__",a&&a.ta()?a:i)}},c.g.S.template=function(t){return t=c.g.da(t),1==t.length&&t[0].unknown||c.g.Jb(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},c.e.L.template=!0}(),c.b("setTemplateEngine",c.Ba),c.b("renderTemplate",c.za),c.a.Pa=function(){function t(t,e,n,i,r){var a,o,s,l,u,c=Math.min,d=Math.max,h=[],p=t.length,f=e.length,m=f-p||1,g=p+f+1;for(a=0;p>=a;a++)for(l=s,h.push(s=[]),u=c(f,a+m),o=d(0,a-1);u>=o;o++)s[o]=o?a?t[a-1]===e[o-1]?l[o-1]:c(l[o]||g,s[o-1]||g)+1:o+1:a+1;for(c=[],d=[],m=[],a=p,o=f;a||o;)f=h[a][o]-1,o&&f===h[a][o-1]?d.push(c[c.length]={status:n,value:e[--o],index:o}):a&&f===h[a-1][o]?m.push(c[c.length]={status:i,value:t[--a],index:a}):(c.push({status:"retained",value:e[--o]}),--a);if(d.length&&m.length){t=10*p;var v;for(e=n=0;(r||t>e)&&(v=d[n]);n++){for(i=0;h=m[i];i++)if(v.value===h.value){v.moved=h.index,h.moved=v.index,m.splice(i,1),e=i=0;break}e+=i}}return c.reverse()}return function(e,n,i){return e=e||[],n=n||[],e.length<=n.length?t(e,n,"added","deleted",i):t(n,e,"deleted","added",i)}}(),c.b("utils.compareArrays",c.a.Pa),function(){function t(t){for(;t.length&&!c.a.aa(t[0]);)t.splice(0,1);if(1<t.length){for(var e=t[0],n=t[t.length-1],i=[e];e!==n;){if(e=e.nextSibling,!e)return;i.push(e)}Array.prototype.splice.apply(t,[0,t.length].concat(i))}return t}function e(e,n,r,a,o){var s=[];return e=c.j(function(){var e=n(r,o,t(s))||[];0<s.length&&(c.a.eb(s,e),a&&c.q.I(a,null,[r,e,o])),s.splice(0,s.length),c.a.R(s,e)},null,{$:e,Qa:function(){return!c.a.pb(s)}}),{O:s,j:e.ta()?e:i}}c.a.Aa=function(n,r,a,o,s){function l(e,n){x=h[n],v!==n&&(S[e]=x),x.ra(v++),t(x.O),m.push(x),b.push(x)}function u(t,e){if(t)for(var n=0,i=e.length;i>n;n++)e[n]&&c.a.p(e[n].O,function(i){t(i,n,e[n].X)})}r=r||[],o=o||{};var d=c.a.f.get(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult")===i,h=c.a.f.get(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult")||[],p=c.a.Z(h,function(t){return t.X}),f=c.a.Pa(p,r,o.dontLimitMoves),m=[],g=0,v=0,y=[],b=[];r=[];for(var x,w,k,S=[],p=[],C=0;w=f[C];C++)switch(k=w.moved,w.status){case"deleted":k===i&&(x=h[g],x.j&&x.j.B(),y.push.apply(y,t(x.O)),o.beforeRemove&&(r[C]=x,b.push(x))),g++;break;case"retained":l(C,g++);break;case"added":k!==i?l(C,k):(x={X:w.value,ra:c.m(v++)},m.push(x),b.push(x),d||(p[C]=x))}u(o.beforeMove,S),c.a.p(y,o.beforeRemove?c.H:c.removeNode);for(var E,C=0,d=c.e.firstChild(n);x=b[C];C++){for(x.O||c.a.extend(x,e(n,a,x.X,s,x.ra)),g=0;f=x.O[g];d=f.nextSibling,E=f,g++)f!==d&&c.e.Va(n,f,E);!x.Fb&&s&&(s(x.X,x.O,x.ra),x.Fb=!0)}u(o.beforeRemove,r),u(o.afterMove,S),u(o.afterAdd,p),c.a.f.set(n,"setDomNodeChildrenFromArrayMapping_lastMappingResult",m)}}(),c.b("utils.setDomNodeChildrenFromArrayMapping",c.a.Aa),c.D=function(){this.allowTemplateRewriting=!1},c.D.prototype=new c.v,c.D.prototype.renderTemplateSource=function(t){var e=(9>c.a.ca?0:t.nodes)?t.nodes():null;return e?c.a.N(e.cloneNode(!0).childNodes):(t=t.text(),c.a.xa(t))},c.D.sa=new c.D,c.Ba(c.D.sa),c.b("nativeTemplateEngine",c.D),function(){c.ua=function(){var t=this.Ib=function(){if("undefined"==typeof s||!s.tmpl)return 0;try{if(0<=s.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(t){}return 1}();this.renderTemplateSource=function(e,n,i){if(i=i||{},2>t)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var r=e.data("precompiled");return r||(r=e.text()||"",r=s.template(null,"{{ko_with $item.koBindingContext}}"+r+"{{/ko_with}}"),e.data("precompiled",r)),e=[n.$data],n=s.extend({koBindingContext:n},i.templateOptions),n=s.tmpl(r,e,n),n.appendTo(a.createElement("div")),s.fragments={},n},this.createJavaScriptEvaluatorBlock=function(t){return"{{ko_code ((function() { return "+t+" })()) }}"},this.addTemplate=function(t,e){a.write("<script type='text/html' id='"+t+"'>"+e+"</script>")},t>0&&(s.tmpl.tag.ko_code={open:"__.push($1 || '');"},s.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},c.ua.prototype=new c.v;var t=new c.ua;0<t.Ib&&c.Ba(t),c.b("jqueryTmplTemplateEngine",c.ua)}()})}()}(),n("durandal/binder",["durandal/system","knockout"],function(t,e){function n(e){return void 0===e?{applyBindings:!0}:t.isBoolean(e)?{applyBindings:e}:(void 0===e.applyBindings&&(e.applyBindings=!0),e)}function i(i,u,c,d){if(!u||!c)return void(r.throwOnErrors?t.error(a):t.log(a,u,d));if(!u.getAttribute)return void(r.throwOnErrors?t.error(o):t.log(o,u,d));var h=u.getAttribute("data-view");try{var p;return i&&i.binding&&(p=i.binding(u)),p=n(p),r.binding(d,u,p),p.applyBindings?(t.log("Binding",h,d),e.applyBindings(c,u)):i&&e.utils.domData.set(u,l,{$data:i}),r.bindingComplete(d,u,p),i&&i.bindingComplete&&i.bindingComplete(u),e.utils.domData.set(u,s,p),p}catch(f){f.message=f.message+";\nView: "+h+";\nModuleId: "+t.getModuleId(d),r.throwOnErrors?t.error(f):t.log(f.message)}}var r,a="Insufficient Information to Bind",o="Unexpected View Type",s="durandal-binding-instruction",l="__ko_bindingContext__";return r={binding:t.noop,bindingComplete:t.noop,throwOnErrors:!1,getBindingInstruction:function(t){return e.utils.domData.get(t,s)},bindContext:function(t,e,n){return n&&t&&(t=t.createChildContext(n)),i(n,e,t,n||(t?t.$data:null))},bind:function(t,e){return i(t,e,t,t)}}}),n("durandal/activator",["durandal/system","knockout"],function(t,e){function n(t){return void 0==t&&(t={}),t.closeOnDeactivate||(t.closeOnDeactivate=u.defaults.closeOnDeactivate),t.beforeActivate||(t.beforeActivate=u.defaults.beforeActivate),t.afterDeactivate||(t.afterDeactivate=u.defaults.afterDeactivate),t.affirmations||(t.affirmations=u.defaults.affirmations),t.interpretResponse||(t.interpretResponse=u.defaults.interpretResponse),t.areSameItem||(t.areSameItem=u.defaults.areSameItem),t}function i(e,n,i){return t.isArray(i)?e[n].apply(e,i):e[n](i)}function r(e,n,i,r,a){if(e&&e.deactivate){t.log("Deactivating",e);var o;try{o=e.deactivate(n)}catch(s){return t.error(s),void r.resolve(!1)}o&&o.then?o.then(function(){i.afterDeactivate(e,n,a),r.resolve(!0)},function(e){t.log(e),r.resolve(!1)}):(i.afterDeactivate(e,n,a),r.resolve(!0))}else e&&i.afterDeactivate(e,n,a),r.resolve(!0)}function a(e,n,r,a){if(e)if(e.activate){t.log("Activating",e);var o;try{o=i(e,"activate",a)}catch(s){return t.error(s),void r(!1)}o&&o.then?o.then(function(){n(e),r(!0)},function(e){t.log(e),r(!1)}):(n(e),r(!0))}else n(e),r(!0);else r(!0)}function o(e,n,i){return i.lifecycleData=null,t.defer(function(r){if(e&&e.canDeactivate){var a;try{a=e.canDeactivate(n)}catch(o){return t.error(o),void r.resolve(!1)}a.then?a.then(function(t){i.lifecycleData=t,r.resolve(i.interpretResponse(t))},function(e){t.error(e),r.resolve(!1)}):(i.lifecycleData=a,r.resolve(i.interpretResponse(a)))}else r.resolve(!0)}).promise()}function s(e,n,r,a){return r.lifecycleData=null,t.defer(function(o){if(e==n())return void o.resolve(!0);if(e&&e.canActivate){var s;try{s=i(e,"canActivate",a)}catch(l){return t.error(l),void o.resolve(!1)}s.then?s.then(function(t){r.lifecycleData=t,o.resolve(r.interpretResponse(t))},function(e){t.error(e),o.resolve(!1)}):(r.lifecycleData=s,o.resolve(r.interpretResponse(s)))}else o.resolve(!0)}).promise()}function l(i,l){var u,c=e.observable(null);l=n(l);var d=e.computed({read:function(){return c()},write:function(t){d.viaSetter=!0,d.activateItem(t)}});return d.__activator__=!0,d.settings=l,l.activator=d,d.isActivating=e.observable(!1),d.canDeactivateItem=function(t,e){return o(t,e,l)},d.deactivateItem=function(e,n){return t.defer(function(t){d.canDeactivateItem(e,n).then(function(i){i?r(e,n,l,t,c):(d.notifySubscribers(),t.resolve(!1))})}).promise()},d.canActivateItem=function(t,e){return s(t,c,l,e)},d.activateItem=function(e,n){var i=d.viaSetter;return d.viaSetter=!1,t.defer(function(o){if(d.isActivating())return void o.resolve(!1);d.isActivating(!0);var s=c();return l.areSameItem(s,e,u,n)?(d.isActivating(!1),void o.resolve(!0)):void d.canDeactivateItem(s,l.closeOnDeactivate).then(function(h){h?d.canActivateItem(e,n).then(function(h){h?t.defer(function(t){r(s,l.closeOnDeactivate,l,t)}).promise().then(function(){e=l.beforeActivate(e,n),a(e,c,function(t){u=n,d.isActivating(!1),o.resolve(t)},n)}):(i&&d.notifySubscribers(),d.isActivating(!1),o.resolve(!1))}):(i&&d.notifySubscribers(),d.isActivating(!1),o.resolve(!1))})}).promise()},d.canActivate=function(){var t;return i?(t=i,i=!1):t=d(),d.canActivateItem(t)},d.activate=function(){var t;return i?(t=i,i=!1):t=d(),d.activateItem(t)},d.canDeactivate=function(t){return d.canDeactivateItem(d(),t)},d.deactivate=function(t){return d.deactivateItem(d(),t)},d.includeIn=function(t){t.canActivate=function(){return d.canActivate()},t.activate=function(){return d.activate()},t.canDeactivate=function(t){return d.canDeactivate(t)},t.deactivate=function(t){return d.deactivate(t)}},l.includeIn?d.includeIn(l.includeIn):i&&d.activate(),d.forItems=function(e){l.closeOnDeactivate=!1,l.determineNextItemToActivate=function(t,e){var n=e-1;return-1==n&&t.length>1?t[1]:n>-1&&n<t.length-1?t[n]:null},l.beforeActivate=function(t){var n=d();if(t){var i=e.indexOf(t);-1==i?e.push(t):t=e()[i]}else t=l.determineNextItemToActivate(e,n?e.indexOf(n):0);return t},l.afterDeactivate=function(t,n){n&&e.remove(t)};var n=d.canDeactivate;d.canDeactivate=function(i){return i?t.defer(function(t){function n(){for(var e=0;e<a.length;e++)if(!a[e])return void t.resolve(!1);t.resolve(!0)}for(var r=e(),a=[],o=0;o<r.length;o++)d.canDeactivateItem(r[o],i).then(function(t){a.push(t),a.length==r.length&&n()})}).promise():n()};var i=d.deactivate;return d.deactivate=function(n){return n?t.defer(function(t){function i(i){d.deactivateItem(i,n).then(function(){a++,e.remove(i),a==o&&t.resolve()})}for(var r=e(),a=0,o=r.length,s=0;o>s;s++)i(r[s])}).promise():i()},d},d}var u,c={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return t.isObject(n)&&(n=n.can||!1),t.isString(n)?-1!==e.utils.arrayIndexOf(this.affirmations,n.toLowerCase()):n},areSameItem:function(t,e){return t==e},beforeActivate:function(t){return t},afterDeactivate:function(t,e,n){e&&n&&n(null)}};return u={defaults:c,create:l,isActivator:function(t){return t&&t.__activator__}}}),n("durandal/composition",["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(t,e,n,i,r,a,o){function s(t){for(var e=[],n={childElements:e,activeView:null},i=o.virtualElements.firstChild(t);i;)1==i.nodeType&&(e.push(i),i.getAttribute(w)&&(n.activeView=i)),i=o.virtualElements.nextSibling(i);return n.activeView||(n.activeView=e[0]),n}function l(){S--,0===S&&setTimeout(function(){for(var e=k.length;e--;)try{k[e]()}catch(n){t.error(n)}k=[]},1)}function u(t){delete t.activeView,delete t.viewElements}function c(e,n,i){if(i)n();else if(e.activate&&e.model&&e.model.activate){var r;try{r=t.isArray(e.activationData)?e.model.activate.apply(e.model,e.activationData):e.model.activate(e.activationData),r&&r.then?r.then(n,function(e){t.error(e),n()}):r||void 0===r?n():(l(),u(e))}catch(a){t.error(a)}}else n()}function d(){var e=this;if(e.activeView&&e.activeView.removeAttribute(w),e.child)try{e.model&&e.model.attached&&(e.composingNewView||e.alwaysTriggerAttach)&&e.model.attached(e.child,e.parent,e),e.attached&&e.attached(e.child,e.parent,e),e.child.setAttribute(w,!0),e.composingNewView&&e.model&&e.model.detached&&o.utils.domNodeDisposal.addDisposeCallback(e.child,function(){try{e.model.detached(e.child,e.parent,e)}catch(n){t.error(n)}})}catch(n){t.error(n)}e.triggerAttach=t.noop}function h(e){if(t.isString(e.transition)){if(e.activeView){if(e.activeView==e.child)return!1;if(!e.child)return!0;if(e.skipTransitionOnSameViewId){var n=e.activeView.getAttribute("data-view"),i=e.child.getAttribute("data-view");return n!=i}}return!0}return!1}function p(t){for(var e=0,n=t.length,i=[];n>e;e++){var r=t[e].cloneNode(!0);i.push(r)}return i}function f(t){var e=p(t.parts),n=b.getParts(e,null,!0),i=b.getParts(t.child);for(var r in n)a(i[r]).replaceWith(n[r])}function m(e){var n,i,r=o.virtualElements.childNodes(e.parent);if(!t.isArray(r)){var a=[];for(n=0,i=r.length;i>n;n++)a[n]=r[n];r=a}for(n=1,i=r.length;i>n;n++)o.removeNode(r[n])}function g(t){o.utils.domData.set(t,T,t.style.display),t.style.display="none"}function v(t){t.style.display=o.utils.domData.get(t,T)}function y(t){var e=t.getAttribute("data-bind");if(!e)return!1;for(var n=0,i=A.length;i>n;n++)if(e.indexOf(A[n])>-1)return!0;return!1}var b,x={},w="data-active-view",k=[],S=0,C="durandal-composition-data",E="data-part",_=["model","view","transition","area","strategy","activationData"],T="durandal-visibility-data",A=["compose:"],N={complete:function(t){k.push(t)}};return b={composeBindings:A,convertTransitionToModuleId:function(t){return"transitions/"+t},defaultTransitionName:null,current:N,addBindingHandler:function(t,e,n){var i,r,a="composition-handler-"+t;e=e||o.bindingHandlers[t],n=n||function(){return void 0},r=o.bindingHandlers[t]={init:function(t,i,r,s,l){if(S>0){var u={trigger:o.observable(null)};b.current.complete(function(){e.init&&e.init(t,i,r,s,l),e.update&&(o.utils.domData.set(t,a,e),u.trigger("trigger"))}),o.utils.domData.set(t,a,u)}else o.utils.domData.set(t,a,e),e.init&&e.init(t,i,r,s,l);return n(t,i,r,s,l)},update:function(t,e,n,i,r){var s=o.utils.domData.get(t,a);return s.update?s.update(t,e,n,i,r):void(s.trigger&&s.trigger())}};for(i in e)"init"!==i&&"update"!==i&&(r[i]=e[i])},getParts:function(t,e,n){if(e=e||{},!t)return e;void 0===t.length&&(t=[t]);for(var i=0,r=t.length;r>i;i++){var a=t[i];if(a.getAttribute){if(!n&&y(a))continue;var o=a.getAttribute(E);o&&(e[o]=a),!n&&a.hasChildNodes()&&b.getParts(a.childNodes,e)}}return e},cloneNodes:p,finalize:function(e){if(void 0===e.transition&&(e.transition=this.defaultTransitionName),e.child||e.activeView)if(h(e)){var i=this.convertTransitionToModuleId(e.transition);t.acquire(i).then(function(t){e.transition=t,t(e).then(function(){if(e.cacheViews){if(e.activeView){var t=n.getBindingInstruction(e.activeView);t&&void 0!=t.cacheViews&&!t.cacheViews&&o.removeNode(e.activeView)}}else e.child?m(e):o.virtualElements.emptyNode(e.parent);e.triggerAttach(),l(),u(e)})}).fail(function(e){t.error("Failed to load transition ("+i+"). Details: "+e.message)})}else{if(e.child!=e.activeView){if(e.cacheViews&&e.activeView){var r=n.getBindingInstruction(e.activeView);!r||void 0!=r.cacheViews&&!r.cacheViews?o.removeNode(e.activeView):g(e.activeView)}e.child?(e.cacheViews||m(e),v(e.child)):e.cacheViews||o.virtualElements.emptyNode(e.parent)}e.triggerAttach(),l(),u(e)}else e.cacheViews||o.virtualElements.emptyNode(e.parent),e.triggerAttach(),l(),u(e)},bindAndShow:function(t,e,r){e.child=t,e.composingNewView=e.cacheViews?-1==o.utils.arrayIndexOf(e.viewElements,t):!0,c(e,function(){if(e.binding&&e.binding(e.child,e.parent,e),e.preserveContext&&e.bindingContext)e.composingNewView&&(e.parts&&f(e),g(t),o.virtualElements.prepend(e.parent,t),n.bindContext(e.bindingContext,t,e.model));else if(t){var r=e.model||x,a=o.dataFor(t);if(a!=r){if(!e.composingNewView)return o.removeNode(t),void i.createView(t.getAttribute("data-view")).then(function(t){b.bindAndShow(t,e,!0)});e.parts&&f(e),g(t),o.virtualElements.prepend(e.parent,t),n.bind(r,t)}}b.finalize(e)},r)},defaultStrategy:function(t){return e.locateViewForObject(t.model,t.area,t.viewElements)},getSettings:function(e){var n,a=e(),s=o.utils.unwrapObservable(a)||{},l=r.isActivator(a);if(t.isString(s))return s=i.isViewUrl(s)?{view:s}:{model:s,activate:!0};if(n=t.getModuleId(s))return s={model:s,activate:!0};!l&&s.model&&(l=r.isActivator(s.model));for(var u in s)s[u]=-1!=o.utils.arrayIndexOf(_,u)?o.utils.unwrapObservable(s[u]):s[u];return l?s.activate=!1:void 0===s.activate&&(s.activate=!0),s},executeStrategy:function(t){t.strategy(t).then(function(e){b.bindAndShow(e,t)})},inject:function(n){return n.model?n.view?void e.locateView(n.view,n.area,n.viewElements).then(function(t){b.bindAndShow(t,n)}):(n.strategy||(n.strategy=this.defaultStrategy),void(t.isString(n.strategy)?t.acquire(n.strategy).then(function(t){n.strategy=t,b.executeStrategy(n)}).fail(function(e){t.error("Failed to load view strategy ("+n.strategy+"). Details: "+e.message)}):this.executeStrategy(n))):void this.bindAndShow(null,n)},compose:function(n,i,r,a){S++,a||(i=b.getSettings(function(){return i},n)),i.compositionComplete&&k.push(function(){i.compositionComplete(i.child,i.parent,i)}),k.push(function(){i.composingNewView&&i.model&&i.model.compositionComplete&&i.model.compositionComplete(i.child,i.parent,i)});var o=s(n);i.activeView=o.activeView,i.parent=n,i.triggerAttach=d,i.bindingContext=r,i.cacheViews&&!i.viewElements&&(i.viewElements=o.childElements),i.model?t.isString(i.model)?t.acquire(i.model).then(function(e){i.model=t.resolveObject(e),b.inject(i)}).fail(function(e){t.error("Failed to load composed module ("+i.model+"). Details: "+e.message)}):b.inject(i):i.view?(i.area=i.area||"partial",i.preserveContext=!0,e.locateView(i.view,i.area,i.viewElements).then(function(t){b.bindAndShow(t,i)})):this.bindAndShow(null,i)}},o.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e,n,r,a){var s=b.getSettings(e,t);if(s.mode){var l=o.utils.domData.get(t,C);if(!l){var u=o.virtualElements.childNodes(t);l={},"inline"===s.mode?l.view=i.ensureSingleElement(u):"templated"===s.mode&&(l.parts=p(u)),o.virtualElements.emptyNode(t),o.utils.domData.set(t,C,l)}"inline"===s.mode?s.view=l.view.cloneNode(!0):"templated"===s.mode&&(s.parts=l.parts),s.preserveContext=!0}b.compose(t,s,a,!0)}},o.virtualElements.allowedBindings.compose=!0,b}),n("durandal/events",["durandal/system"],function(t){var e=/\s+/,n=function(){},i=function(t,e){this.owner=t,this.events=e};return i.prototype.then=function(t,e){return this.callback=t||this.callback,this.context=e||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},i.prototype.on=i.prototype.then,i.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(t,n,r){var a,o,s;if(n){for(a=this.callbacks||(this.callbacks={}),t=t.split(e);o=t.shift();)s=a[o]||(a[o]=[]),s.push(n,r);return this}return new i(this,t)},n.prototype.off=function(n,i,r){var a,o,s,l;if(!(o=this.callbacks))return this;if(!(n||i||r))return delete this.callbacks,this;for(n=n?n.split(e):t.keys(o);a=n.shift();)if((s=o[a])&&(i||r))for(l=s.length-2;l>=0;l-=2)i&&s[l]!==i||r&&s[l+1]!==r||s.splice(l,2);else delete o[a];return this},n.prototype.trigger=function(t){var n,i,r,a,o,s,l,u;if(!(i=this.callbacks))return this;for(u=[],t=t.split(e),a=1,o=arguments.length;o>a;a++)u[a-1]=arguments[a];for(;n=t.shift();){if((l=i.all)&&(l=l.slice()),(r=i[n])&&(r=r.slice()),r)for(a=0,o=r.length;o>a;a+=2)r[a].apply(r[a+1]||this,u);if(l)for(s=[n].concat(u),a=0,o=l.length;o>a;a+=2)l[a].apply(l[a+1]||this,s)}return this},n.prototype.proxy=function(t){var e=this;return function(n){e.trigger(t,n)}},n.includeIn=function(t){t.on=n.prototype.on,t.off=n.prototype.off,t.trigger=n.prototype.trigger,t.proxy=n.prototype.proxy},n}),n("durandal/app",["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(t,e,n,i,r){function a(){return t.defer(function(e){return 0==s.length?void e.resolve():void t.acquire(s).then(function(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.install){var a=l[i];t.isObject(a)||(a={}),r.install(a),t.log("Plugin:Installed "+s[i])}else t.log("Plugin:Loaded "+s[i])}e.resolve()}).fail(function(e){t.error("Failed to load plugin(s). Details: "+e.message)})}).promise()}var o,s=[],l=[];return o={title:"Application",configurePlugins:function(e,n){var i=t.keys(e);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var r=0;r<i.length;r++){var a=i[r];s.push(n+a),l.push(e[a])
}},start:function(){return t.log("Application:Starting"),this.title&&(document.title=this.title),t.defer(function(e){r(function(){a().then(function(){e.resolve(),t.log("Application:Started")})})}).promise()},setRoot:function(i,r,a){var o,s={activate:!0,transition:r};o=!a||t.isString(a)?document.getElementById(a||"applicationHost"):a,t.isString(i)?e.isViewUrl(i)?s.view=i:s.model=i:s.model=i,n.compose(o,s)}},i.includeIn(o),o}),function(){n("modules/ko_extenders",["require","knockout"],function(t){var e=t("knockout");return{apply:function(){e.extenders.numeric=function(t,n){var i=e.computed({read:t,write:function(e){var i=t(),r=parseInt(e,10);r=isNaN(r)?0:r,n.negative||(r=0>r?0:r),r!==i?t(r):t.notifySubscribers(r)}}).extend({notify:"always"});return i}}}})}(),function(){n("modules/jquery_extenders",["require","jquery"],function(t){var e=t("jquery");return{apply:function(){e.cd_notify=function(t,n,i,r){var a,o=r||e("#alert-area");switch(o.empty(),n=n||"alert-success",i=i||3e3,n){case"alert-success":a="fa-check";break;case"alert-info":a="fa-info-circle";break;case"alert-warning":a="fa-exclamation-triangle";break;case"alert-danger":a="fa-times-circle"}return o.append('<div class="alert '+n+'"><i class="fa '+a+'"></i> <a class="close" data-dismiss="alert">×</a><span>'+t+"</span></div>"),setTimeout(function(){o.empty()},i),this},e.cd_download=function(t,n,i){if(t&&n){var r="";Object.keys(n).forEach(function(t){r+='<input type="hidden" name="'+t+'" value="'+n[t]+'" />'}),e('<form action="'+t+'" method="'+(i||"post")+'">'+r+"</form>").appendTo("body").submit().remove()}},e.cd_uploadImage=function(t){var n,i=e("#importInput");return i.wrap(e('<form class="hiddenFileInput" target="ifr" id="importFile" name="importFile" enctype="multipart/form-data" action="'+t+'" method="post"></form>')),e("#importFile").submit(),e("#importFileIframe").load(function(){n=e("#importFileIframe")[0].contentWindow.document.body.innerHTML}),i.unwrap(),n},e.cd_loadingOverlay=function(t,n){var i=e("#loadingModal"),n=n||"";return i.empty(),i.append("<span>"+n+"</span>"),i.append('<div class="modal-body bodyLoadingModal">'),i.modal(t),this}}}})}(),function(){t.config({paths:{text:"../bower_components/requirejs-text/text",durandal:"../bower_components/durandal/js",plugins:"../bower_components/durandal/js/plugins",transitions:"../bower_components/durandal/js/transitions",knockout:"../bower_components/knockout.js/knockout-2.3.0.debug",jquery:"../bower_components/jquery/jquery",bootstrap:"../bower_components/bootstrap/dist/js/bootstrap","svg-edit":"../lib/svgcanvas",browser:"../lib/svgcanvas/browser",svgtransformlist:"../lib/svgcanvas/svgtransformlist",math:"../lib/svgcanvas/math",units:"../lib/svgcanvas/units",svgutils:"../lib/svgcanvas/svgutils",sanitize:"../lib/svgcanvas/sanitize",history:"../lib/svgcanvas/history",select:"../lib/svgcanvas/select",draw:"../lib/svgcanvas/draw",path:"../lib/svgcanvas/path",svgcanvas:"../lib/svgcanvas/svgcanvas",arrowExt:"../lib/svgcanvas/ext_arrow",config:"../app/config",rgbcolor:"../lib/canvg/rgbcolor",canvg:"../lib/canvg/canvg",bootstrapSlider:"../bower_components/bootstrap-slider/bootstrap-slider",bootstrapStepper:"../lib/bootstrap-spinedit-master/js/bootstrap-spinedit",contextmenu:"../lib/contextmenu/contextMenu",swfObject:"../lib/filereader/swfobject",filereader:"../lib/filereader/filereader"},shim:{bootstrap:{deps:["jquery"],exports:"jQuery"},filereader:{deps:["swfObject"],exports:"swfobject"}}}),n("main",["require","durandal/system","durandal/app","modules/ko_extenders","modules/jquery_extenders"],function(t){var e=t("durandal/app"),n=t("modules/ko_extenders"),i=t("modules/jquery_extenders");e.title="Yunique Markup",e.configurePlugins({router:!0,dialog:!0,widget:{kinds:["panel","slider","dropdownlist","colorpicker","stepper","toggle-button"]}}),n.apply(),i.apply(),e.start().then(function(){e.setRoot("pages/editor/editor")})})}(),function(){n("modules/adjustLayers",["require","jquery","knockout"],function(t){var e=t("jquery"),n=t("knockout"),i=function(){var t=this.svgcanvas.getRootElem();this.originalWidth=parseInt(t.getAttribute("width")/this.svgcanvas.getZoom(),10),this.originalHeight=parseInt(t.getAttribute("height")/this.svgcanvas.getZoom(),10),this.leftAdded=0,this.topAdded=0},r=function(t){var n,i=this.svgcanvas.getCurrentDrawing().all_layers,r=0,a=0;t.x&&this.leftAdded?(r=-this.leftAdded+t.x,this.leftAdded=t.x):!t.x&&this.leftAdded?(r=-this.leftAdded,this.leftAdded=0):(r=t.x,this.leftAdded=r),t.y&&this.topAdded?(a=-this.topAdded+t.y,this.topAdded=t.y):!t.y&&this.topAdded?(a=-this.topAdded,this.topAdded=0):(a=t.y,this.topAdded=a),i.forEach(function(t){n=e(t[1]).children().not("title").not("#svg-background"),this.svgcanvas.addToSelection(n,!0)}.bind(this)),this.svgcanvas.moveSelectedElements(r,a),this.svgcanvas.clearSelection()},a=function(){this.positionTop=n.observable(0),this.positionLeft=n.observable(0),this.positionBottom=n.observable(0),this.positionRight=n.observable(0),this.svgcanvas=null,this.leftAdded=0,this.topAdded=0};return a.prototype.create=function(t){this.svgcanvas=t,this.reset()},a.prototype.updateFields=function(){var t,e;t=this.originalWidth+this.positionLeft()+this.positionRight(),e=this.originalHeight+this.positionTop()+this.positionBottom(),r.call(this,{x:this.positionLeft()*this.svgcanvas.getZoom(),y:this.positionTop()*this.svgcanvas.getZoom()}),this.svgcanvas.setResolution(t,e),this.svgcanvas.updateCanvas(t*this.svgcanvas.getZoom(),e*this.svgcanvas.getZoom())},a.prototype.reset=function(){i.call(this),this.positionTop(0),this.positionLeft(0),this.positionBottom(0),this.positionRight(0)},a})}(),function(){n("modules/crop",["require","jquery"],function(t){function e(t){return t instanceof HTMLImageElement}function n(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function i(){this._canvas.width=this._canvas.width,this._canvas.height=this._canvas.height,null!==this._backgroundImg&&(this._ctx.globalAlpha=1,this._ctx.drawImage(this._backgroundImg,0,0,this._canvas.width,this._canvas.height))}function r(){this._opacity&&(this._ctx.globalAlpha=.6,this._ctx.fillStyle="#FFF",this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}function a(){if(this._cropping){if(this._hiddenCanvas.width=this._hiddenCanvas.width,this._hiddenCanvas.height=this._hiddenCanvas.height,this._hiddenCtx.globalAlpha=1,this._hiddenCtx.rect(this._cropStatus.x,this._cropStatus.y,this._cropStatus.width,this._cropStatus.height),this._hiddenCtx.fillStyle="#000",this._hiddenCtx.fill(),this._ctx.globalAlpha=1,this._ctx.rect(this._cropStatus.x,this._cropStatus.y,this._cropStatus.width,this._cropStatus.height),this._ctx.strokeStyle="#4B8A99",this._ctx.lineWidth=2,this._ctx.stroke(),null!==this._backgroundImg){var t={x:this._backgroundImg.naturalWidth/this._canvas.width,y:this._backgroundImg.naturalHeight/this._canvas.height};this._ctx.drawImage(this._backgroundImg,this._cropStatus.x*t.x,this._cropStatus.y*t.y,this._cropStatus.width*t.x,this._cropStatus.height*t.y,this._cropStatus.x,this._cropStatus.y,this._cropStatus.width,this._cropStatus.height)}this._ctx.beginPath(),this._ctx.rect(this._cropStatus.x,this._cropStatus.y,this._boundSize,this._boundSize),this._ctx.fillStyle="#4B8A99",this._ctx.fill(),this._ctx.closePath(),this._hiddenCtx.beginPath(),this._hiddenCtx.rect(this._cropStatus.x,this._cropStatus.y,this._boundSize,this._boundSize),this._hiddenCtx.fillStyle="#AAA",this._hiddenCtx.fill(),this._hiddenCtx.closePath(),this._ctx.beginPath(),this._ctx.rect(this._cropStatus.x+this._cropStatus.width-this._boundSize,this._cropStatus.y,this._boundSize,this._boundSize),this._ctx.fillStyle="#4B8A99",this._ctx.fill(),this._ctx.closePath(),this._hiddenCtx.beginPath(),this._hiddenCtx.rect(this._cropStatus.x+this._cropStatus.width-this._boundSize,this._cropStatus.y,this._boundSize,this._boundSize),this._hiddenCtx.fillStyle="#BBB",this._hiddenCtx.fill(),this._hiddenCtx.closePath(),this._ctx.beginPath(),this._ctx.rect(this._cropStatus.x,this._cropStatus.y+this._cropStatus.height-this._boundSize,this._boundSize,this._boundSize),this._ctx.fillStyle="#0082d2",this._ctx.fill(),this._ctx.closePath(),this._hiddenCtx.beginPath(),this._hiddenCtx.rect(this._cropStatus.x,this._cropStatus.y+this._cropStatus.height-this._boundSize,this._boundSize,this._boundSize),this._hiddenCtx.fillStyle="#CCC",this._hiddenCtx.fill(),this._hiddenCtx.closePath(),this._ctx.beginPath(),this._ctx.rect(this._cropStatus.x+this._cropStatus.width-this._boundSize,this._cropStatus.y+this._cropStatus.height-this._boundSize,this._boundSize,this._boundSize),this._ctx.fillStyle="#0082d2",this._ctx.fill(),this._ctx.closePath(),this._hiddenCtx.beginPath(),this._hiddenCtx.rect(this._cropStatus.x+this._cropStatus.width-this._boundSize,this._cropStatus.y+this._cropStatus.height-this._boundSize,this._boundSize,this._boundSize),this._hiddenCtx.fillStyle="#DDD",this._hiddenCtx.fill(),this._hiddenCtx.closePath()}}function o(){i.call(this),r.call(this),a.call(this)}function s(t){function e(){this._cropStatus.x=t.x,this._cropStatus.y=t.y,this._cropStatus.width=t.width,this._cropStatus.height=t.height}t.x<0&&(t.x=0,t.width=this._cropStatus.width),t.y<0&&(t.y=0,t.height=this._cropStatus.height),t.x+t.width>this._canvas.width&&(t.x=this._cropStatus.x,t.width=this._cropStatus.width),t.y+t.height>this._canvas.height&&(t.y=this._cropStatus.y,t.height=this._cropStatus.height),t.height<this._cropBoxMinSize.height&&(t.height=this._cropBoxMinSize.height),t.width<this._cropBoxMinSize.width&&(t.width=this._cropBoxMinSize.width),e.call(this)}function l(t){var e=t.data.context,i=n(e._canvas,t),r={x:e._cropStatus.x+(i.x-e._mousePosition.x),y:e._cropStatus.y+(i.y-e._mousePosition.y),width:e._cropStatus.width,height:e._cropStatus.height};s.call(e,r),e._mousePosition.x=i.x,e._mousePosition.y=i.y,o.call(e)}function u(t){var e=t.data.context,i=n(e._canvas,t),r={x:e._cropStatus.x+(i.x-e._mousePosition.x),y:e._cropStatus.y+(i.y-e._mousePosition.y),width:e._cropStatus.width-(i.x-e._mousePosition.x),height:e._cropStatus.height-(i.y-e._mousePosition.y)};s.call(e,r),e._mousePosition.x=i.x,e._mousePosition.y=i.y,o.call(e)}function c(t){var e=t.data.context,i=n(e._canvas,t),r={x:e._cropStatus.x,y:e._cropStatus.y+(i.y-e._mousePosition.y),width:e._cropStatus.width+(i.x-e._mousePosition.x),height:e._cropStatus.height-(i.y-e._mousePosition.y)};s.call(e,r),e._mousePosition.x=i.x,e._mousePosition.y=i.y,o.call(e)}function d(t){var e=t.data.context,i=n(e._canvas,t),r={x:e._cropStatus.x+(i.x-e._mousePosition.x),y:e._cropStatus.y,width:e._cropStatus.width-(i.x-e._mousePosition.x),height:e._cropStatus.height+(i.y-e._mousePosition.y)};s.call(e,r),e._mousePosition.x=i.x,e._mousePosition.y=i.y,o.call(e)}function h(t){var e=t.data.context,i=n(e._canvas,t),r={x:e._cropStatus.x,y:e._cropStatus.y,width:e._cropStatus.width+(i.x-e._mousePosition.x),height:e._cropStatus.height+(i.y-e._mousePosition.y)};s.call(e,r),e._mousePosition.x=i.x,e._mousePosition.y=i.y,o.call(e)}function p(t){var e=t.data.context;e._mousePosition=n(e._canvas,t);var i=e.hitTest(e._mousePosition);switch(i){case"move":m(e._canvas).on("mousemove",{context:e,callback:t.data.callback},l);break;case"topLeft":m(e._canvas).on("mousemove",{context:e,callback:t.data.callback},u);break;case"topRight":m(e._canvas).on("mousemove",{context:e,callback:t.data.callback},c);break;case"bottomLeft":m(e._canvas).on("mousemove",{context:e,callback:t.data.callback},d);break;case"bottomRight":m(e._canvas).on("mousemove",{context:e,callback:t.data.callback},h)}t.preventDefault(),m(document).on("mouseup",{context:e,callback:t.data.callback},f),t.data.callback&&t.data.callback.mouseDown&&t.data.callback.mouseDown()}function f(t){var e=t.data.context;m(e._canvas).off("mousemove",l),m(e._canvas).off("mousemove",u),m(e._canvas).off("mousemove",c),m(e._canvas).off("mousemove",d),m(e._canvas).off("mousemove",h),m(document).off("mouseup",f),t.data.callback&&t.data.callback.mouseUp&&t.data.callback.mouseUp()}var m=t("jquery"),g=function(){this._cropping=!1,this._cropStatus={x:0,y:0,width:20,height:20},this._cropBoxMinSize={width:20,height:20},this._boundSize=8,this._backgroundImg=null,this._container=null,this._canvas=null,this._ctx=null,this._removed=!0,this._hiddenCanvas=document.createElement("canvas"),this._hiddenCtx=this._hiddenCanvas.getContext("2d"),this._mousePosition={x:0,y:0},this._opacity=!1,this._preCropStatus={x:0,y:0,width:20,height:20}};return g.prototype.hitTest=function(t){if(!this._removed){var e=this._hiddenCtx.getImageData(t.x,t.y,1,1).data,n="nothing";return 0!==e[3]&&(0===e[0]?n="move":170===e[0]?n="topLeft":187===e[0]?n="topRight":204===e[0]?n="bottomLeft":221===e[0]&&(n="bottomRight")),n}},g.prototype.setCanvasSize=function(t,e){this._removed||(this._canvas.width=t,this._canvas.height=e,this._hiddenCanvas.width=t,this._hiddenCanvas.height=e,i.call(this),this._cropping&&(r.call(this),a.call(this)))},g.prototype.create=function(t,e,n){var i;e instanceof jQuery?(i={width:e[0].offsetWidth,height:e[0].offsetHeight},e={position:"absolute",left:e.position().left,top:e.position().top}):(i={width:m(t)[0].offsetWidth,height:m(t)[0].offsetHeight},e=m.extend({position:"absolute"},e||{})),this._canvas=m("<canvas></canvas>").attr(i).css(e)[0],this._container=t,this._hiddenCanvas.width=this._canvas.width,this._hiddenCanvas.height=this._canvas.height,this._ctx=this._canvas.getContext("2d"),m(t).append(this._canvas),this._removed=!1,this._opacity=n?n.opacity:!0},g.prototype.remove=function(){this._removed||(this.off(),m(this._canvas).remove(),this._cropping=!1,this._cropStatus={x:0,y:0,width:20,height:20},this._cropBoxMinSize={width:20,height:20},this._boundSize=8,this._backgroundImg=null,this._container=null,this._canvas=null,this._ctx=null,this._removed=!0,this._hiddenCanvas=document.createElement("canvas"),this._hiddenCtx=this._hiddenCanvas.getContext("2d"),this._mousePosition={x:0,y:0},this._opacity=!1,this._preCropStatus={x:0,y:0,width:20,height:20})},g.prototype.setBackground=function(t,n){if(!this._removed){var r=this;if("string"==typeof t){var a=new Image;a.crossOrigin="anonymous",a.onload=function(){r._backgroundImg=a,i.call(r),n&&n()},a.src=t}else e(t)&&(r._backgroundImg=t,i.call(r))}},g.prototype.removeBackground=function(){this._removed||(this.backgroundImg=null)},g.prototype.on=function(t){if(!this._removed){var e=this;this._cropping||(this._cropping=!0,o.call(e),m(this._canvas).on("mousedown",{context:e,callback:t},p))}},g.prototype.off=function(){this._removed||this._cropping&&(this._cropping=!1,m(this._canvas).off("mousedown",p),i.call(this))},g.prototype.getData=function(){if(!this._removed){var t={x:this._backgroundImg.naturalWidth/this._canvas.width,y:this._backgroundImg.naturalHeight/this._canvas.height},e=document.createElement("canvas"),n=e.getContext("2d");return this._cropping?(e.width=t.x*this._cropStatus.width,e.height=t.y*this._cropStatus.height,n.drawImage(this._backgroundImg,t.x*this._cropStatus.x,t.y*this._cropStatus.y,e.width,e.height,0,0,e.width,e.height)):(e.width=this._backgroundImg.naturalWidth||this._backgroundImg.width,e.height=this._backgroundImg.naturalHeight||this._backgroundImg.height,n.drawImage(this._backgroundImg,0,0,e.width,e.height)),e.toDataURL()}},g.prototype.getStatus=function(){if(!this._removed){var t={};return t.backgroundImg=this._backgroundImg,t.isCropping=this._cropping,t.canvas=this._canvas,t.cropStatus=this._cropStatus,t.cropping=this._cropping,t}},g.prototype.getCanvasSize=function(){var t=this;return{width:t._canvas.width,height:t._canvas.height}},g})}(),function(){n("modules/newSize",["require"],function(){function t(t,e,n,i){var r,a,o;return r=n/i>t/e?1:0,1==r?(a=i,o=a*t/e):(o=n,a=o*e/t),{width:o,height:a}}return t})}(),n("text",["module"],function(t){var n,i,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,o=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,s="undefined"!=typeof location&&location.href,l=s&&location.protocol&&location.protocol.replace(/\:/,""),u=s&&location.hostname,c=s&&(location.port||void 0),d=[],h=t.config&&t.config()||{};return n={version:"2.0.3",strip:function(t){if(t){t=t.replace(a,"");var e=t.match(o);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=r[e];try{t=new ActiveXObject(n)}catch(i){}if(t){r=[n];break}}return t},parseName:function(t){var e=!1,n=t.indexOf("."),i=t.substring(0,n),r=t.substring(n+1,t.length);return n=r.indexOf("!"),-1!==n&&(e=r.substring(n+1,r.length),e="strip"===e,r=r.substring(0,n)),{moduleName:i,ext:r,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,i,r){var a,o,s,l=n.xdRegExp.exec(t);return l?(a=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(a&&a!==e||o&&o.toLowerCase()!==i.toLowerCase()||(s||o)&&s!==r)):!0},finishLoad:function(t,e,i,r){i=e?n.strip(i):i,h.isBuild&&(d[t]=i),r(i)},load:function(t,e,i,r){if(r.isBuild&&!r.inlineText)return void i();h.isBuild=r.isBuild;var a=n.parseName(t),o=a.moduleName+"."+a.ext,d=e.toUrl(o),p=h.useXhr||n.useXhr;!s||p(d,l,u,c)?n.get(d,function(e){n.finishLoad(t,a.strip,e,i)},function(t){i.error&&i.error(t)}):e([o],function(t){n.finishLoad(a.moduleName+"."+a.ext,a.strip,t,i)})},write:function(t,e,i){if(d.hasOwnProperty(e)){var r=n.jsEscape(d[e]);i.asModule(t+"!"+e,"define(function () { return '"+r+"';});\n")}},writeFile:function(t,e,i,r,a){var o=n.parseName(e),s=o.moduleName+"."+o.ext,l=i.toUrl(o.moduleName+"."+o.ext)+".js";n.load(s,i,function(){var e=function(t){return r(l,t)};e.asModule=function(t,e){return r.asModule(t,l,e)},n.write(t,s,e,a)},a)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(i=e.nodeRequire("fs"),n.get=function(t,e){var n=i.readFileSync(t,"utf8");0===n.indexOf("﻿")&&(n=n.substring(1)),e(n)}):"xhr"===h.env||!h.env&&n.createXhr()?n.get=function(t,e,i){var r=n.createXhr();r.open("GET",t,!0),h.onXhr&&h.onXhr(r,t),r.onreadystatechange=function(){var n,a;4===r.readyState&&(n=r.status,n>399&&600>n?(a=new Error(t+" HTTP status: "+n),a.xhr=r,i(a)):e(r.responseText))},r.send(null)}:("rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(n.get=function(t,e){var n,i,r="utf-8",a=new java.io.File(t),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),r)),l="";try{for(n=new java.lang.StringBuffer,i=s.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),n.append(i);null!==(i=s.readLine());)n.append(o),n.append(i);l=String(n.toString())}finally{s.close()}e(l)}),n}),n("text!pages/editor/editor.html",[],function(){return'<div data-bind="panel:{ width: 100, height: 310, title: \'Tools\', draggable: true, y: 100, x: 10 }">\n    <div data-part="content" data-bind="compose: \'parts/toolbar/toolbar\'"></div>\n</div>\n<div data-bind="panel:{ type: \'popup\', width: 625, height: 470, title: \'Sample Images\', closable: true, trigger: \'sample-btn\', draggable: true, visible: false }">\n    <div data-part="content" data-bind="compose: \'parts/sample/sample\'"></div>\n</div>\n<div data-bind="panel:{ type: \'popup\', width: 300, title: \'Styles\', closable: true, trigger: \'layers-btn\', draggable: true, visible: false }">\n    <div id="layers" data-part="content" data-bind="compose: \'parts/styles/styles\'"></div>\n</div>\n<div data-bind="panel:{ type: \'popup\', width: 150, height: 125, title: \'Alignment\', closable: true, trigger: \'alignment-btn\', draggable: true, visible: false }">\n    <div data-part="content" data-bind="compose: \'parts/alignment/alignment\'"></div>\n</div>\n<div data-bind="panel:{ type: \'popup\', width: 300, height: 250, title: \'Fields\', closable: true, trigger: \'fields-btn\', draggable: true, visible: false }">\n    <div data-part="content" data-bind="compose: \'parts/fields/fields\'"></div>\n</div>\n\n<div data-bind="compose: \'parts/yunique-toolbar/yunique-toolbar\'"></div>\n<div class="row">\n    <div class="col-md-12">\n        <!--Header-->\n        <div class="page-header">\n            <div class="row">\n                <div class="col-md-2 page-header-logo">\n                    <a href="main.html">\n                        <img src="assets/logo.png">\n                    </a>\n                </div>\n                <div class="col-md-10 buttons-panel">\n                    <button data-toggle="tooltip" title="Sample images" id="sample-btn" class="btn btn-markup btn-sample-image pull-left"></button>\n\n                    <div data-toggle="tooltip" title="Import image" class="fileUpload btn btn-markup btn-open">\n                        <input id="importInput" class="upload" data-bind="event: { change: imageImport}" type="file" file=[] accept="image/jpeg" />\n                    </div>\n                    <!--<button id="importImage" data-toggle="tooltip" title="Import image" class="btn btn-markup btn-open" data-bind="click: imageImportClicked.bind($data, \'importInput\')"></button>-->\n\n                    <button data-toggle="tooltip" title="Export image" href="#export" role="button" class="btn btn-markup btn-export" data-bind="click: exportClicked"></button>\n                    <button data-toggle="tooltip" title="Print" data-bind="click: imagePrint" class="btn btn-markup btn-print"></button>\n                    <button id="alignment-btn" data-toggle="tooltip" title="Alignment" class="btn btn-markup btn-align-left"></button>\n                    <button id="fields-btn" data-toggle="tooltip" title="Fields" class="btn btn-markup btn-fields"></button>\n                    <button id="btn_crop"  data-toggle="tooltip" title="Crop" role="button" class="btn btn-markup btn-crop" data-bind="click: cropClicked"></button>\n                    <button id="btn_hand" data-toggle="tooltip" title="Hand" data-bind="click: dragCanvas" class="btn btn-markup btn-hand"></button>\n                    <div class="slider slider-horizontal" data-bind="slider:{min:1,max:500,value:currentZoom}"></div>\n                    <!--<button data-toggle="tooltip" title="Layers" class="btn btn-markup btn-panel-layers pull-right" id="layersBtn"></button>-->\n                    <button data-toggle="tooltip" title="Styles" id="layers-btn" class="btn btn-markup btn-panel-layers pull-right"></button>\n                    <!--<button class="btn btn-markup btn-panel-layers pull-right" id="layersBtn"></button>-->\n                    <!--<button id="layers-btn" class="btn btn-markup btn-panel-layers pull-right"></button>-->\n                </div>\n\n            </div>\n        </div>\n        <!--/Header-->\n\n        <!--SVG canvas-->\n        <div class="row">\n            <div id="alert-area"></div>\n            <div id="containerForRoot" class="mainWrapper">\n                <div id="svgcanvas"></div>\n            </div>\n            <input id="hiddenInputForText" type="text" style="position: absolute; left: -999px; top: 100px;"/>\n        </div>\n        <!--/SVG canvas-->\n        <div class="modal loadingModal" id="loadingModal">\n        </div>\n    </div>\n\n    <div id="forContexMenu"></div>\n\n</div>\n'}),function(){n("browser",["require","jquery"],function(t){var e=t("jquery"),n="browser-not-supported.html",i={},r=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect}();if(i.supportsSvg=function(){return r},i.supportsSvg()){var a="http://www.w3.org/2000/svg",o=navigator.userAgent,s=document.createElementNS(a,"svg"),l=!!window.opera,u=o.indexOf("AppleWebKit")>=0,c=o.indexOf("Gecko/")>=0,d=o.indexOf("MSIE")>=0,h=o.indexOf("Chrome/")>=0,p=o.indexOf("Windows")>=0,f=o.indexOf("Macintosh")>=0,m="ontouchstart"in window,g=function(){return!!s.querySelector}(),v=function(){return!!document.evaluate}(),y=function(){var t=document.createElementNS(a,"path");t.setAttribute("d","M0,0 10,10");var e=t.pathSegList,n=t.createSVGPathSegLinetoAbs(5,5);try{return e.replaceItem(n,0),!0}catch(i){}return!1}(),b=function(){var t=document.createElementNS(a,"path");t.setAttribute("d","M0,0 10,10");var e=t.pathSegList,n=t.createSVGPathSegLinetoAbs(5,5);try{return e.insertItemBefore(n,0),!0}catch(i){}return!1}(),x=function(){var t=document.createElementNS(a,"svg"),e=document.createElementNS(a,"svg");document.documentElement.appendChild(t),e.setAttribute("x",5),t.appendChild(e);var n=document.createElementNS(a,"text");n.textContent="a",e.appendChild(n);var i=n.getStartPositionOfChar(0).x;return document.documentElement.removeChild(t),0===i}(),w=function(){var t=document.createElementNS(a,"svg");document.documentElement.appendChild(t);var e=document.createElementNS(a,"path");e.setAttribute("d","M0,0 C0,0 10,10 10,0"),t.appendChild(e);var n=e.getBBox();return document.documentElement.removeChild(t),n.height>4&&n.height<5}(),k=function(){var t=document.createElementNS(a,"svg");document.documentElement.appendChild(t);var e=document.createElementNS(a,"path");e.setAttribute("d","M0,0 10,0");var n=document.createElementNS(a,"path");n.setAttribute("d","M5,0 15,0");var i=document.createElementNS(a,"g");i.appendChild(e),i.appendChild(n),t.appendChild(i);var r=i.getBBox();return document.documentElement.removeChild(t),15==r.width}(),S=function(){return l}(),C=function(){var t=document.createElementNS(a,"rect");t.setAttribute("x",.1);var n=t.cloneNode(!1),i=-1==n.getAttribute("x").indexOf(",");return i||e.alert("NOTE: This version of Opera is known to contain bugs in SVG-edit.\n		Please upgrade to the <a href='http://opera.com'>latest version</a> in which the problems have been fixed."),i}(),E=function(){var t=document.createElementNS(a,"rect");return t.setAttribute("style","vector-effect:non-scaling-stroke"),"non-scaling-stroke"===t.style.vectorEffect}(),_=function(){var t=document.createElementNS(a,"rect"),e=t.transform.baseVal,n=s.createSVGTransform();return e.appendItem(n),e.getItem(0)==n}();i.isOpera=function(){return l},i.isWebkit=function(){return u},i.isGecko=function(){return c},i.isIE=function(){return d},i.isChrome=function(){return h},i.isWindows=function(){return p},i.isMac=function(){return f},i.isTouch=function(){return m},i.supportsSelectors=function(){return g},i.supportsXpath=function(){return v},i.supportsPathReplaceItem=function(){return y},i.supportsPathInsertItemBefore=function(){return b},i.supportsPathBBox=function(){return w},i.supportsHVLineContainerBBox=function(){return k},i.supportsGoodTextCharPos=function(){return x},i.supportsEditableText=function(){return S},i.supportsGoodDecimals=function(){return C},i.supportsNonScalingStroke=function(){return E},i.supportsNativeTransformLists=function(){return _}}else window.location=n;return i})}(),function(){n("svgtransformlist",["require","browser","jquery"],function(t){function e(t){var e=t.matrix,n="";switch(t.type){case 1:n="matrix("+[e.a,e.b,e.c,e.d,e.e,e.f].join(",")+")";break;case 2:n="translate("+e.e+","+e.f+")";break;case 3:n=e.a==e.d?"scale("+e.a+")":"scale("+e.a+","+e.d+")";break;case 4:var i=0,r=0;if(0!=t.angle){var a=1-e.a;r=(a*e.f+e.b*e.e)/(a*a+e.b*e.b),i=(e.e-e.b*r)/a}n="rotate("+t.angle+" "+i+","+r+")"}return n}var n=t("browser"),i=t("jquery"),r={},a=document.createElementNS("http://www.w3.org/2000/svg","svg"),o={};return r.SVGTransformList=function(t){this._elem=t||null,this._xforms=[],this._update=function(){for(var t="",n=(a.createSVGMatrix(),0);n<this.numberOfItems;++n){var i=this._list.getItem(n);t+=e(i)+" "}this._elem.setAttribute("transform",t)},this._list=this,this._init=function(){var t=this._elem.getAttribute("transform");if(t)for(var e=/\s*((scale|matrix|rotate|translate)\s*\(.*?\))\s*,?\s*/,n=!0;n;)if(n=t.match(e),t=t.replace(e,""),n&&n[1]){var r=n[1],o=r.split(/\s*\(/),s=o[0],l=o[1].match(/\s*(.*?)\s*\)/);l[1]=l[1].replace(/(\d)-/g,"$1 -");var u=l[1].split(/[, ]+/),c="abcdef".split(""),d=a.createSVGMatrix();i.each(u,function(t,e){u[t]=parseFloat(e),"matrix"==s&&(d[c[t]]=u[t])});var h=a.createSVGTransform(),p="set"+s.charAt(0).toUpperCase()+s.slice(1),f="matrix"==s?[d]:u;"scale"==s&&1==f.length?f.push(f[0]):"translate"==s&&1==f.length?f.push(0):"rotate"==s&&1==f.length&&(f.push(0),f.push(0)),h[p].apply(h,f),this._list.appendItem(h)}},this._removeFromOtherLists=function(t){if(t){var e=!1;for(var n in o){for(var i=o[n],r=0,a=i._xforms.length;a>r;++r)if(i._xforms[r]==t){e=!0,i.removeItem(r);break}if(e)break}}},this.numberOfItems=0,this.clear=function(){this.numberOfItems=0,this._xforms=[]},this.initialize=function(t){this.numberOfItems=1,this._removeFromOtherLists(t),this._xforms=[t]},this.getItem=function(t){if(t<this.numberOfItems&&t>=0)return this._xforms[t];throw{code:1}},this.insertItemBefore=function(t,e){var n=null;if(e>=0)if(e<this.numberOfItems){this._removeFromOtherLists(t);for(var i=new Array(this.numberOfItems+1),r=0;e>r;++r)i[r]=this._xforms[r];i[r]=t;for(var a=r+1;r<this.numberOfItems;++a,++r)i[a]=this._xforms[r];this.numberOfItems++,this._xforms=i,n=t,this._list._update()}else n=this._list.appendItem(t);return n},this.replaceItem=function(t,e){var n=null;return e<this.numberOfItems&&e>=0&&(this._removeFromOtherLists(t),this._xforms[e]=t,n=t,this._list._update()),n},this.removeItem=function(t){if(t<this.numberOfItems&&t>=0){for(var e=this._xforms[t],n=new Array(this.numberOfItems-1),i=0;t>i;++i)n[i]=this._xforms[i];for(var r=i;r<this.numberOfItems-1;++r,++i)n[r]=this._xforms[i+1];return this.numberOfItems--,this._xforms=n,this._list._update(),e}throw{code:1}},this.appendItem=function(t){return this._removeFromOtherLists(t),this._xforms.push(t),this.numberOfItems++,this._list._update(),t}},r.resetListMap=function(){o={}},r.removeElementFromListMap=function(t){t.id&&o[t.id]&&delete o[t.id]},r.getTransformList=function(t){if(!n.supportsNativeTransformLists()){var e=t.id;e||(e="temp");var i=o[e];return i&&"temp"!=e||(o[e]=new r.SVGTransformList(t),o[e]._init(),i=o[e]),i}return t.transform?t.transform.baseVal:t.gradientTransform?t.gradientTransform.baseVal:t.patternTransform?t.patternTransform.baseVal:null},r})}(),function(){n("math",["require","svgtransformlist"],function(t){var e=t("svgtransformlist"),n={},i=1e-14,r=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.transformPoint=function(t,e,n){return{x:n.a*t+n.c*e+n.e,y:n.b*t+n.d*e+n.f}},n.isIdentity=function(t){return 1===t.a&&0===t.b&&0===t.c&&1===t.d&&0===t.e&&0===t.f},n.matrixMultiply=function(){for(var t=arguments,e=t.length,n=t[e-1];e-->1;){var r=t[e-1];n=r.multiply(n)}return Math.abs(n.a)<i&&(n.a=0),Math.abs(n.b)<i&&(n.b=0),Math.abs(n.c)<i&&(n.c=0),Math.abs(n.d)<i&&(n.d=0),Math.abs(n.e)<i&&(n.e=0),Math.abs(n.f)<i&&(n.f=0),n},n.hasMatrixTransform=function(t){if(!t)return!1;for(var e=t.numberOfItems;e--;){var i=t.getItem(e);if(1==i.type&&!n.isIdentity(i.matrix))return!0}return!1},n.transformBox=function(t,e,i,r,a){var o={x:t,y:e},s={x:t+i,y:e},l={x:t+i,y:e+r},u={x:t,y:e+r},c=n.transformPoint;o=c(o.x,o.y,a);var d=o.x,h=o.x,p=o.y,f=o.y;return s=c(s.x,s.y,a),d=Math.min(d,s.x),h=Math.max(h,s.x),p=Math.min(p,s.y),f=Math.max(f,s.y),u=c(u.x,u.y,a),d=Math.min(d,u.x),h=Math.max(h,u.x),p=Math.min(p,u.y),f=Math.max(f,u.y),l=c(l.x,l.y,a),d=Math.min(d,l.x),h=Math.max(h,l.x),p=Math.min(p,l.y),f=Math.max(f,l.y),{tl:o,tr:s,bl:u,br:l,aabox:{x:d,y:p,width:h-d,height:f-p}}},n.transformListToTransform=function(t,e,i){if(null==t)return r.createSVGTransformFromMatrix(r.createSVGMatrix());var e=void 0==e?0:e,i=void 0==i?t.numberOfItems-1:i;if(e=parseInt(e),i=parseInt(i),e>i){var a=i;i=e,e=a}for(var o=r.createSVGMatrix(),s=e;i>=s;++s){var l=s>=0&&s<t.numberOfItems?t.getItem(s).matrix:r.createSVGMatrix();o=n.matrixMultiply(o,l)}return r.createSVGTransformFromMatrix(o)
},n.getMatrix=function(t){var i=e.getTransformList(t);return n.transformListToTransform(i).matrix},n.snapToAngle=function(t,e,n,i){var r=Math.PI/4,a=n-t,o=i-e,s=Math.atan2(o,a),l=Math.sqrt(a*a+o*o),u=Math.round(s/r)*r,c=t+l*Math.cos(u),d=e+l*Math.sin(u);return{x:c,y:d,a:u}},n.rectsIntersect=function(t,e){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y},n})}(),function(){n("units",["require","jquery"],function(t){var e=t("jquery"),n={},i=["x","x1","cx","rx","width"],r=["y","y1","cy","ry","height"],a=e.merge(["r","radius"],i);e.merge(a,r);var o,s={px:1};n.init=function(t){o=t;var e="http://www.w3.org/2000/svg",n=document.createElementNS(e,"svg");document.body.appendChild(n);var i=document.createElementNS(e,"rect");i.setAttribute("width","1em"),i.setAttribute("height","1ex"),i.setAttribute("x","1in"),n.appendChild(i);var r=i.getBBox();document.body.removeChild(n);var a=r.x;s.em=r.width,s.ex=r.height,s["in"]=a,s.cm=a/2.54,s.mm=a/25.4,s.pt=a/72,s.pc=a/6,s["%"]=0},n.getTypeMap=function(){return s},n.shortFloat=function(t){var i=o.getRoundDigits();return isNaN(t)?e.isArray(t)?n.shortFloat(t[0])+","+n.shortFloat(t[1]):parseFloat(t).toFixed(i)-0:+(+t).toFixed(i)},n.convertUnit=function(t,e){return e=e||o.getBaseUnit(),svgMarkupModule_unit.shortFloat(t/s[e])},n.setUnitAttr=function(t,e,n){if(!isNaN(n)){t.getAttribute(e)}t.setAttribute(e,n)};var l={line:["x1","x2","y1","y2"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],foreignObject:["x","y","width","height"],rect:["x","y","width","height"],image:["x","y","width","height"],use:["x","y","width","height"],text:["x","y"]};return n.convertAttrs=function(t){var e=t.tagName,n=o.getBaseUnit(),i=l[e];if(i)for(var r=i.length,a=0;r>a;a++){var u=i[a],c=t.getAttribute(u);c&&(isNaN(c)||t.setAttribute(u,c/s[n]+n))}},n.convertToNum=function(t,e){if(!isNaN(e))return e-0;if("%"===e.substr(-1)){var n=e.substr(0,e.length-1)/100,a=o.getWidth(),l=o.getHeight();return i.indexOf(t)>=0?n*a:r.indexOf(t)>=0?n*l:n*Math.sqrt(a*a+l*l)/Math.sqrt(2)}var u=e.substr(-2),n=e.substr(0,e.length-2);return n*s[u]},n.isValidUnit=function(t,n,i){var r=!1;if(a.indexOf(t)>=0)isNaN(n)?(n=n.toLowerCase(),e.each(s,function(t){if(!r){var e=new RegExp("^-?[\\d\\.]+"+t+"$");e.test(n)&&(r=!0)}})):r=!0;else{if("id"==t){var l=!1;try{var u=o.getElement(n);l=null==u||u===i}catch(c){}return l}r=!0}return r},n})}(),function(){n("svgutils",["require","jquery","browser","units","svgtransformlist"],function(t){function e(t){if(i.supportsHVLineContainerBBox())try{return t.getBBox()}catch(e){}var r=n.data(t,"ref"),a=null;if(r){var o=n(r).children().clone().attr("visibility","hidden");n(g).append(o),a=o.filter("line, path")}else a=n(t).find("line, path");var s=!1;if(a.length)if(a.each(function(){var t=this.getBBox();t.width&&t.height||(s=!0)}),s){var l=r?o:n(t).children();ret=getStrokedBBox(l)}else ret=t.getBBox();else ret=t.getBBox();return r&&o.remove(),ret}var n=t("jquery"),i=t("browser"),r=t("units"),a=t("svgtransformlist"),o={},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="http://www.w3.org/2000/svg",u="http://www.w3.org/1999/xlink",c="http://www.w3.org/XML/1998/namespace",d="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",h=d.split(","),p=null,f=null,m=null,g=null;return o.init=function(t){p=t,f=t.getDOMDocument(),m=t.getDOMContainer(),g=t.getSVGRoot()},o.toXml=function(t){return n("<p/>").text(t).html()},o.fromXml=function(t){return n("<p/>").html(t).text()},o.encode64=function(t){if(t=o.convertToXMLReferences(t),window.btoa)return window.btoa(t);var e,n,i,r,a,l,u,c=new Array(4*Math.floor((t.length+2)/3)),d=0,h=0;do e=t.charCodeAt(d++),n=t.charCodeAt(d++),i=t.charCodeAt(d++),r=e>>2,a=(3&e)<<4|n>>4,l=(15&n)<<2|i>>6,u=63&i,isNaN(n)?l=u=64:isNaN(i)&&(u=64),c[h++]=s.charAt(r),c[h++]=s.charAt(a),c[h++]=s.charAt(l),c[h++]=s.charAt(u);while(d<t.length);return c.join("")},o.decode64=function(t){if(window.atob)return window.atob(t);var e,n,i,r,a,o="",l="",u="",c=0;t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=s.indexOf(t.charAt(c++)),r=s.indexOf(t.charAt(c++)),a=s.indexOf(t.charAt(c++)),u=s.indexOf(t.charAt(c++)),e=i<<2|r>>4,n=(15&r)<<4|a>>2,l=(3&a)<<6|u,o+=String.fromCharCode(e),64!=a&&(o+=String.fromCharCode(n)),64!=u&&(o+=String.fromCharCode(l)),e=n=l="",i=r=a=u="";while(c<t.length);return unescape(o)},o.convertToXMLReferences=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=t[n]:i>127&&(e+="&#"+i+";")}return e},o.text2xml=function(t){t.indexOf("<svg:svg")>=0&&(t=t.replace(/<(\/?)svg:/g,"<$1").replace("xmlns:svg","xmlns"));var e;try{var n=window.DOMParser?new DOMParser:new ActiveXObject("Microsoft.XMLDOM");n.async=!1}catch(i){throw new Error("XML Parser could not be instantiated")}try{e=n.loadXML?n.loadXML(t)?n:!1:n.parseFromString(t,"text/xml")}catch(i){throw new Error("Error parsing XML string")}return e},o.bboxToObj=function(t){return{x:t.x,y:t.y,width:t.width,height:t.height}},o.walkTree=function(t,e){if(t&&1==t.nodeType){e(t);for(var n=t.childNodes.length;n--;)o.walkTree(t.childNodes.item(n),e)}},o.walkTreePost=function(t,e){if(t&&1==t.nodeType){for(var n=t.childNodes.length;n--;)o.walkTree(t.childNodes.item(n),e);e(t)}},o.getUrlFromAttr=function(t){if(t){if(0===t.indexOf('url("'))return t.substring(5,t.indexOf('"',6));if(0===t.indexOf("url('"))return t.substring(5,t.indexOf("'",6));if(0===t.indexOf("url("))return t.substring(4,t.indexOf(")"))}return null},o.getHref=function(t){return t.getAttributeNS(u,"href")},o.setHref=function(t,e){t.setAttributeNS(u,"xlink:href",e)},o.findDefs=function(t){var t=p.getSVGContent().documentElement,e=t.getElementsByTagNameNS(l,"defs");return e=e.length>0?e[0]:t.insertBefore(t.ownerDocument.createElementNS(l,"defs"),t.firstChild.nextSibling)},o.getPathBBox=function(t){for(var e=t.pathSegList,n=e.numberOfItems,i=[[],[]],r=e.getItem(0),a=[r.x,r.y],o=0;n>o;o++){var s=e.getItem(o);if("undefined"!=typeof s.x)if(i[0].push(a[0]),i[1].push(a[1]),s.x1){for(var l=[s.x1,s.y1],u=[s.x2,s.y2],c=[s.x,s.y],d=0;2>d;d++){var h=function(t){return Math.pow(1-t,3)*a[d]+3*Math.pow(1-t,2)*t*l[d]+3*(1-t)*Math.pow(t,2)*u[d]+Math.pow(t,3)*c[d]},p=6*a[d]-12*l[d]+6*u[d],f=-3*a[d]+9*l[d]-9*u[d]+3*c[d],m=3*l[d]-3*a[d];if(0!=f){var g=Math.pow(p,2)-4*m*f;if(!(0>g)){var v=(-p+Math.sqrt(g))/(2*f);v>0&&1>v&&i[d].push(h(v));var y=(-p-Math.sqrt(g))/(2*f);y>0&&1>y&&i[d].push(h(y))}}else{if(0==p)continue;var b=-m/p;b>0&&1>b&&i[d].push(h(b))}}a=c}else i[0].push(s.x),i[1].push(s.y)}var x=Math.min.apply(null,i[0]),w=Math.max.apply(null,i[0])-x,k=Math.min.apply(null,i[1]),S=Math.max.apply(null,i[1])-k;return{x:x,y:k,width:w,height:S}},o.getBBox=function(t){var r=t||p.geSelectedElements()[0];if(1!=t.nodeType)return null;var a=null,s=r.nodeName;switch(s){case"text":if(""===r.textContent)r.textContent="a",a=r.getBBox(),r.textContent="";else try{a=r.getBBox()}catch(l){}break;case"path":if(i.supportsPathBBox())try{a=r.getBBox()}catch(l){}else a=o.getPathBBox(r);break;case"g":case"a":a=e(r);break;default:if("use"===s&&(a=e(r,!0)),"use"===s){a||(a=r.getBBox());var u={};u.width=a.width,u.height=a.height,u.x=a.x+parseFloat(r.getAttribute("x")||0),u.y=a.y+parseFloat(r.getAttribute("y")||0),a=u}else if(~h.indexOf(s))try{a=r.getBBox()}catch(l){var c=n(r).closest("foreignObject");if(c.length)try{a=c[0].getBBox()}catch(l){a=null}else a=null}}return a&&(a=o.bboxToObj(a)),a},o.getRotationAngle=function(t,e){var n=t||p.getSelectedElements()[0],i=a.getTransformList(n);if(!i)return 0;for(var r=i.numberOfItems,o=0;r>o;++o){var s=i.getItem(o);if(4==s.type)return e?s.angle*Math.PI/180:s.angle}return 0},o.getElem=i.supportsSelectors()?function(t){return g.querySelector("#"+t)}:i.supportsXpath()?function(t){return f.evaluate('svg:svg[@id="svgroot"]//svg:*[@id="'+t+'"]',m,function(){return"http://www.w3.org/2000/svg"},9,null).singleNodeValue}:function(t){return n(g).find("[id="+t+"]")[0]},o.assignAttributes=function(t,e,n,a){n||(n=0);var o=null;i.isOpera()||g.suspendRedraw(n);for(var s in e){var l="xml:"===s.substr(0,4)?c:"xlink:"===s.substr(0,6)?u:null;l?t.setAttributeNS(l,s,e[s]):a?r.setUnitAttr(t,s,e[s]):t.setAttribute(s,e[s])}i.isOpera()||g.unsuspendRedraw(o)},o.cleanupElement=function(t){var e=g.suspendRedraw(60),n={"fill-opacity":1,"stop-opacity":1,opacity:1,stroke:"none","stroke-dasharray":"none","stroke-linejoin":"miter","stroke-linecap":"butt","stroke-opacity":1,"stroke-width":1,rx:0,ry:0};for(var i in n){var r=n[i];t.getAttribute(i)==r&&t.removeAttribute(i)}g.unsuspendRedraw(e)},o})}(),function(){n("sanitize",["require","jquery","browser","svgutils"],function(t){var e=t("jquery"),n=t("browser"),i=t("svgutils"),r={},a="http://www.w3.org/1999/xlink",o="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/",l="http://svg-edit.googlecode.com",u="http://www.w3.org/1999/xhtml",c="http://www.w3.org/1998/Math/MathML",d={};d[a]="xlink",d[o]="xml",d[s]="xmlns",d[l]="se",d[u]="xhtml",d[c]="mathml";var h={};e.each(d,function(t,e){h[e]=t});var p={a:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","mask","opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","xlink:href","xlink:title"],circle:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","r","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],clipPath:["class","clipPathUnits","id"],defs:[],style:["type"],desc:[],ellipse:["class","clip-path","clip-rule","cx","cy","fill","fill-opacity","fill-rule","filter","id","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],feGaussianBlur:["class","color-interpolation-filters","id","requiredFeatures","stdDeviation"],filter:["class","color-interpolation-filters","filterRes","filterUnits","height","id","primitiveUnits","requiredFeatures","width","x","xlink:href","y"],foreignObject:["class","font-size","height","id","opacity","requiredFeatures","style","transform","width","x","y"],g:["class","clip-path","clip-rule","id","display","fill","fill-opacity","fill-rule","filter","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","font-family","font-size","font-style","font-weight","text-anchor"],image:["class","clip-path","clip-rule","filter","height","id","mask","opacity","requiredFeatures","style","systemLanguage","transform","width","x","xlink:href","xlink:title","y"],line:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","x1","x2","y1","y2"],linearGradient:["class","id","gradientTransform","gradientUnits","requiredFeatures","spreadMethod","systemLanguage","x1","x2","xlink:href","y1","y2"],marker:["id","class","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","systemLanguage","viewBox"],mask:["class","height","id","maskContentUnits","maskUnits","width","x","y"],metadata:["class","id"],path:["class","clip-path","clip-rule","d","fill","fill-opacity","fill-rule","filter","id","marker-end","marker-mid","marker-start","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],pattern:["class","height","id","patternContentUnits","patternTransform","patternUnits","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:href","y"],polygon:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","id","class","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],polyline:["class","clip-path","clip-rule","id","fill","fill-opacity","fill-rule","filter","marker-end","marker-mid","marker-start","mask","opacity","points","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform"],radialGradient:["class","cx","cy","fx","fy","gradientTransform","gradientUnits","id","r","requiredFeatures","spreadMethod","systemLanguage","xlink:href"],rect:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask","opacity","requiredFeatures","rx","ry","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","width","x","y"],stop:["class","id","offset","requiredFeatures","stop-color","stop-opacity","style","systemLanguage"],svg:["class","clip-path","clip-rule","filter","id","height","mask","preserveAspectRatio","requiredFeatures","style","systemLanguage","viewBox","width","x","xmlns","xmlns:se","xmlns:xlink","y"],"switch":["class","id","requiredFeatures","systemLanguage"],symbol:["class","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","opacity","preserveAspectRatio","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","transform","viewBox"],text:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","transform","x","xml:space","y"],textPath:["class","id","method","requiredFeatures","spacing","startOffset","style","systemLanguage","transform","xlink:href"],title:[],tspan:["class","clip-path","clip-rule","dx","dy","fill","fill-opacity","fill-rule","filter","font-family","font-size","font-style","font-weight","id","mask","opacity","requiredFeatures","rotate","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","systemLanguage","text-anchor","textLength","transform","x","xml:space","y"],use:["class","clip-path","clip-rule","fill","fill-opacity","fill-rule","filter","height","id","mask","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","style","transform","width","x","xlink:href","y"],annotation:["encoding"],"annotation-xml":["encoding"],maction:["actiontype","other","selection"],math:["class","id","display","xmlns"],menclose:["notation"],merror:[],mfrac:["linethickness"],mi:["mathvariant"],mmultiscripts:[],mn:[],mo:["fence","lspace","maxsize","minsize","rspace","stretchy"],mover:[],mpadded:["lspace","width","height","depth","voffset"],mphantom:[],mprescripts:[],mroot:[],mrow:["xlink:href","xlink:type","xmlns:xlink"],mspace:["depth","height","width"],msqrt:[],mstyle:["displaystyle","mathbackground","mathcolor","mathvariant","scriptlevel"],msub:[],msubsup:[],msup:[],mtable:["align","columnalign","columnlines","columnspacing","displaystyle","equalcolumns","equalrows","frame","rowalign","rowlines","rowspacing","width"],mtd:["columnalign","columnspan","rowalign","rowspan"],mtext:[],mtr:["columnalign","rowalign"],munder:[],munderover:[],none:[],semantics:[]},f={};return e.each(p,function(t,n){var i={};e.each(n,function(t,e){if(e.indexOf(":")>=0){var n=e.split(":");i[n[1]]=h[n[0]]}else i[e]="xmlns"==e?s:null}),f[t]=i}),r.getNSMap=function(){return d},r.sanitizeSvg=function(t){if(3==t.nodeType&&(t.nodeValue=t.nodeValue.replace(/^\s+|\s+$/g,""),t.nodeValue.length||t.parentNode.removeChild(t)),1==t.nodeType){var o=t.ownerDocument,u=t.parentNode;if(o&&u){var c=p[t.nodeName],h=f[t.nodeName];if(void 0!=c){for(var m=[],g=t.attributes.length;g--;){var v=t.attributes.item(g),y=v.nodeName,b=v.localName,x=v.namespaceURI;if(h.hasOwnProperty(b)&&x==h[b]&&x!=s||x==s&&d[v.nodeValue]||(0==y.indexOf("se:")&&m.push([y,v.nodeValue]),t.removeAttributeNS(x,b)),n.isGecko())switch(y){case"transform":case"gradientTransform":case"patternTransform":var w=v.nodeValue.replace(/(\d)-/g,"$1 -");t.setAttribute(y,w)}if("style"==y){for(var k=v.nodeValue.split(";"),S=k.length;S--;){var C=k[S].split(":");c.indexOf(C[0])>=0&&t.setAttribute(C[0],C[1])}t.removeAttribute("style")}}e.each(m,function(e,n){t.setAttributeNS(l,n[0],n[1])});var E=i.getHref(t);if(E&&["filter","linearGradient","pattern","radialGradient","textPath","use"].indexOf(t.nodeName)>=0&&"#"!=E[0]&&(i.setHref(t,""),t.removeAttributeNS(a,"href")),"use"==t.nodeName&&!i.getHref(t))return void u.removeChild(t);for(e.each(["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],function(e,n){var r=t.getAttribute(n);r&&(r=i.getUrlFromAttr(r),r&&"#"!==r[0]&&(t.setAttribute(n,""),t.removeAttribute(n)))}),g=t.childNodes.length;g--;)r.sanitizeSvg(t.childNodes.item(g))}else{for(var _=[];t.hasChildNodes();)_.push(u.insertBefore(t.firstChild,t));u.removeChild(t);for(var g=_.length;g--;)r.sanitizeSvg(_[g])}}}},r})}(),function(){n("history",["require","require","svgtransformlist","svgutils"],function(t){var e=(t("require"),t("svgtransformlist")),n=t("svgutils"),i={};i.HistoryEventTypes={BEFORE_APPLY:"before_apply",AFTER_APPLY:"after_apply",BEFORE_UNAPPLY:"before_unapply",AFTER_UNAPPLY:"after_unapply"};return i.MoveElementCommand=function(t,e,n,i){this.elem=t,this.text=i?"Move "+t.tagName+" to "+i:"Move "+t.tagName,this.oldNextSibling=e,this.oldParent=n,this.newNextSibling=t.nextSibling,this.newParent=t.parentNode},i.MoveElementCommand.type=function(){return"svgMarkupModule_history.MoveElementCommand"},i.MoveElementCommand.prototype.type=i.MoveElementCommand.type,i.MoveElementCommand.prototype.getText=function(){return this.text},i.MoveElementCommand.prototype.apply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_APPLY,this),this.elem=this.newParent.insertBefore(this.elem,this.newNextSibling),t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_APPLY,this)},i.MoveElementCommand.prototype.unapply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_UNAPPLY,this),this.elem=this.oldParent.insertBefore(this.elem,this.oldNextSibling),t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_UNAPPLY,this)},i.MoveElementCommand.prototype.elements=function(){return[this.elem]},i.InsertElementCommand=function(t,e){this.elem=t,this.text=e||"Create "+t.tagName,this.parent=t.parentNode,this.nextSibling=this.elem.nextSibling},i.InsertElementCommand.type=function(){return"svgMarkupModule_history.InsertElementCommand"},i.InsertElementCommand.prototype.type=i.InsertElementCommand.type,i.InsertElementCommand.prototype.getText=function(){return this.text},i.InsertElementCommand.prototype.apply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_APPLY,this),this.elem=this.parent.insertBefore(this.elem,this.nextSibling),t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_APPLY,this)},i.InsertElementCommand.prototype.unapply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_UNAPPLY,this),this.parent=this.elem.parentNode,this.elem=this.elem.parentNode.removeChild(this.elem),t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_UNAPPLY,this)},i.InsertElementCommand.prototype.elements=function(){return[this.elem]},i.RemoveElementCommand=function(t,n,i,r){this.elem=t,this.text=r||"Delete "+t.tagName,this.nextSibling=n,this.parent=i,e.removeElementFromListMap(t)},i.RemoveElementCommand.type=function(){return"svgMarkupModule_history.RemoveElementCommand"},i.RemoveElementCommand.prototype.type=i.RemoveElementCommand.type,i.RemoveElementCommand.prototype.getText=function(){return this.text},i.RemoveElementCommand.prototype.apply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_APPLY,this),e.removeElementFromListMap(this.elem),this.parent=this.elem.parentNode,this.elem=this.parent.removeChild(this.elem),t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_APPLY,this)},i.RemoveElementCommand.prototype.unapply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_UNAPPLY,this),e.removeElementFromListMap(this.elem),null==this.nextSibling&&window.console&&console.log("Error: reference element was lost"),this.parent.insertBefore(this.elem,this.nextSibling),t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_UNAPPLY,this)},i.RemoveElementCommand.prototype.elements=function(){return[this.elem]},i.ChangeElementCommand=function(t,e,i){this.elem=t,this.text=i?"Change "+t.tagName+" "+i:"Change "+t.tagName,this.newValues={},this.oldValues=e;for(var r in e)this.newValues[r]="#text"==r?t.textContent:"#href"==r?n.getHref(t):t.getAttribute(r)},i.ChangeElementCommand.type=function(){return"svgMarkupModule_history.ChangeElementCommand"},i.ChangeElementCommand.prototype.type=i.ChangeElementCommand.type,i.ChangeElementCommand.prototype.getText=function(){return this.text},i.ChangeElementCommand.prototype.apply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_APPLY,this);var e=!1;for(var r in this.newValues)this.newValues[r]?"#text"==r?this.elem.textContent=this.newValues[r]:"#href"==r?n.setHref(this.elem,this.newValues[r]):this.elem.setAttribute(r,this.newValues[r]):"#text"==r?this.elem.textContent="":(this.elem.setAttribute(r,""),this.elem.removeAttribute(r)),"transform"==r&&(e=!0);if(!e){var a=n.getRotationAngle(this.elem);if(a){var o=elem.getBBox(),s=o.x+o.width/2,l=o.y+o.height/2,u=["rotate(",a," ",s,",",l,")"].join("");u!=elem.getAttribute("transform")&&elem.setAttribute("transform",u)}}return t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_APPLY,this),!0},i.ChangeElementCommand.prototype.unapply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_UNAPPLY,this);var r=!1;for(var a in this.oldValues)this.oldValues[a]?"#text"==a?this.elem.textContent=this.oldValues[a]:"#href"==a?n.setHref(this.elem,this.oldValues[a]):this.elem.setAttribute(a,this.oldValues[a]):"#text"==a?this.elem.textContent="":this.elem.removeAttribute(a),"transform"==a&&(r=!0);if(!r){var o=n.getRotationAngle(this.elem);if(o){var s=elem.getBBox(),l=s.x+s.width/2,u=s.y+s.height/2,c=["rotate(",o," ",l,",",u,")"].join("");c!=elem.getAttribute("transform")&&elem.setAttribute("transform",c)}}return e.removeElementFromListMap(this.elem),t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_UNAPPLY,this),!0},i.ChangeElementCommand.prototype.elements=function(){return[this.elem]},i.BatchCommand=function(t){this.text=t||"Batch Command",this.stack=[]},i.BatchCommand.type=function(){return"svgMarkupModule_history.BatchCommand"},i.BatchCommand.prototype.type=i.BatchCommand.type,i.BatchCommand.prototype.getText=function(){return this.text},i.BatchCommand.prototype.apply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_APPLY,this);for(var e=this.stack.length,n=0;e>n;++n)this.stack[n].apply(t);t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_APPLY,this)},i.BatchCommand.prototype.unapply=function(t){t&&t.handleHistoryEvent(i.HistoryEventTypes.BEFORE_UNAPPLY,this);for(var e=this.stack.length-1;e>=0;e--)this.stack[e].unapply(t);t&&t.handleHistoryEvent(i.HistoryEventTypes.AFTER_UNAPPLY,this)},i.BatchCommand.prototype.elements=function(){for(var t=[],e=this.stack.length;e--;)for(var n=this.stack[e].elements(),i=n.length;i--;)-1==t.indexOf(n[i])&&t.push(n[i]);return t},i.BatchCommand.prototype.addSubCommand=function(t){this.stack.push(t)},i.BatchCommand.prototype.isEmpty=function(){return 0==this.stack.length},i.UndoManager=function(t){this.handler_=t||null,this.undoStackPointer=0,this.undoStack=[],this.undoChangeStackPointer=-1,this.undoableChangeStack=[]},i.UndoManager.prototype.resetUndoStack=function(){this.undoStack=[],this.undoStackPointer=0},i.UndoManager.prototype.getUndoStackSize=function(){return this.undoStackPointer},i.UndoManager.prototype.getRedoStackSize=function(){return this.undoStack.length-this.undoStackPointer},i.UndoManager.prototype.getNextUndoCommandText=function(){return this.undoStackPointer>0?this.undoStack[this.undoStackPointer-1].getText():""},i.UndoManager.prototype.getNextRedoCommandText=function(){return this.undoStackPointer<this.undoStack.length?this.undoStack[this.undoStackPointer].getText():""},i.UndoManager.prototype.undo=function(){if(this.undoStackPointer>0){var t=this.undoStack[--this.undoStackPointer];t.unapply(this.handler_)}},i.UndoManager.prototype.redo=function(){if(this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0){var t=this.undoStack[this.undoStackPointer++];t.apply(this.handler_)}},i.UndoManager.prototype.addCommandToHistory=function(t){this.undoStackPointer<this.undoStack.length&&this.undoStack.length>0&&(this.undoStack=this.undoStack.splice(0,this.undoStackPointer)),this.undoStack.push(t),this.undoStackPointer=this.undoStack.length},i.UndoManager.prototype.beginUndoableChange=function(t,e){for(var n=++this.undoChangeStackPointer,i=e.length,r=new Array(i),a=new Array(i);i--;){var o=e[i];null!=o&&(a[i]=o,r[i]=o.getAttribute(t))}this.undoableChangeStack[n]={attrName:t,oldValues:r,elements:a}},i.UndoManager.prototype.finishUndoableChange=function(){for(var t=this.undoChangeStackPointer--,e=this.undoableChangeStack[t],n=e.elements.length,r=e.attrName,a=new i.BatchCommand("Change "+r);n--;){var o=e.elements[n];if(null!=o){var s={};s[r]=e.oldValues[n],s[r]!=o.getAttribute(r)&&a.addSubCommand(new i.ChangeElementCommand(o,s,r))}}return this.undoableChangeStack[t]=null,a},i})}(),function(){n("select",["require","jquery","browser","math","svgutils","svgtransformlist"],function(t){var e,n,i,r,a=t("jquery"),o=t("browser"),s=t("math"),l=t("svgutils"),u=t("svgtransformlist"),c={};return r=o.isTouch()?10:4,c.Selector=function(t,n){this.id=t,this.selectedElement=n,this.locked=!0,this.selectorGroup=e.createSVGElement({element:"g",attr:{id:"selectorGroup"+this.id}}),this.selectorRect=this.selectorGroup.appendChild(e.createSVGElement({element:"path",attr:{id:"selectedBox"+this.id,fill:"none",stroke:"#22C","stroke-width":"1","stroke-dasharray":"5,5",style:"pointer-events:none"}})),this.gripCoords={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null},this.reset(this.selectedElement)},c.Selector.prototype.reset=function(t){this.locked=!0,this.selectedElement=t,this.resize(),this.selectorGroup.setAttribute("display","inline")},c.Selector.prototype.updateGripCursors=function(t){var e=[],n=Math.round(t/45);0>n&&(n+=8);for(var r in i.selectorGrips)e.push(r);for(;n>0;)e.push(e.shift()),n--;var a=0;for(var r in i.selectorGrips)i.selectorGrips[r].setAttribute("style","cursor:"+e[a]+"-resize"),a++},c.Selector.prototype.showGrips=function(t){var e=t?"inline":"none";i.selectorGripsGroup.setAttribute("display",e);var n=this.selectedElement;this.hasGrips=t,n&&t&&(this.selectorGroup.appendChild(i.selectorGripsGroup),this.updateGripCursors(l.getRotationAngle(n)))},c.Selector.prototype.resize=function(){var t=this.selectorRect,n=i,o=n.selectorGrips,c=this.selectedElement,d=c.getAttribute("stroke-width"),h=e.currentZoom(),p=1/h;"none"===c.getAttribute("stroke")||isNaN(d)||(p+=d/2);var f=c.tagName;"text"===f&&(p+=2/h);var m=u.getTransformList(c),g=s.transformListToTransform(m).matrix;g.e*=h,g.f*=h;var v=l.getBBox(c);if("g"===f&&!a.data(c,"gsvg")){var y=e.getStrokedBBox(c.childNodes);y&&(v=y)}var b=v.x,x=v.y,w=v.width,k=v.height,v={x:b,y:x,width:w,height:k};p*=h;var S=s.transformBox(b*h,x*h,w*h,k*h,g),C=S.aabox,E=C.x-p,_=C.y-p,T=C.width+2*p,A=C.height+2*p,N=E+T/2,P=_+A/2,I=l.getRotationAngle(c);if(I){var M=e.svgRoot().createSVGTransform();M.setRotate(-I,N,P);var B=M.matrix;S.tl=s.transformPoint(S.tl.x,S.tl.y,B),S.tr=s.transformPoint(S.tr.x,S.tr.y,B),S.bl=s.transformPoint(S.bl.x,S.bl.y,B),S.br=s.transformPoint(S.br.x,S.br.y,B);var L=S.tl,D=L.x,O=L.y,j=L.x,V=L.y,F=Math.min,R=Math.max;D=F(D,F(S.tr.x,F(S.bl.x,S.br.x)))-p,O=F(O,F(S.tr.y,F(S.bl.y,S.br.y)))-p,j=R(j,R(S.tr.x,R(S.bl.x,S.br.x)))+p,V=R(V,R(S.tr.y,R(S.bl.y,S.br.y)))+p,E=D,_=O,T=j-D,A=V-O}var $=e.svgRoot().suspendRedraw(100),q="M"+E+","+_+" L"+(E+T)+","+_+" "+(E+T)+","+(_+A)+" "+E+","+(_+A)+"z";t.setAttribute("d",q);var G=I?"rotate("+[I,N,P].join(",")+")":"";this.selectorGroup.setAttribute("transform",G),this.gripCoords={nw:[E,_],ne:[E+T,_],sw:[E,_+A],se:[E+T,_+A],n:[E+T/2,_],w:[E,_+A/2],e:[E+T,_+A/2],s:[E+T/2,_+A]};for(var H in this.gripCoords){var z=this.gripCoords[H];o[H].setAttribute("cx",z[0]),o[H].setAttribute("cy",z[1])}n.rotateGripConnector.setAttribute("x1",E+T/2),n.rotateGripConnector.setAttribute("y1",_),n.rotateGripConnector.setAttribute("x2",E+T/2),n.rotateGripConnector.setAttribute("y2",_-5*r),n.rotateGrip.setAttribute("cx",E+T/2),n.rotateGrip.setAttribute("cy",_-5*r),e.svgRoot().unsuspendRedraw($)},c.SelectorManager=function(){this.selectorParentGroup=null,this.rubberBandBox=null,this.selectors=[],this.selectorMap={},this.selectorGrips={nw:null,n:null,ne:null,e:null,se:null,s:null,sw:null,w:null},this.selectorGripsGroup=null,this.rotateGripConnector=null,this.rotateGrip=null,this.initGroup()},c.SelectorManager.prototype.initGroup=function(){this.selectorParentGroup&&this.selectorParentGroup.parentNode&&this.selectorParentGroup.parentNode.removeChild(this.selectorParentGroup),this.selectorParentGroup=e.createSVGElement({element:"g",attr:{id:"selectorParentGroup"}}),this.selectorGripsGroup=e.createSVGElement({element:"g",attr:{display:"none"}}),this.selectorParentGroup.appendChild(this.selectorGripsGroup),e.svgRoot().appendChild(this.selectorParentGroup),this.selectorMap={},this.selectors=[],this.rubberBandBox=null;for(var t in this.selectorGrips){var i=e.createSVGElement({element:"circle",attr:{id:"selectorGrip_resize_"+t,fill:"#22C",r:r,style:"cursor:"+t+"-resize","stroke-width":2,"pointer-events":"all"}});a.data(i,"dir",t),a.data(i,"type","resize"),this.selectorGrips[t]=this.selectorGripsGroup.appendChild(i)}if(this.rotateGripConnector=this.selectorGripsGroup.appendChild(e.createSVGElement({element:"line",attr:{id:"selectorGrip_rotateconnector",stroke:"#22C","stroke-width":"1"}})),this.rotateGrip=this.selectorGripsGroup.appendChild(e.createSVGElement({element:"circle",attr:{id:"selectorGrip_rotate",fill:"lime",r:r,stroke:"#22C","stroke-width":2,style:"cursor:url("+n.imgPath+"rotate.png) 12 12, auto;"}})),a.data(this.rotateGrip,"type","rotate"),!a("#canvasBackground").length){var s=n.dimensions,l=e.createSVGElement({element:"svg",attr:{id:"canvasBackground",width:s[0],height:s[1],x:0,y:0,overflow:o.isWebkit()?"none":"visible",style:"pointer-events:none"}}),u=e.createSVGElement({element:"rect",attr:{width:"100%",height:"100%",x:0,y:0,"stroke-width":1,stroke:"#000",fill:"#FFF",style:"pointer-events:none"}});l.appendChild(u),e.svgRoot().insertBefore(l,e.svgContent())}},c.SelectorManager.prototype.requestSelector=function(t){if(null==t)return null;var e=this.selectors.length;if("object"==typeof this.selectorMap[t.id])return this.selectorMap[t.id].locked=!0,this.selectorMap[t.id];for(var n=0;e>n;++n)if(this.selectors[n]&&!this.selectors[n].locked)return this.selectors[n].locked=!0,this.selectors[n].reset(t),this.selectorMap[t.id]=this.selectors[n],this.selectors[n];return this.selectors[e]=new c.Selector(e,t),this.selectorParentGroup.appendChild(this.selectors[e].selectorGroup),this.selectorMap[t.id]=this.selectors[e],this.selectors[e]
},c.SelectorManager.prototype.releaseSelector=function(t){if(null!=t)for(var e=this.selectors.length,n=this.selectorMap[t.id],i=0;e>i;++i)if(this.selectors[i]&&this.selectors[i]==n){0==n.locked&&console.log("WARNING! selector was released but was already unlocked"),delete this.selectorMap[t.id],n.locked=!1,n.selectedElement=null,n.showGrips(!1);try{n.selectorGroup.setAttribute("display","none")}catch(r){}break}},c.SelectorManager.prototype.getRubberBandBox=function(){return this.rubberBandBox||(this.rubberBandBox=this.selectorParentGroup.appendChild(e.createSVGElement({element:"rect",attr:{id:"selectorRubberBand",fill:"#22C","fill-opacity":.15,stroke:"#22C","stroke-width":.5,display:"none",style:"pointer-events:none"}}))),this.rubberBandBox},c.init=function(t,r){n=t,e=r,i=new c.SelectorManager},c.getSelectorManager=function(){return i},c})}(),function(){n("draw",["require","jquery","browser","svgutils"],function(t){var e=t("jquery"),n=t("browser"),i=t("svgutils"),r={},a="http://www.w3.org/2000/svg",o="http://svg-edit.googlecode.com",s="http://www.w3.org/2000/xmlns/",l="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",u=l.split(","),c={LET_DOCUMENT_DECIDE:0,ALWAYS_RANDOMIZE:1,NEVER_RANDOMIZE:2},d=c.LET_DOCUMENT_DECIDE;return r.Layer=function(t,e){this.name_=t,this.group_=e},r.Layer.prototype.getName=function(){return this.name_},r.Layer.prototype.getGroup=function(){return this.group_},r.randomizeIds=function(t,e){d=0==t?c.NEVER_RANDOMIZE:c.ALWAYS_RANDOMIZE,d!=c.ALWAYS_RANDOMIZE||e.getNonce()?d==c.NEVER_RANDOMIZE&&e.getNonce()&&e.clearNonce():e.setNonce(Math.floor(100001*Math.random()))},r.Drawing=function(t,e){if(!t||!t.tagName||!t.namespaceURI||"svg"!=t.tagName||t.namespaceURI!=a)throw"Error: svgMarkupModule_draw.Drawing instance initialized without a <svg> element";this.svgElem_=t,this.obj_num=0,this.idPrefix=e||"svg_",this.releasedNums=[],this.all_layers=[],this.current_layer=null,this.nonce_="";var n=this.svgElem_.getAttributeNS(o,"nonce");n&&d!=c.NEVER_RANDOMIZE?this.nonce_=n:d==c.ALWAYS_RANDOMIZE&&this.setNonce(Math.floor(100001*Math.random()))},r.Drawing.prototype.getElem_=function(t){return this.svgElem_.querySelector?this.svgElem_.querySelector("#"+t):e(this.svgElem_).find("[id="+t+"]")[0]},r.Drawing.prototype.getSvgElem=function(){return this.svgElem_},r.Drawing.prototype.getNonce=function(){return this.nonce_},r.Drawing.prototype.setNonce=function(t){this.svgElem_.setAttributeNS(s,"xmlns:se",o),this.svgElem_.setAttributeNS(o,"se:nonce",t),this.nonce_=t},r.Drawing.prototype.clearNonce=function(){this.nonce_=""},r.Drawing.prototype.getId=function(){return this.nonce_?this.idPrefix+this.nonce_+"_"+this.obj_num:this.idPrefix+this.obj_num},r.Drawing.prototype.getNextId=function(){var t=this.obj_num,e=!1;this.releasedNums.length>0?(this.obj_num=this.releasedNums.pop(),e=!0):this.obj_num++;for(var n=this.getId();this.getElem_(n);)e&&(this.obj_num=t,e=!1),this.obj_num++,n=this.getId();return e&&(this.obj_num=t),n},r.Drawing.prototype.releaseId=function(t){var e=this.idPrefix+(this.nonce_?this.nonce_+"_":"");if("string"!=typeof t||0!=t.indexOf(e))return!1;var n=parseInt(t.substr(e.length));return"number"!=typeof n||0>=n||-1!=this.releasedNums.indexOf(n)?!1:(this.releasedNums.push(n),!0)},r.Drawing.prototype.getNumLayers=function(){return this.all_layers.length},r.Drawing.prototype.hasLayer=function(t){for(var e=0;e<this.getNumLayers();e++)if(this.all_layers[e][0]==t)return!0;return!1},r.Drawing.prototype.getLayerName=function(t){return t>=0&&t<this.getNumLayers()?this.all_layers[t][0]:""},r.Drawing.prototype.getCurrentLayer=function(){return this.current_layer},r.Drawing.prototype.getCurrentLayerName=function(){for(var t=0;t<this.getNumLayers();++t)if(this.all_layers[t][1]==this.current_layer)return this.getLayerName(t);return""},r.Drawing.prototype.setCurrentLayer=function(t){for(var e=0;e<this.getNumLayers();++e)if(t==this.getLayerName(e))return this.current_layer!=this.all_layers[e][1]&&(this.current_layer.setAttribute("style","pointer-events:none"),this.current_layer=this.all_layers[e][1],this.current_layer.setAttribute("style","pointer-events:auto")),!0;return!1},r.Drawing.prototype.deleteCurrentLayer=function(){if(this.current_layer&&this.getNumLayers()>1){var t=this.current_layer.parentNode,e=(this.current_layer.nextSibling,t.removeChild(this.current_layer));return this.identifyLayers(),e}return null},r.Drawing.prototype.identifyLayers=function(){this.all_layers=[];for(var t=this.svgElem_.childNodes.length,r=[],o=[],s=null,l=!1,c=0;t>c;++c){var d=this.svgElem_.childNodes.item(c);if(d&&1==d.nodeType)if("g"==d.tagName){l=!0;var h=e("title",d).text();!h&&n.isOpera()&&d.querySelectorAll&&(h=e(d.querySelectorAll("title")).text()),h?(o.push(h),this.all_layers.push([h,d]),s=d,i.walkTree(d,function(t){t.setAttribute("style","pointer-events:inherit")}),s.setAttribute("style","pointer-events:none")):r.push(d)}else if(~u.indexOf(d.nodeName)){{i.getBBox(d)}r.push(d)}}var p=this.svgElem_.ownerDocument;if(r.length>0||!l){for(var c=1;o.indexOf("Layer "+c)>=0;)c++;var f="Layer "+c;s=p.createElementNS(a,"g");var m=p.createElementNS(a,"title");m.textContent=f,s.appendChild(m);for(var g=0;g<r.length;++g)s.appendChild(r[g]);this.svgElem_.appendChild(s),this.all_layers.push([f,s])}i.walkTree(s,function(t){t.setAttribute("style","pointer-events:inherit")}),this.current_layer=s,this.current_layer.setAttribute("style","pointer-events:auto")},r.Drawing.prototype.createLayer=function(t){var e=this.svgElem_.ownerDocument,n=e.createElementNS(a,"g"),i=e.createElementNS(a,"title");return i.textContent=t,n.appendChild(i),this.svgElem_.appendChild(n),this.identifyLayers(),n},r.Drawing.prototype.getLayerVisibility=function(t){for(var e=null,n=0;n<this.getNumLayers();++n)if(this.getLayerName(n)==t){e=this.all_layers[n][1];break}return e?"none"!=e.getAttribute("display"):!1},r.Drawing.prototype.setLayerVisibility=function(t,e){if(typeof e!=typeof!0)return null;for(var n=null,i=0;i<this.getNumLayers();++i)if(this.getLayerName(i)==t){n=this.all_layers[i][1];break}if(!n)return null;var r=n.getAttribute("display");return r||(r="inline"),n.setAttribute("display",e?"inline":"none"),n},r.Drawing.prototype.getLayerOpacity=function(t){for(var e=0;e<this.getNumLayers();++e)if(this.getLayerName(e)==t){var n=this.all_layers[e][1],i=n.getAttribute("opacity");return i||(i="1.0"),parseFloat(i)}return null},r.Drawing.prototype.setLayerOpacity=function(t,e){if(!("number"!=typeof e||0>e||e>1))for(var n=0;n<this.getNumLayers();++n)if(this.getLayerName(n)==t){var i=this.all_layers[n][1];i.setAttribute("opacity",e);break}},r})}(),function(){n("path",["require","jquery","browser","math","svgutils"],function(t){var e=t("jquery"),n=t("browser"),i=t("math"),a=t("svgutils"),o={},s="http://www.w3.org/2000/svg",l={pathNodeTooltip:"Drag node to move it. Double-click node to change segment type",pathCtrlPtTooltip:"Drag control point to adjust curve properties"},u={2:["x","y"],4:["x","y"],6:["x","y","x1","y1","x2","y2"],8:["x","y","x1","y1"],10:["x","y","r1","r2","angle","largeArcFlag","sweepFlag"],12:["x"],14:["y"],16:["x","y","x2","y2"],18:["x","y"]},c=[],d=!0,h={};o.setLinkControlPoints=function(t){d=t},o.path=null;var p=null;o.init=function(t){p=t,c=[0,"ClosePath"];var n=["Moveto","Lineto","CurvetoCubic","CurvetoQuadratic","Arc","LinetoHorizontal","LinetoVertical","CurvetoCubicSmooth","CurvetoQuadraticSmooth"];e.each(n,function(t,e){c.push(e+"Abs"),c.push(e+"Rel")})},o.insertItemBefore=function(t,e,i){var r=t.pathSegList;if(n.supportsPathInsertItemBefore())return void r.insertItemBefore(e,i);for(var a=r.numberOfItems,o=[],s=0;a>s;s++){var l=r.getItem(s);o.push(l)}r.clear();for(var s=0;a>s;s++)s==i&&r.appendItem(e),r.appendItem(o[s])},o.ptObjToArr=function(t,e){for(var n=u[t],i=n.length,r=Array(i),a=0;i>a;a++)r[a]=e[n[a]];return r},o.getGripPt=function(t,e){var n={x:e?e.x:t.item.x,y:e?e.y:t.item.y},r=t.path;if(r.matrix){var a=i.transformPoint(n.x,n.y,r.matrix);n=a}return n.x*=p.getCurrentZoom(),n.y*=p.getCurrentZoom(),n},o.getPointFromGrip=function(t,e){var n={x:t.x,y:t.y};if(e.matrix){var t=i.transformPoint(n.x,n.y,e.imatrix);n.x=t.x,n.y=t.y}return n.x/=p.getCurrentZoom(),n.y/=p.getCurrentZoom(),n},o.addPointGrip=function(t,n,i){var r=o.getGripContainer(),u=a.getElem("pathpointgrip_"+t);if(!u){u=document.createElementNS(s,"circle"),a.assignAttributes(u,{id:"pathpointgrip_"+t,display:"none",r:4,fill:"#0FF",stroke:"#00F","stroke-width":2,cursor:"move",style:"pointer-events:all","xlink:title":l.pathNodeTooltip}),u=r.appendChild(u);var c=e("#pathpointgrip_"+t);c.dblclick(function(){o.path&&o.path.setSegType()})}return n&&i&&a.assignAttributes(u,{cx:n,cy:i,display:"inline"}),u},o.getGripContainer=function(){var t=a.getElem("pathpointgrip_container");if(!t){var e=a.getElem("selectorParentGroup");t=e.appendChild(document.createElementNS(s,"g")),t.id="pathpointgrip_container"}return t},o.addCtrlGrip=function(t){var e=a.getElem("ctrlpointgrip_"+t);return e?e:(e=document.createElementNS(s,"circle"),a.assignAttributes(e,{id:"ctrlpointgrip_"+t,display:"none",r:4,fill:"#0FF",stroke:"#55F","stroke-width":1,cursor:"move",style:"pointer-events:all","xlink:title":l.pathCtrlPtTooltip}),o.getGripContainer().appendChild(e),e)},o.getCtrlLine=function(t){var e=a.getElem("ctrlLine_"+t);return e?e:(e=document.createElementNS(s,"line"),a.assignAttributes(e,{id:"ctrlLine_"+t,stroke:"#555","stroke-width":1,style:"pointer-events:none"}),o.getGripContainer().appendChild(e),e)},o.getPointGrip=function(t,e){var n=t.index,i=o.addPointGrip(n);if(e){var r=o.getGripPt(t);a.assignAttributes(i,{cx:r.x,cy:r.y,display:"inline"})}return i},o.getControlPoints=function(t){var e=t.item,n=t.index;if(!("x1"in e&&"x2"in e))return null;for(var i={},r=(o.getGripContainer(),o.path.segs[n-1].item),s=[r,e],l=1;3>l;l++){var u=n+"c"+l,c=i["c"+l+"_line"]=o.getCtrlLine(u),d=o.getGripPt(t,{x:e["x"+l],y:e["y"+l]}),h=o.getGripPt(t,{x:s[l-1].x,y:s[l-1].y});a.assignAttributes(c,{x1:d.x,y1:d.y,x2:h.x,y2:h.y,display:"inline"}),i["c"+l+"_line"]=c,pointGrip=i["c"+l]=o.addCtrlGrip(u),a.assignAttributes(pointGrip,{cx:d.x,cy:d.y,display:"inline"}),i["c"+l]=pointGrip}return i},o.replacePathSeg=function(t,e,i,r){var a=r||o.path.elem,s="createSVGPathSeg"+c[t],l=a[s].apply(a,i);if(n.supportsPathReplaceItem())a.pathSegList.replaceItem(l,e);else{for(var u=a.pathSegList,d=u.numberOfItems,h=[],p=0;d>p;p++){var f=u.getItem(p);h.push(f)}u.clear();for(var p=0;d>p;p++)u.appendItem(p==e?l:h[p])}},o.getSegSelector=function(t,e){var n=t.index,i=a.getElem("segline_"+n);if(!i){var r=o.getGripContainer();i=document.createElementNS(s,"path"),a.assignAttributes(i,{id:"segline_"+n,display:"none",fill:"none",stroke:"#0FF","stroke-width":2,style:"pointer-events:none",d:"M0,0 0,0"}),r.appendChild(i)}if(e){var l=t.prev;if(!l)return i.setAttribute("display","none"),i;var u=o.getGripPt(l);o.replacePathSeg(2,0,[u.x,u.y],i);for(var c=o.ptObjToArr(t.type,t.item,!0),d=0;d<c.length;d+=2){var u=o.getGripPt(t,{x:c[d],y:c[d+1]});c[d]=u.x,c[d+1]=u.y}o.replacePathSeg(t.type,1,c,i)}return i},o.smoothControlPoints=this.smoothControlPoints=function(t,e,n){var i=t.x-n.x,r=t.y-n.y,a=e.x-n.x,o=e.y-n.y;if(!(0==i&&0==r||0==a&&0==o)){var s=Math.atan2(r,i),l=Math.atan2(o,a),u=Math.sqrt(i*i+r*r),c=Math.sqrt(a*a+o*o),d=p.getSVGRoot().createSVGPoint(),h=p.getSVGRoot().createSVGPoint();0>s&&(s+=2*Math.PI),0>l&&(l+=2*Math.PI);var f,m,g=Math.abs(s-l),v=Math.abs(Math.PI-g)/2;return s-l>0?(f=g<Math.PI?s+v:s-v,m=g<Math.PI?l-v:l+v):(f=g<Math.PI?s-v:s+v,m=g<Math.PI?l+v:l-v),d.x=u*Math.cos(f)+n.x,d.y=u*Math.sin(f)+n.y,h.x=c*Math.cos(m)+n.x,h.y=c*Math.sin(m)+n.y,[d,h]}return void 0},o.Segment=function(t,e){this.selected=!1,this.index=t,this.item=e,this.type=e.pathSegType,this.ctrlpts=[],this.ptgrip=null,this.segsel=null},o.Segment.prototype.showCtrlPts=function(t){for(var e in this.ctrlpts)this.ctrlpts[e].setAttribute("display",t?"inline":"none")},o.Segment.prototype.selectCtrls=function(t){e("#ctrlpointgrip_"+this.index+"c1, #ctrlpointgrip_"+this.index+"c2").attr("fill",t?"#0FF":"#EEE")},o.Segment.prototype.show=function(t){this.ptgrip&&(this.ptgrip.setAttribute("display",t?"inline":"none"),this.segsel.setAttribute("display",t?"inline":"none"),this.showCtrlPts(t))},o.Segment.prototype.select=function(t){this.ptgrip&&(this.ptgrip.setAttribute("stroke",t?"#0FF":"#00F"),this.segsel.setAttribute("display",t?"inline":"none"),this.ctrlpts&&this.selectCtrls(t),this.selected=t)},o.Segment.prototype.addGrip=function(){this.ptgrip=o.getPointGrip(this,!0),this.ctrlpts=o.getControlPoints(this,!0),this.segsel=o.getSegSelector(this,!0)},o.Segment.prototype.update=function(t){if(this.ptgrip){var e=o.getGripPt(this);a.assignAttributes(this.ptgrip,{cx:e.x,cy:e.y}),o.getSegSelector(this,!0),this.ctrlpts&&(t&&(this.item=o.path.elem.pathSegList.getItem(this.index),this.type=this.item.pathSegType),o.getControlPoints(this))}},o.Segment.prototype.move=function(t,e){var n=this.item;if(this.ctrlpts)var i=[n.x+=t,n.y+=e,n.x1,n.y1,n.x2+=t,n.y2+=e];else var i=[n.x+=t,n.y+=e];if(o.replacePathSeg(this.type,this.index,i),this.next&&this.next.ctrlpts){var r=this.next.item,a=[r.x,r.y,r.x1+=t,r.y1+=e,r.x2,r.y2];o.replacePathSeg(this.next.type,this.next.index,a)}if(this.mate){var n=this.mate.item,s=[n.x+=t,n.y+=e];o.replacePathSeg(this.mate.type,this.mate.index,s)}this.update(!0),this.next&&this.next.update(!0)},o.Segment.prototype.setLinked=function(t){var e,n,i;if(2==t){if(n=1,e=this.next,!e)return;i=this.item}else{if(n=2,e=this.prev,!e)return;i=e.item}var r=e.item;r["x"+n]=i.x+(i.x-this.item["x"+t]),r["y"+n]=i.y+(i.y-this.item["y"+t]);var a=[r.x,r.y,r.x1,r.y1,r.x2,r.y2];o.replacePathSeg(e.type,e.index,a),e.update(!0)},o.Segment.prototype.moveCtrl=function(t,e,n){var i=this.item;i["x"+t]+=e,i["y"+t]+=n;var r=[i.x,i.y,i.x1,i.y1,i.x2,i.y2];o.replacePathSeg(this.type,this.index,r),this.update(!0)},o.Segment.prototype.setType=function(t,e){o.replacePathSeg(t,this.index,e),this.type=t,this.item=o.path.elem.pathSegList.getItem(this.index),this.showCtrlPts(6===t),this.ctrlpts=o.getControlPoints(this),this.update(!0)},o.Path=function(t){if(!t||"path"!==t.tagName)throw"s_path.Path constructed without a <path> element";this.elem=t,this.segs=[],this.selected_pts=[],o.path=this,this.init()},o.Path.prototype.init=function(){e(o.getGripContainer()).find("*").attr("display","none");var t=this.elem.pathSegList,n=t.numberOfItems;this.segs=[],this.selected_pts=[],this.first_seg=null;for(var i=0;n>i;i++){var r=t.getItem(i),a=new o.Segment(i,r);a.path=this,this.segs.push(a)}for(var s=this.segs,l=null,i=0;n>i;i++){var u=s[i],c=i+1>=n?null:s[i+1],d=0>i-1?null:s[i-1];if(2===u.type){if(d&&1!==d.type){var h=s[l];h.next=s[l+1],h.next.prev=h,h.addGrip()}l=i}else if(c&&1===c.type)u.next=s[l+1],u.next.prev=u,u.mate=s[l],u.addGrip(),null==this.first_seg&&(this.first_seg=u);else if(c)1!==u.type&&(u.addGrip(),c&&2!==c.type&&(u.next=c,u.next.prev=u));else if(1!==u.type){var h=s[l];h.next=s[l+1],h.next.prev=h,h.addGrip(),u.addGrip(),this.first_seg||(this.first_seg=s[l])}}return this},o.Path.prototype.eachSeg=function(t){for(var e=this.segs.length,n=0;e>n;n++){var i=t.call(this.segs[n],n);if(i===!1)break}},o.Path.prototype.addSeg=function(t){var e=this.segs[t];if(e.prev){var n,i=e.prev;switch(e.item.pathSegType){case 4:var r=(e.item.x+i.item.x)/2,a=(e.item.y+i.item.y)/2;n=this.elem.createSVGPathSegLinetoAbs(r,a);break;case 6:var s=(i.item.x+e.item.x1)/2,l=(e.item.x1+e.item.x2)/2,u=(e.item.x2+e.item.x)/2,c=(s+l)/2,d=(l+u)/2,r=(c+d)/2,h=(i.item.y+e.item.y1)/2,p=(e.item.y1+e.item.y2)/2,f=(e.item.y2+e.item.y)/2,m=(h+p)/2,g=(p+f)/2,a=(m+g)/2;n=this.elem.createSVGPathSegCurvetoCubicAbs(r,a,s,h,c,m);var v=[e.item.x,e.item.y,d,g,u,f];o.replacePathSeg(e.type,t,v)}o.insertItemBefore(this.elem,n,t)}},o.Path.prototype.deleteSeg=function(t){var e=this.segs[t],n=this.elem.pathSegList;e.show(!1);var i=e.next;if(e.mate){var r=[i.item.x,i.item.y];o.replacePathSeg(2,i.index,r),o.replacePathSeg(4,e.index,r),n.removeItem(e.mate.index)}else if(e.prev)n.removeItem(t);else{var r=(e.item,[i.item.x,i.item.y]);o.replacePathSeg(2,e.next.index,r),n.removeItem(t)}},o.Path.prototype.subpathIsClosed=function(t){var e=!1;return o.path.eachSeg(function(n){return t>=n?!0:2===this.type?!1:1===this.type?(e=!0,!1):void 0}),e},o.Path.prototype.removePtFromSelection=function(t){var e=this.selected_pts.indexOf(t);-1!=e&&(this.segs[t].select(!1),this.selected_pts.splice(e,1))},o.Path.prototype.clearSelection=function(){this.eachSeg(function(){this.select(!1)}),this.selected_pts=[]},o.Path.prototype.storeD=function(){this.last_d=this.elem.getAttribute("d")},o.Path.prototype.show=function(t){return this.eachSeg(function(){this.show(t)}),t&&this.selectPt(this.first_seg.index),this},o.Path.prototype.movePts=function(t,e){for(var n=this.selected_pts.length;n--;){var i=this.segs[this.selected_pts[n]];i.move(t,e)}},o.Path.prototype.moveCtrl=function(t,e){var n=this.segs[this.selected_pts[0]];n.moveCtrl(this.dragctrl,t,e),d&&n.setLinked(this.dragctrl)},o.Path.prototype.setSegType=function(t){this.storeD();for(var e,n=this.selected_pts.length;n--;){var i=this.selected_pts[n],r=this.segs[i],a=r.prev;if(a){if(!t){e="Toggle Path Segment Type";var s=r.type;t=6==s?4:6}t-=0;var l,u=r.item.x,c=r.item.y,d=a.item.x,h=a.item.y;switch(t){case 6:if(r.olditem){var p=r.olditem;l=[u,c,p.x1,p.y1,p.x2,p.y2]}else{var f=u-d,m=c-h,g=d+f/3,v=h+m/3,y=u-f/3,b=c-m/3;l=[u,c,g,v,y,b]}break;case 4:l=[u,c],r.olditem=r.item}r.setType(t,l)}}o.path.endChanges(e)},o.Path.prototype.selectPt=function(t,e){this.clearSelection(),null==t&&this.eachSeg(function(e){this.prev&&(t=e)}),this.addPtsToSelection(t),e&&(this.dragctrl=e,d&&this.segs[t].setLinked(e))},o.Path.prototype.update=function(){var t=this.elem;return a.getRotationAngle(t)?(this.matrix=i.getMatrix(t),this.imatrix=this.matrix.inverse()):(this.matrix=null,this.imatrix=null),this.eachSeg(function(e){this.item=t.pathSegList.getItem(e),this.update()}),this},o.getPath_=function(t){var e=h[t.id];return e||(e=h[t.id]=new o.Path(t)),e},o.removePath_=function(t){t in h&&delete h[t]};var f=function(t,e){return dx=t-oldcx,dy=e-oldcy,r=Math.sqrt(dx*dx+dy*dy),theta=Math.atan2(dy,dx)+angle,dx=r*Math.cos(theta)+oldcx,dy=r*Math.sin(theta)+oldcy,dx-=newcx,dy-=newcy,r=Math.sqrt(dx*dx+dy*dy),theta=Math.atan2(dy,dx)-angle,{x:(r*Math.cos(theta)+newcx)/1,y:(r*Math.sin(theta)+newcy)/1}};return o.recalcRotatedPath=function(){var t=o.path.elem,e=a.getRotationAngle(t,!0);if(e){var n=a.getBBox(t),i=o.path.oldbbox,r=i.x+i.width/2,s=i.y+i.height/2,l=n.x+n.width/2,u=n.y+n.height/2,c=l-r,d=u-s,h=Math.sqrt(c*c+d*d),p=Math.atan2(d,c)+e;l=h*Math.cos(p)+r,u=h*Math.sin(p)+s;for(var m=t.pathSegList,g=m.numberOfItems;g;){g-=1;var v=m.getItem(g),y=v.pathSegType;if(1!=y){var b=f(v.x,v.y),x=[b.x,b.y];null!=v.x1&&null!=v.x2&&(c_vals1=f(v.x1,v.y1),c_vals2=f(v.x2,v.y2),x.splice(x.length,0,c_vals1.x,c_vals1.y,c_vals2.x,c_vals2.y)),o.replacePathSeg(y,g,x)}}n=a.getBBox(t);var w=svgroot.createSVGTransform(),k=s_transformlist.getTransformList(t);w.setRotate(180*e/Math.PI,l,u),k.replaceItem(w,0)}},o.clearData=function(){h={}},o})}(),function(){n("svgcanvas",["require","jquery","browser","svgtransformlist","math","units","svgutils","sanitize","history","select","draw","path"],function(t){var e=t("jquery"),n=t("browser"),i=t("svgtransformlist"),r=t("math"),a=t("units"),o=t("svgutils"),s=t("sanitize"),l=t("history"),u=t("select"),c=t("draw"),d=t("path");window.console||(window.console={},window.console.log=function(){},window.console.dir=function(){}),window.opera&&(window.console.log=function(t){opera.postError(t)},window.console.dir=function(){}),function(){var t=jQuery.fn.attr,n="http://www.w3.org/2000/svg";jQuery.fn.attr=function(i,r){var a=this.length;if(!a)return t.apply(this,arguments);for(var o=0;a>o;o++){var s=this[o];if(s.namespaceURI!==n)return t.apply(this,arguments);if(void 0!==r)s.setAttribute(i,r);else{if(e.isArray(i)){for(var l=i.length,u={};l--;){var c=i[l],d=s.getAttribute(c);(d||"0"===d)&&(d=isNaN(d)?d:d-0),u[c]=d}return u}if("object"!=typeof i){var d=s.getAttribute(i);return(d||"0"===d)&&(d=isNaN(d)?d:d-0),d}for(var h in i)s.setAttribute(h,i[h])}}return this}}(),e.SvgCanvas=function(t,h){function p(t,n){for(var i=o.getBBox(t),r=0;2>r;r++){var a=0===r?"fill":"stroke",s=t.getAttribute(a);if(s&&0===s.indexOf("url(")){var l=qe(s);if("linearGradient"===l.tagName){var u=l.getAttribute("x1")||0,c=l.getAttribute("y1")||0,d=l.getAttribute("x2")||1,h=l.getAttribute("y2")||0;u=i.width*u+i.x,c=i.height*c+i.y,d=i.width*d+i.x,h=i.height*h+i.y;var p=V(u,c,n),f=V(d,h,n),m={};m.x1=(p.x-i.x)/i.width,m.y1=(p.y-i.y)/i.height,m.x2=(f.x-i.x)/i.width,m.y2=(f.y-i.y)/i.height;var g=l.cloneNode(!0);e(g).attr(m),g.id=Oe(),fn().appendChild(g),t.setAttribute(a,"url(#"+g.id+")")}}}}var f="http://www.w3.org/2000/svg",m="http://www.w3.org/1999/xlink",g="http://svg-edit.googlecode.com",v="http://www.w3.org/1999/xhtml",b="http://www.w3.org/1998/Math/MathML",w={show_outside_canvas:!0,selectNew:!0,dimensions:[640,480]};h&&e.extend(w,h);var k=w.dimensions,S=this,C=t.ownerDocument,E=C.importNode(o.text2xml('<svg id="svgroot" xmlns="'+f+'" xlinkns="'+m+'" width="'+k[0]+'" height="'+k[1]+'" x="'+k[0]+'" y="'+k[1]+'" overflow="visible"><defs><filter id="canvashadow" filterUnits="objectBoundingBox"><feGaussianBlur in="SourceAlpha" stdDeviation="4" result="blur"/><feOffset in="blur" dx="5" dy="5" result="offsetBlur"/><feMerge><feMergeNode in="offsetBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs></svg>').documentElement,!0);t.appendChild(E);var _=C.createElementNS(f,"svg"),T=S.clearSvgContentElement=function(){for(;_.firstChild;)_.removeChild(_.firstChild);e(_).attr({id:"svgcontent",width:k[0],height:k[1],x:k[0],y:k[1],overflow:w.show_outside_canvas?"visible":"hidden",xmlns:f,"xmlns:se":g,"xmlns:xlink":m}).appendTo(E);var t=C.createComment("");_.appendChild(t)};T();var A="svg_";S.setIdPrefix=function(t){A=t},S.current_drawing_=new c.Drawing(_,A);var N=S.getCurrentDrawing=function(){return S.current_drawing_},P=1,I=null,M={shape:{fill:("none"==w.initFill.color?"":"#")+w.initFill.color,fill_paint:null,fill_opacity:w.initFill.opacity,stroke:"#"+w.initStroke.color,stroke_paint:null,stroke_opacity:w.initStroke.opacity,stroke_width:w.initStroke.width,stroke_dasharray:"none",stroke_linejoin:"miter",stroke_linecap:"butt",opacity:w.initOpacity}};M.text=e.extend(!0,{},M.shape),e.extend(M.text,{fill:"#000000",stroke_width:0,font_size:24,font_family:"serif"});var B=M.shape,L=new Array(1),D=this.addSvgElementFromJson=function(t){var e=o.getElem(t.attr.id),n=N().getCurrentLayer();return e&&t.element!=e.tagName&&(n.removeChild(e),e=null),e||(e=C.createElementNS(f,t.element),n&&(I||n).appendChild(e)),t.curStyles&&o.assignAttributes(e,{fill:B.fill,stroke:B.stroke,"stroke-width":B.stroke_width,"stroke-dasharray":B.stroke_dasharray,"stroke-linejoin":B.stroke_linejoin,"stroke-linecap":B.stroke_linecap,"stroke-opacity":B.stroke_opacity,"fill-opacity":B.fill_opacity,opacity:B.opacity,style:"pointer-events:inherit"},100),o.assignAttributes(e,t.attr,100),o.cleanupElement(e),e},O=S.getTransformList=i.getTransformList,V=r.transformPoint,F=S.matrixMultiply=r.matrixMultiply,R=S.hasMatrixTransform=r.hasMatrixTransform,$=S.transformListToTransform=r.transformListToTransform,q=r.snapToAngle,G=r.getMatrix;a.init({getBaseUnit:function(){return w.baseUnit},getElement:o.getElem,getHeight:function(){return _.getAttribute("height")/P},getWidth:function(){return _.getAttribute("width")/P},getRoundDigits:function(){return ye.round_digits}});var H=S.convertToNum=a.convertToNum;o.init({getDOMDocument:function(){return C},getDOMContainer:function(){return t},getSVGRoot:function(){return E},getSelectedElements:function(){return L},getSVGContent:function(){return _}});var z=S.getUrlFromAttr=o.getUrlFromAttr,U=S.getHref=o.getHref,W=S.setHref=o.setHref,X=o.getPathBBox,Y=(S.getBBox=o.getBBox,S.getRotationAngle=o.getRotationAngle),Z=S.getElem=o.getElem,Q=S.assignAttributes=o.assignAttributes,K=this.cleanupElement=o.cleanupElement,J=s.getNSMap(),te=S.sanitizeSvg=s.sanitizeSvg,ee=l.MoveElementCommand,ne=l.InsertElementCommand,ie=l.RemoveElementCommand,re=l.ChangeElementCommand,ae=l.BatchCommand;S.undoMgr=new l.UndoManager({handleHistoryEvent:function(t,e){var n=l.HistoryEventTypes;if(t==n.BEFORE_UNAPPLY||t==n.BEFORE_APPLY)S.clearSelection();else if(t==n.AFTER_APPLY||t==n.AFTER_UNAPPLY){var i=e.elements();S.pathActions.clear(),je("changed",i);var r=e.type(),a=t==n.AFTER_APPLY;if(r==ee.type()){var o=a?e.newParent:e.oldParent;o==_&&S.identifyLayers()}else if(r==ne.type()||r==ie.type())e.parent==_&&S.identifyLayers(),r==ne.type()?a&&fe(e.elem):a||fe(e.elem),"use"===e.elem.tagName&&sn(e.elem);else if(r==re.type()){"title"==e.elem.tagName&&e.elem.parentNode.parentNode==_&&S.identifyLayers();var s=a?e.newValues:e.oldValues;s.stdDeviation&&S.setBlurOffsets(e.elem.parentNode,s.stdDeviation)}}}});var oe=function(t){S.undoMgr.addCommandToHistory(t)};u.init(w,{createSVGElement:function(t){return S.addSvgElementFromJson(t)},svgRoot:function(){return E},svgContent:function(){return _},currentZoom:function(){return P},getStrokedBBox:function(t){return S.getStrokedBBox([t])}});var se=this.selectorManager=u.getSelectorManager();d.init({getCurrentZoom:function(){return P},getSVGRoot:function(){return E}}),o.snapToGrid=function(t){var e=w.snappingStep,n=w.baseUnit;return"px"!==n&&(e*=a.getTypeMap()[n]),t=Math.round(t/e)*e};var le=o.snapToGrid,ue={exportNoBlur:"Blurred elements will appear as un-blurred",exportNoforeignObject:"foreignObject elements will not appear",exportNoDashArray:"Strokes will appear filled",exportNoText:"Text may not appear as expected"},ce="a,circle,ellipse,foreignObject,g,image,line,path,polygon,polyline,rect,svg,text,tspan,use",de=["clip-path","fill","filter","marker-end","marker-mid","marker-start","mask","stroke"],he=e.data,pe=document.createElementNS(f,"animate");e(pe).attr({attributeName:"opacity",begin:"indefinite",dur:1,fill:"freeze"}).appendTo(E);var fe=function(t){var n=e(t).attr(de);for(var i in n){var r=n[i];if(r&&0===r.indexOf("url(")){var a=z(r).substr(1),o=Z(a);o||(fn().appendChild(Ie[a]),delete Ie[a])}}var s=t.getElementsByTagName("*");if(s.length)for(var l=0,u=s.length;u>l;l++)fe(s[l])},me={},ge=w.imgPath+"logo.png",ve=[],ye={round_digits:5},be=!1,xe=null,we="select",ke="none",Se={},Ce=M.text,Ee=B,_e=null,Te=null,Ae=[],Ne={},Pe=null,Ie={};S.clipBoard=[];var Me=this.runExtensions=function(t,n,i){var r=!1;return i&&(r=[]),e.each(Ne,function(e,a){t in a&&(i?r.push(a[t](n)):r=a[t](n))}),r};this.addExtension=function(t,n){if(t in Ne)console.log('Cannot add extension "'+t+'", an extension by that name already exists"');else{if(e.isFunction(n))var i=n(e.extend(S,S.getPrivateMethods(),{svgroot:E,svgcontent:_,nonce:N().getNonce(),selectorManager:se}));else var i=n;Ne[t]=i,je("extension_added",i)}};var Be=this.round=function(t){return parseInt(t*P)/P},Le=this.getIntersectionList=function(t){if(null==Te)return null;var e=I||N().getCurrentLayer();Ae.length||(Ae=Fe(e));var n=null;try{n=e.getIntersectionList(t,null)}catch(i){}if(null==n||"function"!=typeof n.item){if(n=[],t)var a=t;else{var a=Te.getBBox(),o={};for(var s in a)o[s]=a[s]/P;a=o}for(var l=Ae.length;l--;)a.width&&a.width&&r.rectsIntersect(a,Ae[l].bbox)&&n.push(Ae[l].elem)}return n};getStrokedBBox=this.getStrokedBBox=function(t){if(t||(t=Ve()),!t.length)return!1;var n,a=function(t){try{var e=o.getBBox(t),n=o.getRotationAngle(t);if(n&&n%90||r.hasMatrixTransform(i.getTransformList(t))){var a=!1,s=["ellipse","path","line","polyline","polygon"];if(s.indexOf(t.tagName)>=0)e=a=S.convertToPath(t,!0);else if("rect"==t.tagName){var l=t.getAttribute("rx"),u=t.getAttribute("ry");(l||u)&&(e=a=S.convertToPath(t,!0))}if(!a){var c=t.cloneNode(!0),d=document.createElementNS(f,"g"),h=t.parentNode;h.appendChild(d),d.appendChild(c),e=o.bboxToObj(d.getBBox()),h.removeChild(d)}}return e}catch(p){return console.log(t,p),null}};if(e.each(t,function(){n||this.parentNode&&(n=a(this))}),null==n)return null;var s=n.x+n.width,l=n.y+n.height,u=n.x,c=n.y,d=function(t){var e=t.getAttribute("stroke-width"),n=0;return"none"==t.getAttribute("stroke")||isNaN(e)||(n+=e/2),n},h=[];return e.each(t,function(t,e){var n=a(e);if(n){var i=d(e);u=Math.min(u,n.x-i),c=Math.min(c,n.y-i),h.push(n)}}),n.x=u,n.y=c,e.each(t,function(t,e){var n=h[t];if(n&&1==e.nodeType){var i=d(e);s=Math.max(s,n.x+n.width+i),l=Math.max(l,n.y+n.height+i)}}),n.width=s-u,n.height=l-c,n};var De,Oe,je,Ve=this.getVisibleElements=function(t){t||(t=e(_).children());var n=[];return e(t).children().each(function(t,e){try{e.getBBox()&&n.push(e)}catch(i){}}),n.reverse()},Fe=this.getVisibleElementsAndBBoxes=function(t){t||(t=e(_).children());var n=[];return e(t).children().each(function(t,e){try{e.getBBox()&&n.push({elem:e,bbox:getStrokedBBox([e])})}catch(i){}}),n.reverse()},Re=this.groupSvgElem=function(t){var n=document.createElementNS(f,"g");t.parentNode.replaceChild(n,t),e(n).append(t).data("gsvg",t)[0].id=Oe()},$e=function(t){var i=document.createElementNS(t.namespaceURI,t.nodeName);if(e.each(t.attributes,function(t,e){"-moz-math-font-style"!=e.localName&&i.setAttributeNS(e.namespaceURI,e.nodeName,e.nodeValue)}),i.removeAttribute("id"),i.id=Oe(),n.isWebkit()&&"path"==t.nodeName){var r=rn.convertPath(t);i.setAttribute("d",r)}if(e.each(t.childNodes,function(t,e){switch(e.nodeType){case 1:i.appendChild($e(e));break;case 3:i.textContent=e.nodeValue}}),e(t).data("gsvg"))e(i).data("gsvg",i.firstChild);else if(e(t).data("symbol")){var a=e(t).data("symbol");e(i).data("ref",a).data("symbol",a)}else"image"==i.tagName&&en(i);return i};!function(t){var e={};De=t.getId=function(){return N().getId()},Oe=t.getNextId=function(){return N().getNextId()},je=t.call=function(t,n){if(e[t]){if(Array.isArray(e[t])&&0!==e[t].length){for(var i=0,r=e[t].length;r>i;i++)e[t][i](this,n);return}return e[t](this,n)}},t.bind=function(t,n){var i=e[t];return e[t]=n,i},t.multipleBind=function(t,n){e[t]||(e[t]=[]),e[t].push(n)},t.unbind=function(t){var n=e[t];return delete e[t],n}}(S),this.prepareSvg=function(t){this.sanitizeSvg(t.documentElement);for(var e=t.getElementsByTagNameNS(f,"path"),n=0,i=e.length;i>n;++n){var r=e[n];r.setAttribute("d",rn.convertPath(r)),rn.fixEnd(r)}};var qe=this.getRefElem=function(t){return Z(z(t).substr(1))},Ge=function(t){if(!n.isGecko())return t;var e=t.cloneNode(!0);return t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t),se.releaseSelector(t),L[0]=e,se.requestSelector(e).showGrips(!0),e};this.setRotationAngle=function(t,e){t=parseFloat(t);var n=L[0],i=n.getAttribute("transform"),r=o.getBBox(n),a=r.x+r.width/2,s=r.y+r.height/2,l=O(n);if(l.numberOfItems>0){var u=l.getItem(0);4==u.type&&l.removeItem(0)}if(0!=t){var c=V(a,s,$(l).matrix),d=E.createSVGTransform();d.setRotate(t,c.x,c.y),l.numberOfItems?l.insertItemBefore(d,0):l.appendItem(d)}else 0==l.numberOfItems&&n.removeAttribute("transform");if(!e){var h=n.getAttribute("transform");n.setAttribute("transform",i),yn("transform",h,L),je("changed",L)}var p=(Z("pathpointgrip_container"),se.requestSelector(L[0]));p.resize(),p.updateGripCursors(t)};{var He=this.recalculateAllSelectedDimensions=function(){for(var t="none"==ke?"position":"size",e=new ae(t),n=L.length;n--;){var i=L[n],r=Ye(i);r&&e.addSubCommand(r)}e.isEmpty()||(oe(e),je("changed",L));var a=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];if(i&&"line"==i.nodeName&&(i.getAttribute("marker-end")||i.getAttribute("marker-start"))){var r={start:i.getAttribute("marker-start"),end:i.getAttribute("marker-end")};i.removeAttribute("marker-start"),i.removeAttribute("marker-end"),i.setAttribute("marker-start",r.start),i.setAttribute("marker-end",r.end)}else i&&"g"==i.nodeName&&a(i.childNodes)}};a(L)},ze=[0,"z","M","m","L","l","C","c","Q","q","A","a","H","h","V","v","S","s","T","t"],Ue=function(t){console.log([t.a,t.b,t.c,t.d,t.e,t.f])},We=this.remapElement=function(t,n,i){var a=function(t,e){return V(t,e,i)},s=function(t){return i.a*t
},l=function(t){return i.d*t},u=w.gridSnapping&&"svg"===t.parentNode.parentNode.localName,c=function(){if(u)for(var e in n)n[e]=le(n[e]);Q(t,n,1e3,!0)};box=o.getBBox(t);for(var d=0;2>d;d++){var h=0===d?"fill":"stroke",p=t.getAttribute(h);if(p&&0===p.indexOf("url(")&&(i.a<0||i.d<0)){var f=qe(p),m=f.cloneNode(!0);if(i.a<0){var g=m.getAttribute("x1"),v=m.getAttribute("x2");m.setAttribute("x1",-(g-1)),m.setAttribute("x2",-(v-1))}if(i.d<0){var y=m.getAttribute("y1"),b=m.getAttribute("y2");m.setAttribute("y1",-(y-1)),m.setAttribute("y2",-(b-1))}m.id=Oe(),fn().appendChild(m),t.setAttribute(h,"url(#"+m.id+")")}}var x=t.tagName;if("g"===x||"text"===x||"use"===x)if(1!=i.a||0!=i.b||0!=i.c||1!=i.d||0==i.e&&0==i.f){var k=O(t),S=E.createSVGTransform();S.setMatrix(F($(k).matrix,i)),k.clear(),k.appendItem(S)}else{var C=$(t).matrix,_=F(C.inverse(),i,C);n.x=parseFloat(n.x)+_.e,n.y=parseFloat(n.y)+_.f}switch(x){case"foreignObject":case"rect":case"image":if("image"===x&&(i.a<0||i.d<0)){var k=O(t),S=E.createSVGTransform();S.setMatrix(F($(k).matrix,i)),k.clear(),k.appendItem(S)}else{var T=a(n.x,n.y);n.width=s(n.width),n.height=l(n.height),n.x=T.x+Math.min(0,n.width),n.y=T.y+Math.min(0,n.height),n.width=Math.abs(n.width)<1?1:Math.abs(n.width),n.height=Math.abs(n.height)<1?1:Math.abs(n.height)}c();break;case"ellipse":var A=a(n.cx,n.cy);n.cx=A.x,n.cy=A.y,n.rx=s(n.rx),n.ry=l(n.ry),n.rx=Math.abs(n.rx),n.ry=Math.abs(n.ry),c();break;case"circle":var A=a(n.cx,n.cy);n.cx=A.x,n.cy=A.y;var N=r.transformBox(box.x,box.y,box.width,box.height,i),P=N.tr.x-N.tl.x,I=N.bl.y-N.tl.y;n.r=Math.min(P/2,I/2),n.r&&(n.r=Math.abs(n.r)),c();break;case"dbarrow":case"arrow":case"line":var T=a(n.x1,n.y1),M=a(n.x2,n.y2);n.x1=T.x,n.y1=T.y,n.x2=M.x,n.y2=M.y;case"text":case"use":c();break;case"g":var B=e(t).data("gsvg");B&&Q(B,n,1e3,!0);break;case"polyline":case"polygon":for(var L=n.points.length,d=0;L>d;++d){var D=n.points[d];D=a(D.x,D.y),n.points[d].x=D.x,n.points[d].y=D.y}for(var L=n.points.length,j="",d=0;L>d;++d){var D=n.points[d];j+=D.x+","+D.y+" "}t.setAttribute("points",j);break;case"path":var R=t.pathSegList,L=R.numberOfItems;n.d=new Array(L);for(var d=0;L>d;++d){var q=R.getItem(d);n.d[d]={type:q.pathSegType,x:q.x,y:q.y,x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,r1:q.r1,r2:q.r2,angle:q.angle,largeArcFlag:q.largeArcFlag,sweepFlag:q.sweepFlag}}var L=n.d.length,G=n.d[0],H=a(G.x,G.y);n.d[0].x=H.x,n.d[0].y=H.y;for(var d=1;L>d;++d){var q=n.d[d],h=q.type;if(h%2==0){var z=void 0!=q.x?q.x:H.x,U=void 0!=q.y?q.y:H.y,D=a(z,U),T=a(q.x1,q.y1),M=a(q.x2,q.y2);q.x=D.x,q.y=D.y,q.x1=T.x,q.y1=T.y,q.x2=M.x,q.y2=M.y,q.r1=s(q.r1),q.r2=l(q.r2)}else q.x=s(q.x),q.y=l(q.y),q.x1=s(q.x1),q.y1=l(q.y1),q.x2=s(q.x2),q.y2=l(q.y2),q.r1=s(q.r1),q.r2=l(q.r2)}for(var W="",L=n.d.length,d=0;L>d;++d){var q=n.d[d],h=q.type;switch(W+=ze[h],h){case 13:case 12:W+=q.x+" ";break;case 15:case 14:W+=q.y+" ";break;case 3:case 5:case 19:case 2:case 4:case 18:W+=q.x+","+q.y+" ";break;case 7:case 6:W+=q.x1+","+q.y1+" "+q.x2+","+q.y2+" "+q.x+","+q.y+" ";break;case 9:case 8:W+=q.x1+","+q.y1+" "+q.x+","+q.y+" ";break;case 11:case 10:W+=q.r1+","+q.r2+" "+q.angle+" "+ +q.largeArcFlag+" "+ +q.sweepFlag+" "+q.x+","+q.y+" ";break;case 17:case 16:W+=q.x2+","+q.y2+" "+q.x+","+q.y+" "}}t.setAttribute("d",W)}},Xe=function(t,e,n){var i=qe(t).firstChild,r=O(i),a=E.createSVGTransform();a.setTranslate(e,n),r.appendItem(a),Ye(i)},Ye=this.recalculateDimensions=function(t){if(null==t)return null;var i=O(t);if(i&&i.numberOfItems>0){for(var a=i.numberOfItems;a--;){var s=i.getItem(a);0===s.type?i.removeItem(a):1===s.type?r.isIdentity(s.matrix)&&i.removeItem(a):4===s.type&&0===s.angle&&i.removeItem(a)}if(1===i.numberOfItems&&Y(t))return null}if(!i||0==i.numberOfItems)return t.removeAttribute("transform"),null;if(i){for(var a=i.numberOfItems,l=[];a--;){var s=i.getItem(a);1===s.type?l.push([s.matrix,a]):l.length&&(l=[])}if(2===l.length){var u=E.createSVGTransformFromMatrix(F(l[1][0],l[0][0]));i.removeItem(l[0][1]),i.removeItem(l[1][1]),i.insertItemBefore(u,l[1][1])}if(a=i.numberOfItems,a>=2&&1===i.getItem(a-2).type&&2===i.getItem(a-1).type){var c=E.createSVGTransform(),d=F(i.getItem(a-2).matrix,i.getItem(a-1).matrix);c.setMatrix(d),i.removeItem(a-2),i.removeItem(a-2),i.appendItem(c)}}switch(t.tagName){case"line":case"polyline":case"polygon":case"path":break;default:if(1===i.numberOfItems&&1===i.getItem(0).type||2===i.numberOfItems&&1===i.getItem(0).type&&4===i.getItem(0).type)return null}var h=e(t).data("gsvg"),p=new ae("Transform"),m={},g=null,v=[];switch(t.tagName){case"dbarrow":case"arrow":case"line":v=["x1","y1","x2","y2"];break;case"circle":v=["cx","cy","r"];break;case"ellipse":v=["cx","cy","rx","ry"];break;case"foreignObject":case"rect":case"image":v=["width","height","x","y"];break;case"use":case"text":v=["x","y"];break;case"polygon":case"polyline":g={},g.points=t.getAttribute("points");var y=t.points,b=y.numberOfItems;m.points=new Array(b);for(var x=0;b>x;++x){var w=y.getItem(x);m.points[x]={x:w.x,y:w.y}}break;case"path":g={},g.d=t.getAttribute("d"),m.d=t.getAttribute("d")}if(v.length?(m=e(t).attr(v),e.each(m,function(t,e){m[t]=H(t,e)})):h&&(m={x:e(h).attr("x")||0,y:e(h).attr("y")||0}),null==g&&(g=e.extend(!0,{},m),e.each(g,function(t,e){g[t]=H(t,e)})),g.transform=xe?xe:"","g"==t.tagName&&!h||"a"==t.tagName){var k=o.getBBox(t),S={x:k.x+k.width/2,y:k.y+k.height/2},C=V(k.x+k.width/2,k.y+k.height/2,$(i).matrix),d=E.createSVGMatrix(),_=Y(t);if(_){var T=_*Math.PI/180;if(Math.abs(T)>1e-10)var A=Math.sin(T)/(1-Math.cos(T));else var A=2/T;for(var x=0;x<i.numberOfItems;++x){var s=i.getItem(x);if(4==s.type){var N=s.matrix;S.y=(A*N.e+N.f)/2,S.x=(N.e-A*N.f)/2,i.removeItem(x);break}}}var P=0,I=0,M=0,B=i.numberOfItems;if(B)var L=i.getItem(0).matrix;if(B>=3&&3==i.getItem(B-2).type&&2==i.getItem(B-3).type&&2==i.getItem(B-1).type){M=3;for(var D=i.getItem(B-3).matrix,j=i.getItem(B-2).matrix,q=i.getItem(B-1).matrix,G=t.childNodes,z=G.length;z--;){var W=G.item(z);if(P=0,I=0,1==W.nodeType){var X=O(W);if(!X)continue;var d=$(X).matrix,Z=Y(W),Q=xe,K=[];if(xe=W.getAttribute("transform"),Z||R(X)){var J=E.createSVGTransform();J.setMatrix(F(D,j,q,d)),X.clear(),X.appendItem(J),K.push(J)}else{var te=F(d.inverse(),q,d),ee=E.createSVGMatrix();ee.e=-te.e,ee.f=-te.f;var ne=F(ee.inverse(),d.inverse(),D,j,q,d,te.inverse()),ie=E.createSVGTransform(),oe=E.createSVGTransform(),se=E.createSVGTransform();ie.setTranslate(te.e,te.f),oe.setScale(ne.a,ne.d),se.setTranslate(ee.e,ee.f),X.appendItem(se),X.appendItem(oe),X.appendItem(ie),K.push(se),K.push(oe),K.push(ie)}p.addSubCommand(Ye(W)),xe=Q}}i.removeItem(B-1),i.removeItem(B-2),i.removeItem(B-3)}else if(B>=3&&1==i.getItem(B-1).type){M=3,d=$(i).matrix;var J=E.createSVGTransform();J.setMatrix(d),i.clear(),i.appendItem(J)}else if((1==B||B>1&&3!=i.getItem(1).type)&&2==i.getItem(0).type){M=2;var le=$(i).matrix;i.removeItem(0);var ue=$(i).matrix.inverse(),ce=F(ue,le);if(P=ce.e,I=ce.f,0!=P||0!=I){for(var G=t.childNodes,z=G.length,de=[];z--;){var W=G.item(z);if(1==W.nodeType){if(W.getAttribute("clip-path")){var he=W.getAttribute("clip-path");-1===de.indexOf(he)&&(Xe(he,P,I),de.push(he))}var Q=xe;xe=W.getAttribute("transform");var X=O(W);if(X){var pe=E.createSVGTransform();pe.setTranslate(P,I),X.numberOfItems?X.insertItemBefore(pe,0):X.appendItem(pe),p.addSubCommand(Ye(W));for(var fe=t.getElementsByTagNameNS(f,"use"),me="#"+W.id,ge=fe.length;ge--;){var ve=fe.item(ge);if(me==U(ve)){var ye=E.createSVGTransform();ye.setTranslate(-P,-I),O(ve).insertItemBefore(ye,0),p.addSubCommand(Ye(ve))}}xe=Q}}}de=[],xe=Q}}else{if(1!=B||1!=i.getItem(0).type||_){if(_){var be=E.createSVGTransform();be.setRotate(_,C.x,C.y),i.numberOfItems?i.insertItemBefore(be,0):i.appendItem(be)}return 0==i.numberOfItems&&t.removeAttribute("transform"),null}M=1;for(var d=i.getItem(0).matrix,G=t.childNodes,z=G.length;z--;){var W=G.item(z);if(1==W.nodeType){var Q=xe;xe=W.getAttribute("transform");var X=O(W);if(!X)continue;var we=F(d,$(X).matrix),ke=E.createSVGTransform();ke.setMatrix(we),X.clear(),X.appendItem(ke,0),p.addSubCommand(Ye(W)),xe=Q;var Se=W.getAttribute("stroke-width");if("none"!==W.getAttribute("stroke")&&!isNaN(Se)){var Ce=(Math.abs(we.a)+Math.abs(we.d))/2;W.setAttribute("stroke-width",Se*Ce)}}}i.clear()}if(2==M){if(_){C={x:S.x+L.e,y:S.y+L.f};var be=E.createSVGTransform();be.setRotate(_,C.x,C.y),i.numberOfItems?i.insertItemBefore(be,0):i.appendItem(be)}}else if(3==M){var d=$(i).matrix,Ee=E.createSVGTransform();Ee.setRotate(_,S.x,S.y);var _e=Ee.matrix,Te=E.createSVGTransform();Te.setRotate(_,C.x,C.y);var Ae=Te.matrix.inverse(),Ne=d.inverse(),Pe=F(Ne,Ae,_e,d);if(P=Pe.e,I=Pe.f,0!=P||0!=I)for(var G=t.childNodes,z=G.length;z--;){var W=G.item(z);if(1==W.nodeType){var Q=xe;xe=W.getAttribute("transform");var X=O(W),pe=E.createSVGTransform();pe.setTranslate(P,I),X.numberOfItems?X.insertItemBefore(pe,0):X.appendItem(pe),p.addSubCommand(Ye(W)),xe=Q}}_&&(i.numberOfItems?i.insertItemBefore(Te,0):i.appendItem(Te))}}else{var k=o.getBBox(t);if(!k&&"path"!=t.tagName)return null;var d=E.createSVGMatrix(),Z=Y(t);if(Z){var S={x:k.x+k.width/2,y:k.y+k.height/2},C=V(k.x+k.width/2,k.y+k.height/2,$(i).matrix),T=Z*Math.PI/180;if(Math.abs(T)>1e-10)var A=Math.sin(T)/(1-Math.cos(T));else var A=2/T;for(var x=0;x<i.numberOfItems;++x){var s=i.getItem(x);if(4==s.type){var N=s.matrix;S.y=(A*N.e+N.f)/2,S.x=(N.e-A*N.f)/2,i.removeItem(x);break}}}var M=0,B=i.numberOfItems;if(!n.isWebkit()){var Ie=t.getAttribute("fill");if(Ie&&0===Ie.indexOf("url(")){var Me=qe(Ie),Be="pattern";Me.tagName!==Be&&(Be="gradient");var Le=Me.getAttribute(Be+"Units");if("userSpaceOnUse"===Le){d=$(i).matrix;var De=O(Me),Oe=$(De).matrix;d=F(d,Oe);var je="matrix("+[d.a,d.b,d.c,d.d,d.e,d.f].join(",")+")";Me.setAttribute(Be+"Transform",je)}}}if(B>=3&&3==i.getItem(B-2).type&&2==i.getItem(B-3).type&&2==i.getItem(B-1).type)M=3,d=$(i,B-3,B-1).matrix,i.removeItem(B-1),i.removeItem(B-2),i.removeItem(B-3);else if(4==B&&1==i.getItem(B-1).type){M=3,d=$(i).matrix;var J=E.createSVGTransform();J.setMatrix(d),i.clear(),i.appendItem(J),d=E.createSVGMatrix()}else if((1==B||B>1&&3!=i.getItem(1).type)&&2==i.getItem(0).type){M=2;var Ve=i.getItem(0).matrix,Fe=$(i,1).matrix,Re=Fe.inverse();d=F(Re,Ve,Fe),i.removeItem(0)}else{if(1!=B||1!=i.getItem(0).type||Z){if(M=4,Z){var be=E.createSVGTransform();be.setRotate(Z,C.x,C.y),i.numberOfItems?i.insertItemBefore(be,0):i.appendItem(be)}return 0==i.numberOfItems&&t.removeAttribute("transform"),null}switch(d=$(i).matrix,t.tagName){case"line":m=e(t).attr(["x1","y1","x2","y2"]);case"polyline":case"polygon":if(m.points=t.getAttribute("points"),m.points){var y=t.points,b=y.numberOfItems;m.points=new Array(b);for(var x=0;b>x;++x){var w=y.getItem(x);m.points[x]={x:w.x,y:w.y}}}case"path":m.d=t.getAttribute("d"),M=1,i.clear()}}if((1==M||2==M||3==M)&&We(t,m,d),2==M){if(Z){R(i)||(C={x:S.x+d.e,y:S.y+d.f});var be=E.createSVGTransform();be.setRotate(Z,C.x,C.y),i.numberOfItems?i.insertItemBefore(be,0):i.appendItem(be)}}else if(3==M&&Z){var d=$(i).matrix,Ee=E.createSVGTransform();Ee.setRotate(Z,S.x,S.y);var _e=Ee.matrix,Te=E.createSVGTransform();Te.setRotate(Z,C.x,C.y);var Ae=Te.matrix.inverse(),Ne=d.inverse(),Pe=F(Ne,Ae,_e,d);We(t,m,Pe),Z&&(i.numberOfItems?i.insertItemBefore(Te,0):i.appendItem(Te))}}return 0==i.numberOfItems&&t.removeAttribute("transform"),p.addSubCommand(new re(t,g)),p},Ze=null,Qe=this.clearSelection=function(t){if(null!=L[0])for(var e=L.length,n=0;e>n;++n){var i=L[n];if(null==i)break;se.releaseSelector(i),L[n]=null}t||je("selected",L)},Ke=this.addToSelection=function(t,e){if(0!=t.length){for(var n=0;n<L.length&&null!=L[n];)++n;for(var i=t.length;i--;){var r=t[i];if(r&&o.getBBox(r)&&("a"===r.tagName&&1===r.childNodes.length&&(r=r.firstChild),-1==L.indexOf(r))){L[n]=r,n++;var a=se.requestSelector(r);L.length>1&&a.showGrips(!1)}}for(je("selected",L),se.requestSelector(L[0]).showGrips(e||1==L.length?!0:!1),L.sort(function(t,e){return t&&e&&t.compareDocumentPosition?3-(6&e.compareDocumentPosition(t)):null==t?1:void 0});null==L[0];)L.shift(0)}},Je=this.selectOnly=function(t,e){Qe(!0),Ke(t,e),Me("selected",{elem:t},!0)};this.removeFromSelection=function(t){if(null!=L[0]&&0!=t.length){var e=new Array(L.length);j=0,len=L.length;for(var n=0;len>n;++n){var i=L[n];i&&(-1==t.indexOf(i)?(e[j]=i,j++):se.releaseSelector(i))}L=e}}}this.selectAllInCurrentLayer=function(){var t=N().getCurrentLayer();t&&(we="select",Je(e(I||t).children()))};var tn=this.getMouseTarget=function(n){if(null==n)return null;var i=n.target;if(i.correspondingUseElement&&(i=i.correspondingUseElement),[b,v].indexOf(i.namespaceURI)>=0&&"svgcanvas"!=i.id)for(;"foreignObject"!=i.nodeName;)if(i=i.parentNode,!i)return E;var r=N().getCurrentLayer();if([E,t,_,r].indexOf(i)>=0)return E;var a=e(i);if(a.closest("#selectorParentGroup").length)return se.selectorParentGroup;for(;i.parentNode!==(I||r);)i=i.parentNode;return i};!function(){var i=null,r=null,s=null,l=null,u=null,c={},h={minx:null,miny:null,maxx:null,maxy:null},p=function(t){if(!S.spaceKey&&1!==t.button){var a=2===t.button;t.altKey&&svgCanvas.cloneSelectedElements(0,0),Ze=_.getScreenCTM().inverse();var d=V(t.pageX,t.pageY,Ze),p=d.x*P,f=d.y*P;if(t.preventDefault(),a){Pe=d;var g=t;g.button=1,we="multiselect",m(g),we="select"}var v=p/P,y=f/P,b=tn(t);"a"===b.tagName&&1===b.childNodes.length&&(b=b.firstChild);var x=l=r=v,k=u=s=y;if(w.gridSnapping&&(v=le(v),y=le(y),r=le(r),s=le(s)),b==se.selectorParentGroup&&null!=L[0]){var C=t.target,T=he(C,"type");"rotate"==T?we="rotate":"resize"==T&&(we="resize",ke=he(C,"dir")),b=L[0]}xe=b.getAttribute("transform");var A=O(b);switch(we){case"select":if(be=!0,ke="none",a&&(be=!1),nn.hideCursor(),b!=E){if(-1==L.indexOf(b)&&(t.shiftKey||Qe(!0),Ke([b]),_e=b,rn.clear()),!a)for(var N=0;N<L.length;++N)if(null!=L[N]){var I=O(L[N]);I.numberOfItems?I.insertItemBefore(E.createSVGTransform(),0):I.appendItem(E.createSVGTransform())}}else a||(Qe(),we="multiselect",null==Te&&(Te=se.getRubberBandBox()),l*=P,u*=P,Q(Te,{x:l,y:u,width:0,height:0,display:"inline"},100));break;case"zoom":be=!0,null==Te&&(Te=se.getRubberBandBox()),Q(Te,{x:x*P,y:x*P,width:0,height:0,display:"inline"},100);break;case"resize":be=!0,r=v,s=y,c=o.getBBox(e("#selectedBox0")[0]);var M={};e.each(c,function(t,e){M[t]=e/P}),c=M;var j=Y(b)?1:0;if(R(A))A.insertItemBefore(E.createSVGTransform(),j),A.insertItemBefore(E.createSVGTransform(),j),A.insertItemBefore(E.createSVGTransform(),j);else if(A.appendItem(E.createSVGTransform()),A.appendItem(E.createSVGTransform()),A.appendItem(E.createSVGTransform()),n.supportsNonScalingStroke()){var F=n.isWebkit();if(F)var $=function(t){var e=t.getAttributeNS(null,"stroke");t.removeAttributeNS(null,"stroke"),setTimeout(function(){t.setAttributeNS(null,"stroke",e)},0)};b.style.vectorEffect="non-scaling-stroke",F&&$(b);for(var q=b.getElementsByTagName("*"),G=q.length,N=0;G>N;N++)q[N].style.vectorEffect="non-scaling-stroke",F&&$(q[N])}break;case"fhellipse":case"fhrect":case"fhpath":be=!0,i=x+","+k+" ";var H=0==B.stroke_width?1:B.stroke_width;D({element:"polyline",curStyles:!0,attr:{points:i,id:Oe(),fill:"none",opacity:B.opacity,"stroke-linecap":"round",style:"pointer-events:none"}}),h.minx=x,h.maxx=x,h.miny=k,h.maxy=k;break;case"image":be=!0;var z=D({element:"image",attr:{x:v,y:y,width:0,height:0,id:Oe(),opacity:B.opacity,style:"pointer-events:inherit"}});W(z,ge),en(z);break;case"square":case"rect":be=!0,r=v,s=y,D({element:"rect",curStyles:!0,attr:{x:v,y:y,width:0,height:0,id:Oe(),opacity:B.opacity}});break;case"dbarrow":case"arrow":case"line":be=!0;var H=0==B.stroke_width?1:B.stroke_width;D({element:"line",curStyles:!0,attr:{x1:v,y1:y,x2:v,y2:y,id:Oe(),stroke:B.stroke,"stroke-width":H,"stroke-dasharray":B.stroke_dasharray,"stroke-linejoin":B.stroke_linejoin,"stroke-linecap":B.stroke_linecap,"stroke-opacity":B.stroke_opacity,fill:"none",opacity:B.opacity,style:"pointer-events:none"}});break;case"circle":be=!0,D({element:"circle",curStyles:!0,attr:{cx:v,cy:y,r:0,id:Oe(),opacity:B.opacity}});break;case"ellipse":be=!0,D({element:"ellipse",curStyles:!0,attr:{cx:v,cy:y,rx:0,ry:0,id:Oe(),opacity:B.opacity}});break;case"text":be=!0;{D({element:"text",curStyles:!0,attr:{x:v,y:y,id:Oe(),fill:"none"!==B.fill?B.fill:Ce.fill,"stroke-width":Ce.stroke_width,"font-size":Ce.font_size,"font-family":Ce.font_family,"text-anchor":"left","xml:space":"preserve",opacity:B.opacity}})}break;case"path":case"pathedit":r*=P,s*=P,rn.mouseDown(t,b,r,s),be=!0;break;case"textedit":r*=P,s*=P,nn.mouseDown(t,b,r,s),be=!0;break;case"rotate":be=!0,S.undoMgr.beginUndoableChange("transform",L)}var U=Me("mouseDown",{event:t,start_x:r,start_y:s,selectedElements:L},!0);e.each(U,function(t,e){e&&e.started&&(be=!0)})}},f=function(t){if(be&&1!==t.button&&!S.spaceKey){var n=L[0],a=V(t.pageX,t.pageY,Ze),p=a.x*P,f=a.y*P,m=Z(De()),g=x=p/P,v=y=f/P;switch(w.gridSnapping&&(x=le(x),y=le(y)),t.preventDefault(),we){case"select":if(null!==L[0]){var b=x-r,k=y-s;if(w.gridSnapping&&(b=le(b),k=le(k)),t.shiftKey){var C=q(r,s,x,y);x=C.x,y=C.y}if(0!=b||0!=k){for(var _=L.length,T=0;_>T;++T){var n=L[T];if(null==n)break;var A=E.createSVGTransform(),N=O(n);A.setTranslate(b,k),N.numberOfItems?N.replaceItem(A,0):N.appendItem(A),se.requestSelector(n).resize()}je("transition",L)}}break;case"multiselect":g*=P,v*=P,Q(Te,{x:Math.min(l,g),y:Math.min(u,v),width:Math.abs(g-l),height:Math.abs(v-u)},100);for(var I=[],M=[],B=Le(),_=L.length,T=0;_>T;++T){var D=B.indexOf(L[T]);-1==D?I.push(L[T]):B[D]=null}for(_=B.length,T=0;_>T;++T)B[T]&&M.push(B[T]);I.length>0&&S.removeFromSelection(I),M.length>0&&Ke(M);break;case"resize":var N=O(n),j=R(N),F=j?c:o.getBBox(n),$=F.x,H=F.y,z=F.width,U=F.height,b=x-r,k=y-s;w.gridSnapping&&(b=le(b),k=le(k),U=le(U),z=le(z));var W=Y(n);if(W){var X=Math.sqrt(b*b+k*k),K=Math.atan2(k,b)-W*Math.PI/180;b=X*Math.cos(K),k=X*Math.sin(K)}-1==ke.indexOf("n")&&-1==ke.indexOf("s")&&(k=0),-1==ke.indexOf("e")&&-1==ke.indexOf("w")&&(b=0);var J=0,te=0,ee=U?(U+k)/U:1,ne=z?(z+b)/z:1;ke.indexOf("n")>=0&&(ee=U?(U-k)/U:1,te=U),ke.indexOf("w")>=0&&(ne=z?(z-b)/z:1,J=z);var ie=E.createSVGTransform(),re=E.createSVGTransform(),ae=E.createSVGTransform();if(w.gridSnapping&&($=le($),J=le(J),H=le(H),te=le(te)),ie.setTranslate(-($+J),-(H+te)),t.shiftKey&&(1==ne?ne=ee:ee=ne),re.setScale(ne,ee),ae.setTranslate($+J,H+te),j){var oe=W?1:0;N.replaceItem(ie,2+oe),N.replaceItem(re,1+oe),N.replaceItem(ae,0+oe)}else{var ue=N.numberOfItems;N.replaceItem(ae,ue-3),N.replaceItem(re,ue-2),N.replaceItem(ie,ue-1)}se.requestSelector(n).resize(),je("transition",L);break;case"zoom":g*=P,v*=P,Q(Te,{x:Math.min(l*P,g),y:Math.min(u*P,v),width:Math.abs(g-l*P),height:Math.abs(v-u*P)},100);break;case"text":Q(m,{x:x,y:y},1e3);break;case"dbarrow":case"arrow":case"line":var ce=null;window.opera||E.suspendRedraw(1e3),w.gridSnapping&&(x=le(x),y=le(y));var de=x,he=y;if(t.shiftKey){var C=q(r,s,de,he);de=C.x,he=C.y}m.setAttributeNS(null,"x2",de),m.setAttributeNS(null,"y2",he),window.opera||E.unsuspendRedraw(ce);break;case"foreignObject":case"square":case"rect":case"image":var pe,fe,me="square"==we||t.shiftKey,ge=Math.abs(x-r),ve=Math.abs(y-s);me?(ge=ve=Math.max(ge,ve),pe=x>r?r:r-ge,fe=y>s?s:s-ve):(pe=Math.min(r,x),fe=Math.min(s,y)),w.gridSnapping&&(ge=le(ge),ve=le(ve),pe=le(pe),fe=le(fe)),Q(m,{width:ge,height:ve,x:pe,y:fe},1e3);break;case"circle":var ye=e(m).attr(["cx","cy"]),xe=ye.cx,Se=ye.cy,Ce=Math.sqrt((x-xe)*(x-xe)+(y-Se)*(y-Se));w.gridSnapping&&(Ce=le(Ce)),m.setAttributeNS(null,"r",Ce);break;case"ellipse":var ye=e(m).attr(["cx","cy"]),xe=ye.cx,Se=ye.cy;ce=null,window.opera||E.suspendRedraw(1e3),w.gridSnapping&&(x=le(x),xe=le(xe),y=le(y),Se=le(Se)),m.setAttributeNS(null,"rx",Math.abs(x-xe));var Ee=Math.abs(t.shiftKey?x-xe:y-Se);m.setAttributeNS(null,"ry",Ee),window.opera||E.unsuspendRedraw(ce);break;case"fhellipse":case"fhrect":h.minx=Math.min(g,h.minx),h.maxx=Math.max(g,h.maxx),h.miny=Math.min(v,h.miny),h.maxy=Math.max(v,h.maxy);case"fhpath":i+=+g+","+v+" ",m.setAttributeNS(null,"points",i);break;case"path":case"pathedit":if(x*=P,y*=P,w.gridSnapping&&(x=le(x),y=le(y),r=le(r),s=le(s)),t.shiftKey){var _e=d.path;if(_e)var Ae=_e.dragging?_e.dragging[0]:r,Ne=_e.dragging?_e.dragging[1]:s;else var Ae=r,Ne=s;var C=q(Ae,Ne,x,y);x=C.x,y=C.y}Te&&"none"!==Te.getAttribute("display")&&(g*=P,v*=P,Q(Te,{x:Math.min(l*P,g),y:Math.min(u*P,v),width:Math.abs(g-l*P),height:Math.abs(v-u*P)},100)),rn.mouseMove(x,y);break;case"textedit":x*=P,y*=P,nn.mouseMove(p,f);break;case"rotate":var F=o.getBBox(n),xe=F.x+F.width/2,Se=F.y+F.height/2,Pe=G(n),Ie=V(xe,Se,Pe);xe=Ie.x,Se=Ie.y;var W=(Math.atan2(Se-y,xe-x)*(180/Math.PI)-90)%360;if(w.gridSnapping&&(W=le(W)),t.shiftKey){var Be=45;W=Math.round(W/Be)*Be}S.setRotationAngle(-180>W?360+W:W,!0),je("transition",L)}Me("mouseMove",{event:t,mouse_x:p,mouse_y:f,selected:n})}},m=S.mouseUpCallback=function(t){if(2!==t.button){var i=_e;if(_e=null,be){var r=V(t.pageX,t.pageY,Ze),s=r.x*P,c=r.y*P,d=s/P,p=c/P,f=Z(De()),m=!1,g=d,v=p,y=!1;switch(be=!1,we){case"resize":case"multiselect":null!=Te&&(Te.setAttribute("display","none"),Ae=[]),we="select";case"select":if(null!=L[0]){if(null==L[1]){var b=L[0];switch(b.tagName){case"g":case"use":case"image":case"foreignObject":break;default:Ee.fill=b.getAttribute("fill"),Ee.fill_opacity=b.getAttribute("fill-opacity"),Ee.stroke=b.getAttribute("stroke"),Ee.stroke_opacity=b.getAttribute("stroke-opacity"),Ee.stroke_width=b.getAttribute("stroke-width"),Ee.stroke_dasharray=b.getAttribute("stroke-dasharray"),Ee.stroke_linejoin=b.getAttribute("stroke-linejoin"),Ee.stroke_linecap=b.getAttribute("stroke-linecap")}"text"==b.tagName&&(Ce.font_size=b.getAttribute("font-size"),Ce.font_family=b.getAttribute("font-family")),se.requestSelector(b).showGrips(!0)}if(He(),g!=l||v!=u)for(var x=L.length,k=0;x>k&&null!=L[k];++k)L[k].firstChild||se.requestSelector(L[k]).resize();else{var C=t.target;"path"===L[0].nodeName&&null==L[1]?rn.select(L[0]):t.shiftKey&&i!=C&&S.removeFromSelection([C])}var E=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];if(i&&"line"==i.nodeName&&(i.getAttribute("marker-end")||i.getAttribute("marker-start"))){var r={start:i.getAttribute("marker-start"),end:i.getAttribute("marker-end")};i.removeAttribute("marker-start"),i.removeAttribute("marker-end"),function(t,e){setTimeout(function(){t.setAttribute("marker-start",e.start),t.setAttribute("marker-end",e.end)},0)}(i,r)}else i&&"g"==i.nodeName&&E(i.childNodes)}};if(E(L),n.supportsNonScalingStroke()){var _=L[0];_&&(_.removeAttribute("style"),o.walkTree(_,function(t){t.removeAttribute("style")}))}}return;case"zoom":null!=Te&&Te.setAttribute("display","none");var T=t.shiftKey?.5:2;return void je("zoomed",{x:Math.min(l,g),y:Math.min(u,v),width:Math.abs(g-l),height:Math.abs(v-u),factor:T});case"fhpath":var A=f.getAttribute("points"),I=A.indexOf(",");m=I>=0?A.indexOf(",",I+1)>=0:A.indexOf(" ",A.indexOf(" ")+1)>=0,m&&(f=rn.smoothPolylineIntoPath(f));break;case"arrow":case"dbarrow":case"line":var M=e(f).attr(["x1","x2","y1","y2"]);m=M.x1!=M.x2||M.y1!=M.y2;break;case"foreignObject":case"square":case"rect":case"image":var M=e(f).attr(["width","height"]);m=0!=M.width||0!=M.height||"image"===we;break;case"circle":m=0!=f.getAttribute("r");break;case"ellipse":var M=e(f).attr(["rx","ry"]);m=null!=M.rx||null!=M.ry;break;case"fhellipse":h.maxx-h.minx>0&&h.maxy-h.miny>0&&(f=D({element:"ellipse",curStyles:!0,attr:{cx:(h.minx+h.maxx)/2,cy:(h.miny+h.maxy)/2,rx:(h.maxx-h.minx)/2,ry:(h.maxy-h.miny)/2,id:De()}}),je("changed",[f]),m=!0);break;case"fhrect":h.maxx-h.minx>0&&h.maxy-h.miny>0&&(f=D({element:"rect",curStyles:!0,attr:{x:h.minx,y:h.miny,width:h.maxx-h.minx,height:h.maxy-h.miny,id:De()}}),je("changed",[f]),m=!0);break;case"text":m=!0,Je([f]),nn.start(f);break;case"path":f=null,be=!0;var O=rn.mouseUp(t,f,s,c);f=O.element,m=O.keep;break;case"pathedit":m=!0,f=null,rn.mouseUp(t);break;case"textedit":m=!1,f=null,nn.mouseUp(t,s,c);break;case"rotate":m=!0,f=null,we="select";var j=S.undoMgr.finishUndoableChange();j.isEmpty()||oe(j),He(),je("changed",L)}var F=Me("mouseUp",{event:t,mouse_x:s,mouse_y:c},!0);if(e.each(F,function(t,e){e&&(m=e.keep||m,f=e.element,be=e.started||be)}),m||null==f){if(null!=f){S.addedNew=!0,y&&a.convertAttrs(f);var R,$=.2;if(pe.beginElement&&f.getAttribute("opacity")!=B.opacity){R=e(pe).clone().attr({to:B.opacity,dur:$}).appendTo(f);try{R[0].beginElement()}catch(q){}}else $=0;setTimeout(function(){R&&R.remove(),f.setAttribute("opacity",B.opacity),f.setAttribute("style","pointer-events:inherit"),K(f),"path"===we?rn.toEditMode(f):w.selectNew&&Je([f],!0),oe(new ne(f)),je("changed",[f])},1e3*$)}}else{N().releaseId(De()),f.parentNode.removeChild(f),f=null;for(var C=t.target;"g"==C.parentNode.parentNode.tagName;)C=C.parentNode;"path"==we&&drawn_path||"selectorParentGroup"==C.parentNode.id||"svgcanvas"==C.id||"svgroot"==C.id||(S.setMode("select"),Je([C],!0))}xe=null}}},g=function(t){var e=t.target,n=e.parentNode;if(n!==I){var i=tn(t),r=i.tagName;if("text"===r&&"textedit"!==we){var a=V(t.pageX,t.pageY,Ze);nn.select(i,a.x,a.y)}"g"!==r&&"a"!==r||!Y(i)||(bn(i),i=L[0],Qe(!0)),I&&dn(),"g"!==n.tagName&&"a"!==n.tagName||n===N().getCurrentLayer()||i===se.selectorParentGroup||hn(i)}},v=function(t){return t.preventDefault(),!1};e("#svgroot").mousedown(p).mousemove(f).click(v).dblclick(g).mouseup(m),e(window).mouseup(m),e(t).bind("mousewheel DOMMouseScroll",function(t){if(t.shiftKey){t.preventDefault(),Ze=_.getScreenCTM().inverse();var e=V(t.pageX,t.pageY,Ze),n={x:e.x,y:e.y,width:0,height:0};t.wheelDelta?t.wheelDelta>=120?n.factor=2:t.wheelDelta<=-120&&(n.factor=.5):t.detail&&(t.detail>0?n.factor=.5:t.detail<0&&(n.factor=2)),n.factor&&je("zoomed",n)}})}();var en=function(t){e(t).click(function(t){t.preventDefault()})},nn=S.textActions=function(){function t(t){var n=""===m.value;if(e(m).focus(),!arguments.length)if(n)t=0;else{if(m.selectionEnd!==m.selectionStart)return;t=m.selectionEnd}var i;if(i=_[t],n||m.setSelectionRange(t,t),g=Z("text_cursor"),g||(g=document.createElementNS(f,"line"),Q(g,{id:"text_cursor",stroke:"#333","stroke-width":1}),g=Z("selectorParentGroup").appendChild(g)),y||(y=setInterval(function(){var t="none"===g.getAttribute("display");g.setAttribute("display",t?"inline":"none")},600)),i){var r=u(i.x,b.y),a=u(i.x,b.y+b.height);Q(g,{x1:r.x,y1:r.y,x2:a.x,y2:a.y,visibility:"visible",display:"inline"})}v&&v.setAttribute("d","")}function i(e,n,i){if(e===n)return void t(n);i||m.setSelectionRange(e,n),v=Z("text_selectblock"),v||(v=document.createElementNS(f,"path"),Q(v,{id:"text_selectblock",fill:"green",opacity:.5,style:"pointer-events:none"}),Z("selectorParentGroup").appendChild(v));var r=_[e],a=_[n];g.setAttribute("visibility","hidden");var o=u(r.x,b.y),s=u(r.x+(a.x-r.x),b.y),l=u(r.x,b.y+b.height),c=u(r.x+(a.x-r.x),b.y+b.height),d="M"+o.x+","+o.y+" L"+s.x+","+s.y+" "+c.x+","+c.y+" "+l.x+","+l.y+"z";Q(v,{d:d,display:"inline"})}function r(t,e){var n=E.createSVGPoint();if(n.x=t,n.y=e,1==_.length)return 0;var i=p.getCharNumAtPosition(n);0>i?(i=_.length-2,t<=_[0].x&&(i=0)):i>=_.length-2&&(i=_.length-2);var r=_[i],a=r.x+r.width/2;return t>a&&i++,i}function a(e,n){t(r(e,n))}function s(t,e,n){var a=m.selectionStart,o=r(t,e),s=Math.min(a,o),l=Math.max(a,o);i(s,l,!n)}function l(t,e){var n={x:t,y:e};if(n.x/=P,n.y/=P,x){var i=V(n.x,n.y,x.inverse());n.x=i.x,n.y=i.y}return n}function u(t,e){var n={x:t,y:e};if(x){var i=V(n.x,n.y,x);n.x=i.x,n.y=i.y}return n.x*=P,n.y*=P,n}function c(){g&&g.setAttribute("visibility","hidden")}function d(t){i(0,p.textContent.length),e(this).unbind(t)}function h(t){if(C&&p){var n=V(t.pageX,t.pageY,Ze),a=n.x*P,o=n.y*P,s=l(a,o),u=r(s.x,s.y),c=p.textContent,h=c.substr(0,u).replace(/[a-z0-9]+$/i,"").length,f=c.substr(u).match(/^[a-z0-9]+/i),m=(f?f[0].length:0)+u;i(h,m),e(t.target).click(d),setTimeout(function(){e(t.target).unbind("click",d)},300)}}var p,m,g,v,y,b,x,w,k,C,_=[];return{hideCursor:c,select:function(t,e,n){p=t,nn.toEditMode(e,n)},start:function(t){p=t,nn.toEditMode()},mouseDown:function(t,e,n,i){var r=l(n,i);m.focus(),a(r.x,r.y),w=n,k=i},mouseMove:function(t,e){var n=l(t,e);s(n.x,n.y)},mouseUp:function(t,e,n){var i=l(e,n);s(i.x,i.y,!0),t.target!==p&&w+2>e&&e>w-2&&k+2>n&&n>k-2&&nn.toSelectMode(!0)},setCursor:t,toEditMode:function(n,i){C=!1,we="textedit",se.requestSelector(p).showGrips(!1);se.requestSelector(p).selectorRect;if(nn.init(),e(p).css("cursor","text"),arguments.length){var r=l(n,i);a(r.x,r.y)}else t();setTimeout(function(){C=!0},300)},toSelectMode:function(t){we="select",clearInterval(y),y=null,v&&e(v).attr("display","none"),g&&e(g).attr("visibility","hidden"),e(p).css("cursor","move"),t&&(Qe(),e(p).css("cursor","move"),je("selected",[p]),Ke([p],!0)),p&&!p.textContent.length&&S.deleteSelectedElements(),e(m).blur(),p=!1},setInputElem:function(t){m=t},clear:function(){"textedit"==we&&nn.toSelectMode()},init:function(){if(p){p.parentNode||(p=L[0],se.requestSelector(p).showGrips(!1));var t=p.textContent,r=t.length,a=p.getAttribute("transform");if(b=o.getBBox(p),x=a?G(p):null,_=Array(r),m.focus(),e(p).unbind("dblclick",h).dblclick(h),!r)var s={x:b.x+b.width/2,width:0};for(var l=0;r>l;l++){var u=p.getStartPositionOfChar(l),s=p.getEndPositionOfChar(l);if(!n.supportsGoodTextCharPos()){var c=S.contentW*P;u.x-=c,s.x-=c,u.x/=P,s.x/=P}_[l]={x:u.x,y:b.y,width:s.x-u.x,height:b.height}}_.push({x:s.x,width:0}),i(m.selectionStart,m.selectionEnd,!0)}}}}(),rn=S.pathActions=function(){function i(t){t.setAttribute("d",rn.convertPath(t))}var s,l,u,c=!1;d.Path.prototype.endChanges=function(t){n.isWebkit()&&i(this.elem);var e=new re(this.elem,{d:this.last_d},t);oe(e),je("changed",[this.elem])},d.Path.prototype.addPtsToSelection=function(t){e.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n],r=this.segs[i];r.ptgrip&&-1==this.selected_pts.indexOf(i)&&i>=0&&this.selected_pts.push(i)}this.selected_pts.sort();for(var n=this.selected_pts.length,a=new Array(n);n--;){var o=this.selected_pts[n],r=this.segs[o];r.select(!0),a[n]=r.ptgrip}rn.canDeleteNodes=!0,rn.closed_subpath=this.subpathIsClosed(this.selected_pts[0]),je("selected",a)};var s=null,h=null,m=!1,g=function(t){var e=t.points,n=e.numberOfItems;if(n>=4){var i=e.getItem(0),r=null,a=[];a.push(["M",i.x,",",i.y," C"].join(""));for(var o=1;n-4>=o;o+=3){var s=e.getItem(o),l=e.getItem(o+1),u=e.getItem(o+2);if(r){var c=d.smoothControlPoints(r,s,i);if(c&&2==c.length){var h=a[a.length-1].split(",");h[2]=c[0].x,h[3]=c[0].y,a[a.length-1]=h.join(","),s=c[1]}}a.push([s.x,s.y,l.x,l.y,u.x,u.y].join(",")),i=u,r=l}for(a.push("L");n>o;++o){var p=e.getItem(o);a.push([p.x,p.y].join(","))}a=a.join(" "),t=D({element:"path",curStyles:!0,attr:{id:De(),d:a,fill:"none"}})}return t};return{mouseDown:function(n,i,r,a){if("path"!==we){if(d.path){d.path.storeD();var o=n.target.id;if("pathpointgrip_"==o.substr(0,14)){var s=d.path.cur_pt=parseInt(o.substr(14));d.path.dragging=[r,a];var u=d.path.segs[s];n.shiftKey?u.selected?d.path.removePtFromSelection(s):d.path.addPtsToSelection(s):((d.path.selected_pts.length<=1||!u.selected)&&d.path.clearSelection(),d.path.addPtsToSelection(s))}else if(0==o.indexOf("ctrlpointgrip_")){d.path.dragging=[r,a];var p=o.split("_")[1].split("c"),s=p[0]-0,m=p[1]-0;d.path.selectPt(s,m)}d.path.dragging||(null==Te&&(Te=se.getRubberBandBox()),Q(Te,{x:r*P,y:a*P,width:0,height:0,display:"inline"},100))}}else{mouse_x=r,mouse_y=a;var g=mouse_x/P,v=mouse_y/P,y=Z("path_stretch_line");l=[g,v],w.gridSnapping&&(g=le(g),v=le(v),mouse_x=le(mouse_x),mouse_y=le(mouse_y)),y||(y=document.createElementNS(f,"path"),Q(y,{id:"path_stretch_line",stroke:"#22C","stroke-width":"0.5",fill:"none"}),y=Z("selectorParentGroup").appendChild(y)),y.setAttribute("display","inline");var b=null;if(h){for(var x=h.pathSegList,k=x.numberOfItems,S=6/P,C=!1;k;){k--;var E=x.getItem(k),_=E.x,T=E.y;if(g>=_-S&&_+S>=g&&v>=T-S&&T+S>=v){C=!0;break}}var o=De();d.removePath_(o);var A=Z(o),N=x.numberOfItems;if(C){if(1>=k&&N>=2){var I=x.getItem(0).x,M=x.getItem(0).y,L=y.pathSegList.getItem(1);if(4===L.pathSegType)var O=h.createSVGPathSegLinetoAbs(I,M);else var O=h.createSVGPathSegCurvetoCubicAbs(I,M,L.x1/P,L.y1/P,I,M);var j=h.createSVGPathSegClosePath();x.appendItem(O),x.appendItem(j)
}else if(3>N)return b=!1;if(e(y).remove(),element=A,h=null,be=!1,c){d.path.matrix&&We(A,{},d.path.matrix.inverse());var V=A.getAttribute("d"),F=e(d.path.elem).attr("d");return e(d.path.elem).attr("d",F+V),e(A).remove(),d.path.matrix&&d.recalcRotatedPath(),d.path.init(),rn.toEditMode(d.path.elem),d.path.selectPt(),!1}}else{if(!e.contains(t,tn(n)))return console.log("Clicked outside canvas"),!1;var R=h.pathSegList.numberOfItems,$=h.pathSegList.getItem(R-1),G=$.x,H=$.y;if(n.shiftKey){var z=q(G,H,g,v);g=z.x,v=z.y}var L=y.pathSegList.getItem(1);if(4===L.pathSegType)var O=h.createSVGPathSegLinetoAbs(Be(g),Be(v));else var O=h.createSVGPathSegCurvetoCubicAbs(Be(g),Be(v),L.x1/P,L.y1/P,L.x2/P,L.y2/P);h.pathSegList.appendItem(O),g*=P,v*=P,y.setAttribute("d",["M",g,v,g,v].join(" "));var U=R;c&&(U+=d.path.segs.length),d.addPointGrip(U,g,v)}}else{d_attr="M"+g+","+v+" ",h=D({element:"path",curStyles:!0,attr:{d:d_attr,id:Oe(),opacity:B.opacity}}),y.setAttribute("d",["M",mouse_x,mouse_y,mouse_x,mouse_y].join(" "));var U=c?d.path.segs.length:0;d.addPointGrip(U,mouse_x,mouse_y)}}},mouseMove:function(t,e){if(m=!0,"path"!==we)if(d.path.dragging){var n=d.getPointFromGrip({x:d.path.dragging[0],y:d.path.dragging[1]},d.path),i=d.getPointFromGrip({x:t,y:e},d.path),a=i.x-n.x,o=i.y-n.y;d.path.dragging=[t,e],d.path.dragctrl?d.path.moveCtrl(a,o):d.path.movePts(a,o)}else d.path.selected_pts=[],d.path.eachSeg(function(){var t=this;if(t.next||t.prev){var e=(t.item,Te.getBBox()),n=d.getGripPt(t),i={x:n.x,y:n.y,width:0,height:0},a=r.rectsIntersect(e,i);this.select(a),a&&d.path.selected_pts.push(t.index)}});else{if(!h)return;var s=h.pathSegList,c=s.numberOfItems-1;if(l){var p=d.addCtrlGrip("1c1"),f=d.addCtrlGrip("0c2");p.setAttribute("cx",t),p.setAttribute("cy",e),p.setAttribute("display","inline");var g=l[0],v=l[1],y=(s.getItem(c),t/P),b=e/P,x=g+(g-y),w=v+(v-b);f.setAttribute("cx",x*P),f.setAttribute("cy",w*P),f.setAttribute("display","inline");var k=d.getCtrlLine(1);if(Q(k,{x1:t,y1:e,x2:x*P,y2:w*P,display:"inline"}),0===c)u=[t,e];else{var S,C,E=s.getItem(c-1),S=E.x,C=E.y;6===E.pathSegType?(S+=S-E.x2,C+=C-E.y2):u&&(S=u[0]/P,C=u[1]/P),d.replacePathSeg(6,c,[g,v,S,C,x,w],h)}}else{var _=Z("path_stretch_line");if(_){var T=s.getItem(c);if(6===T.pathSegType){var A=T.x+(T.x-T.x2),N=T.y+(T.y-T.y2);d.replacePathSeg(6,1,[t,e,A*P,N*P,t,e],_)}else u?d.replacePathSeg(6,1,[t,e,u[0],u[1],t,e],_):d.replacePathSeg(4,1,[t,e],_)}}}},mouseUp:function(t,e){if("path"===we)return l=null,h||(e=Z(De()),be=!1,u=null),{keep:!0,element:e};if(d.path.dragging){var n=d.path.cur_pt;d.path.dragging=!1,d.path.dragctrl=!1,d.path.update(),m&&d.path.endChanges("Move path point(s)"),t.shiftKey||m||d.path.selectPt(n)}else Te&&"none"!=Te.getAttribute("display")?(Te.setAttribute("display","none"),Te.getAttribute("width")<=2&&Te.getAttribute("height")<=2&&rn.toSelectMode(t.target)):rn.toSelectMode(t.target);m=!1},toEditMode:function(t){d.path=d.getPath_(t),we="pathedit",Qe(),d.path.show(!0).update(),d.path.oldbbox=o.getBBox(d.path.elem),c=!1},toSelectMode:function(t){var e=t==d.path.elem;we="select",d.path.show(!1),s=!1,Qe(),d.path.matrix&&d.recalcRotatedPath(),e&&(je("selected",[t]),Ke([t],!0))},addSubPath:function(t){t?(we="path",c=!0):(rn.clear(!0),rn.toEditMode(d.path.elem))},select:function(t){s===t?(rn.toEditMode(t),we="pathedit"):s=t},reorient:function(){var t=L[0];if(t){var e=Y(t);if(0!=e){var n=new ae("Reorient path"),i={d:t.getAttribute("d"),transform:t.getAttribute("transform")};n.addSubCommand(new re(t,i)),Qe(),this.resetOrientation(t),oe(n),d.getPath_(t).show(!1).matrix=null,this.clear(),Ke([t],!0),je("changed",L)}}},clear:function(){if(s=null,h){var t=Z(De());e(Z("path_stretch_line")).remove(),e(t).remove(),e(Z("pathpointgrip_container")).find("*").attr("display","none"),h=u=null,be=!1}else"pathedit"==we&&this.toSelectMode();d.path&&d.path.init().show(!1)},resetOrientation:function(t){if(null==t||"path"!=t.nodeName)return!1;var n=O(t),i=$(n).matrix;n.clear(),t.removeAttribute("transform");for(var r=t.pathSegList,a=r.numberOfItems,o=0;a>o;++o){var s=r.getItem(o),l=s.pathSegType;if(1!=l){var u=[];e.each(["",1,2],function(t,e){var n=s["x"+e],r=s["y"+e];if(void 0!==n&&void 0!==r){var a=V(n,r,i);u.splice(u.length,0,a.x,a.y)}}),d.replacePathSeg(l,o,u,t)}}p(t,i)},zoomChange:function(){"pathedit"==we&&d.path.update()},getNodePoint:function(){var t=d.path.selected_pts.length?d.path.selected_pts[0]:1,e=d.path.segs[t];return{x:e.item.x,y:e.item.y,type:e.type}},linkControlPoints:function(t){d.setLinkControlPoints(t)},clonePathNode:function(){d.path.storeD();for(var t=d.path.selected_pts,e=(d.path.segs,t.length),n=[];e--;){var i=t[e];d.path.addSeg(i),n.push(i+e),n.push(i+e+1)}d.path.init().addPtsToSelection(n),d.path.endChanges("Clone path node(s)")},opencloseSubPath:function(){var t=d.path.selected_pts;if(1===t.length){var e=d.path.elem,n=e.pathSegList,i=(n.numberOfItems,t[0]),r=null,a=null;if(d.path.eachSeg(function(t){return 2===this.type&&i>=t&&(a=this.item),i>=t?!0:2===this.type?(r=t,!1):1===this.type?(r=!1,!1):void 0}),null==r&&(r=d.path.segs.length-1),r!==!1){var o=e.createSVGPathSegLinetoAbs(a.x,a.y),s=e.createSVGPathSegClosePath();return r==d.path.segs.length-1?(n.appendItem(o),n.appendItem(s)):(d.insertItemBefore(e,s,r),d.insertItemBefore(e,o,r)),void d.path.init().selectPt(r+1)}var l=d.path.segs[i];if(l.mate)return n.removeItem(i),n.removeItem(i),void d.path.init().selectPt(i-1);for(var u,c,h=0;h<n.numberOfItems;h++){var p=n.getItem(h);if(2===p.pathSegType)u=h;else if(h===i)n.removeItem(u);else if(1===p.pathSegType&&h>i){c=h-1,n.removeItem(h);break}}for(var f=i-u-1;f--;)d.insertItemBefore(e,n.getItem(u),c);var m=n.getItem(u);d.replacePathSeg(2,u,[m.x,m.y]);var h=i;d.path.init().selectPt(0)}},deletePathNode:function(){if(rn.canDeleteNodes){d.path.storeD();for(var t=d.path.selected_pts,n=t.length;n--;){var i=t[n];d.path.deleteSeg(i)}var r=function(){var t=d.path.elem.pathSegList,e=t.numberOfItems,n=function(e,n){for(;n--;)t.removeItem(e)};if(1>=e)return!0;for(;e--;){var i=t.getItem(e);if(1===i.pathSegType){var a=t.getItem(e-1),o=t.getItem(e-2);if(2===a.pathSegType){n(e-1,2),r();break}if(2===o.pathSegType){n(e-2,3),r();break}}else if(2===i.pathSegType&&e>0){var s=t.getItem(e-1).pathSegType;if(2===s){n(e-1,1),r();break}if(1===s&&t.numberOfItems-1===e){n(e,1),r();break}}}return!1};if(r(),d.path.elem.pathSegList.numberOfItems<=1)return rn.toSelectMode(d.path.elem),void S.deleteSelectedElements();if(d.path.init(),d.path.clearSelection(),window.opera){var a=e(d.path.elem);a.attr("d",a.attr("d"))}d.path.endChanges("Delete path node(s)")}},smoothPolylineIntoPath:g,setSegType:function(t){d.path.setSegType(t)},moveNode:function(t,e){var n=d.path.selected_pts;if(n.length){d.path.storeD();var i=d.path.segs[n[0]],r={x:0,y:0};r[t]=e-i.item[t],i.move(r.x,r.y),d.path.endChanges("Move path point")}},fixEnd:function(t){for(var e,r=t.pathSegList,a=r.numberOfItems,o=0;a>o;++o){var s=r.getItem(o);if(2===s.pathSegType&&(e=s),1===s.pathSegType){var l=r.getItem(o-1);if(l.x!=e.x||l.y!=e.y){var u=t.createSVGPathSegLinetoAbs(e.x,e.y);d.insertItemBefore(t,u,o),rn.fixEnd(t);break}}}n.isWebkit()&&i(t)},convertPath:function(t,n){for(var i=t.pathSegList,r=i.numberOfItems,o=0,s=0,l="",u=null,c=0;r>c;++c){var d=i.getItem(c),h=d.x||0,p=d.y||0,f=d.x1||0,m=d.y1||0,g=d.x2||0,v=d.y2||0,y=d.pathSegType,b=ze[y]["to"+(n?"Lower":"Upper")+"Case"](),x=function(t,n,i){var n=n?" "+n.join(" "):"",i=i?" "+a.shortFloat(i):"";e.each(t,function(e,n){t[e]=a.shortFloat(n)}),l+=b+t.join(" ")+n+i};switch(y){case 1:l+="z";break;case 12:h-=o;case 13:n?(o+=h,b="l"):(h+=o,o=h,b="L"),x([[h,s]]);break;case 14:p-=s;case 15:n?(s+=p,b="l"):(p+=s,s=p,b="L"),x([[o,p]]);break;case 2:case 4:case 18:h-=o,p-=s;case 5:case 3:u&&1===i.getItem(c-1).pathSegType&&!n&&(o=u[0],s=u[1]);case 19:n?(o+=h,s+=p):(h+=o,p+=s,o=h,s=p),3===y&&(u=[o,s]),x([[h,p]]);break;case 6:h-=o,f-=o,g-=o,p-=s,m-=s,v-=s;case 7:n?(o+=h,s+=p):(h+=o,f+=o,g+=o,p+=s,m+=s,v+=s,o=h,s=p),x([[f,m],[g,v],[h,p]]);break;case 8:h-=o,f-=o,p-=s,m-=s;case 9:n?(o+=h,s+=p):(h+=o,f+=o,p+=s,m+=s,o=h,s=p),x([[f,m],[h,p]]);break;case 10:h-=o,p-=s;case 11:n?(o+=h,s+=p):(h+=o,p+=s,o=h,s=p),x([[d.r1,d.r2]],[d.angle,d.largeArcFlag?1:0,d.sweepFlag?1:0],[h,p]);break;case 16:h-=o,g-=o,p-=s,v-=s;case 17:n?(o+=h,s+=p):(h+=o,g+=o,p+=s,v+=s,o=h,s=p),x([[g,v],[h,p]])}}return l}}}(),an=this.removeUnusedDefElems=function(){var t=_.getElementsByTagNameNS(f,"defs");if(!t||!t.length)return 0;for(var n=[],i=0,r=["fill","stroke","filter","marker-start","marker-mid","marker-end"],a=r.length,o=_.getElementsByTagNameNS(f,"*"),s=o.length,l=0;s>l;l++){for(var u=o[l],c=0;a>c;c++){var d=z(u.getAttribute(r[c]));d&&n.push(d.substr(1))}var h=U(u);h&&0===h.indexOf("#")&&n.push(h.substr(1))}var p=e(t).find("linearGradient, radialGradient, filter, marker, svg, symbol");for(defelem_ids=[],l=p.length;l--;){var m=p[l],g=m.id;n.indexOf(g)<0&&(Ie[g]=m,m.parentNode.removeChild(m),i++)}return i};this.svgCanvasToString=function(){for(;an()>0;);rn.clear(!0),e.each(_.childNodes,function(t,e){t&&8===e.nodeType&&e.data.indexOf("Created with")>=0&&_.insertBefore(e,_.firstChild)}),I&&(dn(),Je([I]));var t=[];try{e(_).find("g:data(gsvg)").each(function(){for(var n=this.attributes,i=n.length,r=0;i>r;r++)("id"==n[r].nodeName||"style"==n[r].nodeName)&&i--;if(0>=i){var a=this.firstChild;t.push(a),e(this).replaceWith(a)}})}catch(n){console.log(n)}var i=this.svgToString(_,0);return t.length&&e(t).each(function(){Re(this)}),i},this.svgToString=function(t,n){var i=new Array,r=o.toXml,s=w.baseUnit,l=new RegExp("^-?[\\d\\.]+"+s+"$");if(t){K(t);for(var u,c,d=t.attributes,h=t.childNodes,c=0;n>c;c++)i.push(" ");if(i.push("<"),i.push(t.nodeName),"svgcontent"===t.id){var p=pn(),m="";"px"!==s&&(p.w=a.convertUnit(p.w,s)+s,p.h=a.convertUnit(p.h,s)+s),i.push(' width="'+p.w+'" height="'+p.h+'"'+m+' xmlns="'+f+'"');var g={};e(t).find("*").andSelf().each(function(){e.each(this.attributes,function(t,e){var n=e.namespaceURI;n&&!g[n]&&"xmlns"!==J[n]&&"xml"!==J[n]&&(g[n]=!0,i.push(" xmlns:"+J[n]+'="'+n+'"'))})});for(var c=d.length,v=["width","height","xmlns","x","y","viewBox","id","overflow"];c--;){u=d.item(c);var y=r(u.nodeValue);0!==u.nodeName.indexOf("xmlns:")&&""!=y&&-1==v.indexOf(u.localName)&&(!u.namespaceURI||J[u.namespaceURI])&&(i.push(" "),i.push(u.nodeName),i.push('="'),i.push(y),i.push('"'))}}else{if("defs"===t.nodeName&&!t.firstChild)return;for(var b=["-moz-math-font-style","_moz-math-font-style"],c=d.length-1;c>=0;c--){u=d.item(c);var y=r(u.nodeValue);if(!(b.indexOf(u.localName)>=0)&&""!=y){if(0===y.indexOf("pointer-events"))continue;if("class"===u.localName&&0===y.indexOf("se_"))continue;if(i.push(" "),"d"===u.localName&&(y=rn.convertPath(t,!0)),isNaN(y)?l.test(y)&&(y=a.shortFloat(y)+s):y=a.shortFloat(y),ye.apply&&"image"===t.nodeName&&"href"===u.localName&&ye.images&&"embed"===ye.images){var x=me[y];x&&(y=x)}(!u.namespaceURI||u.namespaceURI==f||J[u.namespaceURI])&&(i.push(u.nodeName),i.push('="'),i.push(y),i.push('"'))}}}if(t.hasChildNodes()){i.push(">"),n++;for(var k=!1,c=0;c<h.length;c++){var S=h.item(c);switch(S.nodeType){case 1:i.push("\n"),i.push(this.svgToString(h.item(c),n));break;case 3:var C=S.nodeValue.replace(/^\s+|\s+$/g,"");""!=C&&(k=!0,i.push(r(C)+""));break;case 4:i.push("\n"),i.push(new Array(n+1).join(" ")),i.push("<![CDATA["),i.push(S.nodeValue),i.push("]]>");break;case 8:i.push("\n"),i.push(new Array(n+1).join(" ")),i.push("<!--"),i.push(S.data),i.push("-->")}}if(n--,!k){i.push("\n");for(var c=0;n>c;c++)i.push(" ")}i.push("</"),i.push(t.nodeName),i.push(">")}else i.push("/>")}return i.join("")},this.embedImage=function(t,n){e(new Image).load(function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);try{var i=";svgedit_url="+encodeURIComponent(t);i=e.toDataURL().replace(";base64",i+";base64"),me[t]=i}catch(r){me[t]=!1}ge=t,n&&n(me[t])}).attr("src",t)},this.setGoodImage=function(t){ge=t},this.open=function(){},this.save=function(t){Qe(),t&&e.extend(ye,t),ye.apply=!0;var n=this.svgCanvasToString();je("saved",n)},this.rasterExport=function(){Qe();var t=[],n={feGaussianBlur:ue.exportNoBlur,foreignObject:ue.exportNoforeignObject,"[stroke-dasharray]":ue.exportNoDashArray},i=e(_);"font"in e("<canvas>")[0].getContext("2d")||(n.text=ue.exportNoText),e.each(n,function(e,n){i.find(e).length&&t.push(n)});var r=this.svgCanvasToString();je("exported",{svg:r,issues:t})},this.getSvgString=function(){return ye.apply=!1,this.svgCanvasToString()},this.randomizeIds=function(){arguments.length>0&&0==arguments[0]?c.randomizeIds(!1,N()):c.randomizeIds(!0,N())};var on=this.uniquifyElems=function(t){var n={},i=["filter","linearGradient","pattern","radialGradient","symbol","textPath","use"];o.walkTree(t,function(t){if(1==t.nodeType){t.id&&(t.id in n||(n[t.id]={elem:null,attrs:[],hrefs:[]}),n[t.id].elem=t),e.each(de,function(e,i){var r=t.getAttributeNode(i);if(r){var a=o.getUrlFromAttr(r.value),s=a?a.substr(1):null;s&&(s in n||(n[s]={elem:null,attrs:[],hrefs:[]}),n[s].attrs.push(r))}});var r=o.getHref(t);if(r&&i.indexOf(t.nodeName)>=0){var a=r.substr(1);a&&(a in n||(n[a]={elem:null,attrs:[],hrefs:[]}),n[a].hrefs.push(t))}}});for(var r in n)if(r){var a=n[r].elem;if(a){var s=Oe();a.id=s;for(var l=n[r].attrs,u=l.length;u--;){var c=l[u];c.ownerElement.setAttribute(c.name,"url(#"+s+")")}for(var d=n[r].hrefs,h=d.length;h--;){var p=d[h];o.setHref(p,"#"+s)}}}},sn=this.setUseData=function(t){var n=e(t);"use"!==t.tagName&&(n=n.find("use")),n.each(function(){var t=U(this).substr(1),n=Z(t);n&&(e(this).data("ref",n),("symbol"==n.tagName||"svg"==n.tagName)&&e(this).data("symbol",n).data("ref",n))})},ln=this.convertGradients=function(t){var i=e(t).find("linearGradient, radialGradient");!i.length&&n.isWebkit()&&(i=e(t).find("*").filter(function(){return this.tagName.indexOf("Gradient")>=0})),i.each(function(){var t=this;if("userSpaceOnUse"===e(t).attr("gradientUnits")){var n=e(_).find('[fill="url(#'+t.id+')"],[stroke="url(#'+t.id+')"]');if(!n.length)return;var i=o.getBBox(n[0]);if(!i)return;if("linearGradient"===t.tagName){var r=e(t).attr(["x1","y1","x2","y2"]),a=t.gradientTransform.baseVal;if(a&&a.numberOfItems>0){var s=$(a).matrix,l=V(r.x1,r.y1,s),u=V(r.x2,r.y2,s);r.x1=l.x,r.y1=l.y,r.x2=u.x,r.y2=u.y,t.removeAttribute("gradientTransform")}e(t).attr({x1:(r.x1-i.x)/i.width,y1:(r.y1-i.y)/i.height,x2:(r.x2-i.x)/i.width,y2:(r.y2-i.y)/i.height}),t.removeAttribute("gradientUnits")}}})},un=this.convertToGroup=function(t){t||(t=L[0]);var i,r=e(t),a=new ae;if(r.data("gsvg")){var s=t.firstChild,l=e(s).attr(["x","y"]);e(t.firstChild.firstChild).unwrap(),e(t).removeData("gsvg");var u=O(t),c=E.createSVGTransform();c.setTranslate(l.x,l.y),u.appendItem(c),Ye(t),je("selected",[t])}else if(r.data("symbol")){t=r.data("symbol"),i=r.attr("transform");var d=r.attr(["x","y"]),h=t.getAttribute("viewBox");if(h){var p=h.split(" ");d.x-=+p[0],d.y-=+p[1]}i+=" translate("+(d.x||0)+","+(d.y||0)+")";var m=r.prev();a.addSubCommand(new ie(r[0],r[0].nextSibling,r[0].parentNode)),r.remove();for(var g=e(_).find("use:data(symbol)").length,v=C.createElementNS(f,"g"),y=t.childNodes,b=0;b<y.length;b++)v.appendChild(y[b].cloneNode(!0));if(n.isGecko()){var x=e(fn()).children("linearGradient,radialGradient,pattern").clone();e(v).append(x)}i&&v.setAttribute("transform",i);var w=t.parentNode;if(on(v),n.isGecko()&&e(fn()).append(e(v).find("linearGradient,radialGradient,pattern")),v.id=Oe(),m.after(v),w){if(!g){var k=t.nextSibling;w.removeChild(t),a.addSubCommand(new ie(t,k,w))}a.addSubCommand(new ne(v))}sn(v),ln(n.isGecko()?fn():v),o.walkTreePost(v,function(t){try{Ye(t)}catch(e){console.log(e)}}),e(v).find(ce).each(function(){this.id||(this.id=Oe())}),Je([v]);var S=bn(v,!0);S&&a.addSubCommand(S),oe(a)}else console.log("Unexpected element to ungroup:",t)};this.setSvgString=function(t){try{var r=o.text2xml(t);this.prepareSvg(r);var a=new ae("Change Source"),s=_.nextSibling,l=E.removeChild(_);a.addSubCommand(new ie(l,s,E)),_=C.adoptNode?C.adoptNode(r.documentElement):C.importNode(r.documentElement,!0),E.appendChild(_);var u=e(_);S.current_drawing_=new c.Drawing(_,A);var h=N().getNonce();h?je("setnonce",h):je("unsetnonce"),u.find("image").each(function(){var t=this;en(t);var n=U(this);if(0===n.indexOf("data:")){var i=n.match(/svgedit_url=(.*?);/);if(i){var r=decodeURIComponent(i[1]);e(new Image).load(function(){t.setAttributeNS(m,"xlink:href",r)}).attr("src",r)}}S.embedImage(n)}),u.find("svg").each(function(){if(!e(this).closest("defs").length){on(this);var t=this.parentNode;1===t.childNodes.length&&"g"===t.nodeName?(e(t).data("gsvg",this),t.id=t.id||Oe()):Re(this)}}),n.isGecko()&&u.find("linearGradient, radialGradient, pattern").appendTo(fn()),sn(u),ln(u[0]),o.walkTreePost(_,function(t){try{Ye(t)}catch(e){console.log(e)}});var p={id:"svgcontent",overflow:w.show_outside_canvas?"visible":"hidden"},f=!1;if(u.attr("viewBox")){var g=u.attr("viewBox").split(" ");p.width=g[2],p.height=g[3]}else e.each(["width","height"],function(t,e){var n=u.attr(e);n||(n="100%"),"%"===(n+"").substr(-1)?f=!0:p[e]=H(e,n)});if(cn(),u.children().find(ce).each(function(){this.id||(this.id=Oe())}),f){var v=getStrokedBBox();p.width=v.width+v.x,p.height=v.height+v.y}p.width<=0&&(p.width=100),p.height<=0&&(p.height=100),u.attr(p),this.contentW=p.width,this.contentH=p.height,a.addSubCommand(new ne(_));var y=u.attr(["width","height"]);a.addSubCommand(new re(E,y)),P=1,i.resetListMap(),Qe(),d.clearData(),E.appendChild(se.selectorParentGroup),oe(a),je("changed",[_])}catch(b){return console.log(b),!1}return!0},this.importSvgString=function(t){try{var i=o.encode64(t.length+t).substr(0,32),r=!1;Se[i]&&e(Se[i].symbol).parents("#svgroot").length&&(r=!0);var a=new ae("Import SVG");if(r)var s=Se[i].symbol,l=Se[i].xform;else{var u=o.text2xml(t);this.prepareSvg(u);var c;c=C.adoptNode?C.adoptNode(u.documentElement):C.importNode(u.documentElement,!0),on(c);for(var d=H("width",c.getAttribute("width")),h=H("height",c.getAttribute("height")),p=c.getAttribute("viewBox"),m=p?p.split(" "):[0,0,d,h],g=0;4>g;++g)m[g]=+m[g];var v=(+_.getAttribute("width"),+_.getAttribute("height"));if(h>d)var l="scale("+v/3/m[3]+")";else var l="scale("+v/3/m[2]+")";l="translate(0) "+l+" translate(0)";var s=C.createElementNS(f,"symbol"),y=fn();for(n.isGecko()&&e(c).find("linearGradient, radialGradient, pattern").appendTo(y);c.firstChild;){var b=c.firstChild;s.appendChild(b)}for(var x=c.attributes,w=0;w<x.length;w++){var k=x[w];s.setAttribute(k.nodeName,k.nodeValue)}s.id=Oe(),Se[i]={symbol:s,xform:l},fn().appendChild(s),a.addSubCommand(new ne(s))}var S=C.createElementNS(f,"use");S.id=Oe(),W(S,"#"+s.id),(I||N().getCurrentLayer()).appendChild(S),a.addSubCommand(new ne(S)),Qe(),S.setAttribute("transform",l),Ye(S),e(S).data("symbol",s).data("ref",s),Ke([S]),oe(a),je("changed",[_])}catch(E){return console.log(E),!1}return!0};var cn=S.identifyLayers=function(){dn(),N().identifyLayers()};this.createLayer=function(t){var e=new ae("Create Layer"),n=N().createLayer(t);e.addSubCommand(new ne(n)),oe(e),Qe(),je("changed",[n])},this.cloneLayer=function(t){var n=new ae("Duplicate Layer"),i=C.createElementNS(f,"g"),r=C.createElementNS(f,"title");r.textContent=t,i.appendChild(r);var a=N().getCurrentLayer();e(a).after(i);for(var o=a.childNodes,s=0;s<o.length;s++){var l=o[s];"title"!=l.localName&&i.appendChild($e(l))}Qe(),cn(),n.addSubCommand(new ne(i)),oe(n),S.setCurrentLayer(t),je("changed",[i])},this.deleteCurrentLayer=function(){var t=N().getCurrentLayer(),e=t.nextSibling,n=t.parentNode;if(t=N().deleteCurrentLayer()){var i=new ae("Delete Layer");return i.addSubCommand(new ie(t,e,n)),oe(i),Qe(),je("changed",[n]),!0}return!1},this.setCurrentLayer=function(t){var e=N().setCurrentLayer(o.toXml(t));return e&&Qe(),e},this.renameCurrentLayer=function(t){var e=N();if(e.current_layer){var n=e.current_layer;if(!S.setCurrentLayer(t)){for(var i=new ae("Rename Layer"),r=0;r<e.getNumLayers()&&e.all_layers[r][1]!=n;++r);var a=e.getLayerName(r);e.all_layers[r][0]=o.toXml(t);for(var s=n.childNodes.length,r=0;s>r;++r){var l=n.childNodes.item(r);if(l&&"title"==l.tagName){for(;l.firstChild;)l.removeChild(l.firstChild);return l.textContent=t,i.addSubCommand(new re(l,{"#text":a})),oe(i),je("changed",[n]),!0}}}e.current_layer=n}return!1},this.setCurrentLayerPosition=function(t){var e=N();if(e.current_layer&&t>=0&&t<e.getNumLayers()){for(var n=0;n<e.getNumLayers()&&e.all_layers[n][1]!=e.current_layer;++n);if(n==e.getNumLayers())return!1;if(n!=t){var i=null,r=e.current_layer.nextSibling;return t>n?t<e.getNumLayers()-1&&(i=e.all_layers[t+1][1]):i=e.all_layers[t][1],_.insertBefore(e.current_layer,i),oe(new ee(e.current_layer,r,_)),cn(),S.setCurrentLayer(e.getLayerName(t)),!0}}return!1},this.setLayerVisibility=function(t,e){var n=N(),i=n.getLayerVisibility(t),r=n.setLayerVisibility(t,e);if(!r)return!1;var a=i?"inline":"none";return oe(new re(r,{display:a},"Layer Visibility")),r==n.getCurrentLayer()&&(Qe(),rn.clear()),!0},this.moveSelectedToLayer=function(t){for(var e=null,n=N(),i=0;i<n.getNumLayers();++i)if(n.getLayerName(i)==t){e=n.all_layers[i][1];break}if(!e)return!1;for(var r=new ae("Move Elements to Layer"),a=L,i=a.length;i--;){var o=a[i];if(o){var s=o.nextSibling,l=o.parentNode;e.appendChild(o),r.addSubCommand(new ee(o,s,l))}}return oe(r),!0},this.mergeLayer=function(t){var n=new ae("Merge Layer"),i=N(),r=e(i.current_layer).prev()[0];if(r){var a=i.current_layer.childNodes,o=(a.length,i.current_layer.nextSibling);for(n.addSubCommand(new ie(i.current_layer,o,_));i.current_layer.firstChild;){var s=i.current_layer.firstChild;if("title"!=s.localName){var l=s.nextSibling;r.appendChild(s),n.addSubCommand(new ee(s,l,i.current_layer))}else{var u=s.nextSibling;n.addSubCommand(new ie(s,u,i.current_layer)),i.current_layer.removeChild(s)}}return _.removeChild(i.current_layer),t||(Qe(),cn(),je("changed",[_]),oe(n)),i.current_layer=r,n}},this.mergeAllLayers=function(){var t=new ae("Merge all Layers"),n=N();for(n.current_layer=n.all_layers[n.getNumLayers()-1][1];e(_).children("g").length>1;)t.addSubCommand(S.mergeLayer(!0));Qe(),cn(),je("changed",[_]),oe(t)};var dn=this.leaveContext=function(){var t=ve.length;if(t){for(var e=0;t>e;e++){var n=ve[e],i=he(n,"orig_opac");1!==i?n.setAttribute("opacity",i):n.removeAttribute("opacity"),0===e||"g"===n.nodeName&&!n.getAttribute("id")?n.setAttribute("style","pointer-events: none"):n.setAttribute("style","pointer-events: inherit")}ve=[],Qe(!0),je("contextset",null)}I=null},hn=this.setContext=function(t){dn(),"string"==typeof t&&(t=Z(t)),I=t,e(t).parentsUntil("#svgcontent").andSelf().siblings().each(function(){var t=this.getAttribute("opacity")||1;he(this,"orig_opac",t),this.setAttribute("opacity",.33*t),this.setAttribute("style","pointer-events: none"),ve.push(this)}),Qe(),je("contextset",I)};this.clear=function(){rn.clear(),Qe(),S.clearSvgContentElement(),S.current_drawing_=new c.Drawing(_),S.createLayer("Yunique Markup"),S.undoMgr.resetUndoStack(),se.initGroup(),Te=se.getRubberBandBox(),je("cleared")},this.clearContent=function(){rn.clear(),Qe(),_.children&&_.children[1]&&_.children[1].remove(),S.current_drawing_=new c.Drawing(_),S.createLayer("Yunique Markup"),S.undoMgr.resetUndoStack(),se.initGroup(),Te=se.getRubberBandBox(),je("cleared")},this.linkControlPoints=rn.linkControlPoints,this.getContentElem=function(){return _},this.getRootElem=function(){return E},this.getSelectedElems=function(){return L};var pn=this.getResolution=function(){var t=_.getAttribute("width")/P,e=_.getAttribute("height")/P;return{w:t,h:e,zoom:P}};this.getZoom=function(){return P},this.getVersion=function(){return"svgcanvas.js ($Rev: 2199 $)"},this.setUiStrings=function(t){e.extend(ue,t.notification)},this.setConfig=function(t){e.extend(w,t)},this.getTitle=function(t){if(t=t||L[0]){t=e(t).data("gsvg")||e(t).data("symbol")||t;for(var n=t.childNodes,i=0;i<n.length;i++)if("title"==n[i].nodeName)return n[i].textContent;return""}},this.setGroupTitle=function(t){var n=L[0];n=e(n).data("gsvg")||n;var i=e(n).children("title"),r=new ae("Set Label");if(t.length)if(i.length){var a=i[0];r.addSubCommand(new re(a,{"#text":a.textContent})),a.textContent=t}else a=C.createElementNS(f,"title"),a.textContent=t,e(n).prepend(a),r.addSubCommand(new ne(a));else{var o=i.nextSibling;r.addSubCommand(new ie(i[0],o,n)),i.remove()}oe(r)},this.getDocumentTitle=function(){return S.getTitle(_)},this.setDocumentTitle=function(t){for(var e=_.childNodes,n=!1,i="",r=new ae("Change Image Title"),a=0;a<e.length;a++)if("title"==e[a].nodeName){n=e[a],i=n.textContent;break}n||(n=C.createElementNS(f,"title"),_.insertBefore(n,_.firstChild)),t.length?n.textContent=t:n.parentNode.removeChild(n),r.addSubCommand(new re(n,{"#text":i})),oe(r)},this.getEditorNS=function(t){return t&&_.setAttribute("xmlns:se",g),g},this.setResolution=function(t,n){var i,r=pn(),a=r.w,o=r.h;if("fit"==t){var s=getStrokedBBox();if(!s)return!1;i=new ae("Fit Canvas to Content");var l=Ve();Ke(l);var u=[],c=[];e.each(l,function(){u.push(-1*s.x),c.push(-1*s.y)});var d=S.moveSelectedElements(u,c,!0);i.addSubCommand(d),Qe(),t=Math.round(s.width),n=Math.round(s.height)}if(t!=a||n!=o){var h=E.suspendRedraw(1e3);i||(i=new ae("Change Image Dimensions")),t=H("width",t),n=H("height",n),_.setAttribute("width",t),_.setAttribute("height",n),this.contentW=t,this.contentH=n,i.addSubCommand(new re(_,{width:a,height:o})),_.setAttribute("viewBox",[0,0,t/P,n/P].join(" ")),i.addSubCommand(new re(_,{viewBox:["0 0",a,o].join(" ")})),oe(i),E.unsuspendRedraw(h),je("changed",[_])}return!0},this.getOffset=function(){return e(_).attr(["x","y"])},this.setBBoxZoom=function(t,n,i){var r,a=.85,o=function(t){if(!t)return!1;var e=Math.round(n/t.width*100*a)/100,r=Math.round(i/t.height*100*a)/100,o=Math.min(e,r);return S.setZoom(o),{zoom:o,bbox:t}};if("object"==typeof t){if(r=t,0==r.width||0==r.height){var s=r.zoom?r.zoom:P*r.factor;return S.setZoom(s),{zoom:P,bbox:r}}return o(r)}switch(t){case"selection":if(!L[0])return;var l=e.map(L,function(t){return t?t:void 0});r=getStrokedBBox(l);break;case"canvas":var u=pn();a=.95,r={width:u.w,height:u.h,x:0,y:0};break;case"content":r=getStrokedBBox();break;case"layer":r=getStrokedBBox(Ve(N().getCurrentLayer()));break;default:return}return o(r)},this.setZoom=function(t){var n=pn();_.setAttribute("viewBox","0 0 "+n.w/t+" "+n.h/t),P=t,e.each(L,function(t,e){e&&se.requestSelector(e).resize()}),rn.zoomChange(),Me("zoomChanged",t)},this.getMode=function(){return we},this.setMode=function(t){rn.clear(!0),nn.clear(),Ee=L[0]&&"text"==L[0].nodeName?Ce:B,we=t},this.getColor=function(t){return Ee[t]},this.setColor=function(t,e,n){B[t]=e,Ee[t+"_paint"]={type:"solidColor"};for(var i=[],r=L.length;r--;){var a=L[r];if(a)if("g"==a.tagName)o.walkTree(a,function(t){"g"!=t.nodeName&&i.push(t)});else if("fill"==t)"polyline"!=a.tagName&&"line"!=a.tagName&&i.push(a);else{i.push(a);var s=a.getAttribute("marker-start"),l=a.getAttribute("marker-end");s&&i.push(document.getElementById(s.replace(/.*\(\"#/,"").replace(/\"\).*/,""))),l&&i.push(document.getElementById(l.replace(/.*\(\"#/,"").replace(/\"\).*/,"")))}}i.length>0&&(n?vn(t,e,i):(yn(t,e,i),je("changed",i),Me("selectedChanged",{elems:i,value:e},!0)))};var fn=function(){var t=_.getElementsByTagNameNS(f,"defs");return t.length>0?t=t[0]:(t=C.createElementNS(f,"defs"),_.firstChild?_.insertBefore(t,_.firstChild.nextSibling):_.appendChild(t)),t},mn=this.setGradient=function(t){if(Ee[t+"_paint"]&&"solidColor"!=Ee[t+"_paint"].type){var e=S[t+"Grad"],n=gn(e),i=fn();if(n)e=n;else{e=i.appendChild(C.importNode(e,!0)),e.id=Oe()}S.setColor(t,"url(#"+e.id+")")}},gn=function(t){for(var n=fn(),i=e(n).find("linearGradient, radialGradient"),r=i.length,a=["r","cx","cy","fx","fy"];r--;){var o=i[r];if("linearGradient"==t.tagName){if(t.getAttribute("x1")!=o.getAttribute("x1")||t.getAttribute("y1")!=o.getAttribute("y1")||t.getAttribute("x2")!=o.getAttribute("x2")||t.getAttribute("y2")!=o.getAttribute("y2"))continue}else{var s=e(t).attr(a),l=e(o).attr(a),u=!1;if(e.each(a,function(t,e){s[e]!=l[e]&&(u=!0)}),u)continue}var c=t.getElementsByTagNameNS(f,"stop"),d=o.getElementsByTagNameNS(f,"stop");if(c.length==d.length){for(var h=c.length;h--;){var p=c[h],m=d[h];if(p.getAttribute("offset")!=m.getAttribute("offset")||p.getAttribute("stop-opacity")!=m.getAttribute("stop-opacity")||p.getAttribute("stop-color")!=m.getAttribute("stop-color"))break}if(-1==h)return o}}return null};this.setPaint=function(t,n){var i=new e.jGraduate.Paint(n);switch(this.setPaintOpacity(t,i.alpha/100,!0),Ee[t+"_paint"]=i,i.type){case"solidColor":this.setColor(t,"none"!=i.solidColor?"#"+i.solidColor:"none");break;case"linearGradient":case"radialGradient":S[t+"Grad"]=i[i.type],mn(t)}},this.getStrokeWidth=function(){return Ee.stroke_width},this.setStrokeWidth=function(t){if(0==t&&["line","path"].indexOf(we)>=0)return void S.setStrokeWidth(1);Ee.stroke_width=t;for(var e=[],n=L.length;n--;){var i=L[n];i&&("g"==i.tagName?o.walkTree(i,function(t){"g"!=t.nodeName&&e.push(t)}):e.push(i))}e.length>0&&(yn("stroke-width",t,e),je("changed",L))},this.setStrokeAttr=function(t,e){B[t.replace("-","_")]=e;for(var n=[],i=L.length;i--;){var r=L[i];r&&("g"==r.tagName?o.walkTree(r,function(t){"g"!=t.nodeName&&n.push(t)}):n.push(r))}n.length>0&&(yn(t,e,n),je("changed",L))},this.getStyle=function(){return B},this.getOpacity=function(){return B.opacity},this.setOpacity=function(t){B.opacity=t,yn("opacity",t)},this.getFillOpacity=function(){return B.fill_opacity},this.getStrokeOpacity=function(){return B.stroke_opacity},this.setPaintOpacity=function(t,e,n){B[t+"_opacity"]=e,n?vn(t+"-opacity",e):yn(t+"-opacity",e)},this.getBlur=function(t){var e=0;if(t){var n=t.getAttribute("filter");if(n){var i=Z(t.id+"_blur");i&&(e=i.firstChild.getAttribute("stdDeviation"))}}return e},function(){function t(){var t=S.undoMgr.finishUndoableChange();e.addSubCommand(t),oe(e),e=null,i=null}var e=null,i=null,r=!1;S.setBlurNoUndo=function(t){if(!i)return void S.setBlur(t);if(0===t)vn("filter",""),r=!0;else{var e=L[0];r&&vn("filter","url(#"+e.id+"_blur)"),n.isWebkit()&&(console.log("e",e),e.removeAttribute("filter"),e.setAttribute("filter","url(#"+e.id+"_blur)")),vn("stdDeviation",t,[i.firstChild]),S.setBlurOffsets(i,t)}},S.setBlurOffsets=function(t,e){e>3?Q(t,{x:"-50%",y:"-50%",width:"200%",height:"200%"},100):n.isWebkit()||(t.removeAttribute("x"),t.removeAttribute("y"),t.removeAttribute("width"),t.removeAttribute("height"))},S.setBlur=function(n,r){if(e)return void t();var a=L[0],o=a.id;i=Z(o+"_blur"),n-=0;var s=new ae;if(i)0===n&&(i=null);else{var l=D({element:"feGaussianBlur",attr:{"in":"SourceGraphic",stdDeviation:n}});i=D({element:"filter",attr:{id:o+"_blur"}}),i.appendChild(l),fn().appendChild(i),s.addSubCommand(new ne(i))}var u={filter:a.getAttribute("filter")};return 0===n?(a.removeAttribute("filter"),void s.addSubCommand(new re(a,u))):(yn("filter","url(#"+o+"_blur)"),s.addSubCommand(new re(a,u)),S.setBlurOffsets(i,n),e=s,S.undoMgr.beginUndoableChange("stdDeviation",[i?i.firstChild:null]),void(r&&(S.setBlurNoUndo(n),t())))}}(),this.getBold=function(){var t=L[0];return null!=t&&"text"==t.tagName&&null==L[1]?"bold"==t.getAttribute("font-weight"):!1},this.setBold=function(t){var e=L[0];null!=e&&"text"==e.tagName&&null==L[1]&&yn("font-weight",t?"bold":"normal"),L[0]&&(L[0].textContent||nn.setCursor())},this.getItalic=function(){var t=L[0];return null!=t&&"text"==t.tagName&&null==L[1]?"italic"==t.getAttribute("font-style"):!1},this.setItalic=function(t){var e=L[0];null!=e&&"text"==e.tagName&&null==L[1]&&yn("font-style",t?"italic":"normal"),L[0]&&(L[0].textContent||nn.setCursor())},this.getFontFamily=function(){return Ce.font_family},this.setFontFamily=function(t){Ce.font_family=t,yn("font-family",t),L[0]&&!L[0].textContent&&nn.setCursor()},this.setFontColor=function(t){Ce.fill=t,yn("fill",t)},this.getFontSize=function(){return Ce.fill},this.getFontSize=function(){return Ce.font_size},this.setFontSize=function(t){Ce.font_size=t,yn("font-size",t),L[0]&&!L[0].textContent&&nn.setCursor()
},this.getText=function(){var t=L[0];return null==t?"":t.textContent},this.setTextContent=function(t){yn("#text",t),nn.init(t),nn.setCursor()},this.setImageURL=function(t){var n=L[0];if(n){var i=e(n).attr(["width","height"]),r=!i.width||!i.height,a=U(n);if(a!==t)r=!0;else if(!r)return;var o=new ae("Change Image URL");W(n,t),o.addSubCommand(new re(n,{"#href":a})),r?e(new Image).load(function(){var t=e(n).attr(["width","height"]);e(n).attr({width:this.width,height:this.height}),se.requestSelector(n).resize(),o.addSubCommand(new re(n,t)),oe(o),je("changed",[n])}).attr("src",t):oe(o)}},this.setLinkURL=function(t){var n=L[0];if(n){if("a"!==n.tagName){var i=e(n).parents("a");if(!i.length)return;n=i[0]}var r=U(n);if(r!==t){var a=new ae("Change Link URL");W(n,t),a.addSubCommand(new re(n,{"#href":r})),oe(a)}}},this.setRectRadius=function(t){var e=L[0];if(null!=e&&"rect"==e.tagName){var n=e.getAttribute("rx");n!=t&&(e.setAttribute("rx",t),e.setAttribute("ry",t),oe(new re(e,{rx:n,ry:n},"Radius")),je("changed",[e]))}},this.makeHyperlink=function(t){S.groupSelectedElements("a",t)},this.removeHyperlink=function(){S.ungroupSelectedElement()},this.setSegType=function(t){rn.setSegType(t)},this.convertToPath=function(t,n){if(null==t){return void e.each(L,function(t,e){e&&S.convertToPath(e)})}if(!n)var i=new ae("Convert element to Path");var r=n?{}:{fill:B.fill,"fill-opacity":B.fill_opacity,stroke:B.stroke,"stroke-width":B.stroke_width,"stroke-dasharray":B.stroke_dasharray,"stroke-linejoin":B.stroke_linejoin,"stroke-linecap":B.stroke_linecap,"stroke-opacity":B.stroke_opacity,opacity:B.opacity,visibility:"hidden"};e.each(["marker-start","marker-end","marker-mid","filter","clip-path"],function(){t.getAttribute(this)&&(r[this]=t.getAttribute(this))});var a=D({element:"path",attr:r}),o=t.getAttribute("transform");o&&a.setAttribute("transform",o);var s=t.id,l=t.parentNode;t.nextSibling?l.insertBefore(a,t):l.appendChild(a);var u="",c=function(t){e.each(t,function(t,e){var n=e[0],i=e[1];u+=n;for(var r=0;r<i.length;r+=2)u+=i[r]+","+i[r+1]+" "})},d=1.81;switch(t.tagName){case"ellipse":case"circle":var h=e(t).attr(["rx","ry","cx","cy"]),p=h.cx,f=h.cy,m=h.rx,g=h.ry;"circle"==t.tagName&&(m=g=e(t).attr("r")),c([["M",[p-m,f]],["C",[p-m,f-g/d,p-m/d,f-g,p,f-g]],["C",[p+m/d,f-g,p+m,f-g/d,p+m,f]],["C",[p+m,f+g/d,p+m/d,f+g,p,f+g]],["C",[p-m/d,f+g,p-m,f+g/d,p-m,f]],["Z",[]]]);break;case"path":u=t.getAttribute("d");break;case"line":var h=e(t).attr(["x1","y1","x2","y2"]);u="M"+h.x1+","+h.y1+"L"+h.x2+","+h.y2;break;case"polyline":case"polygon":u="M"+t.getAttribute("points");break;case"rect":var v=e(t).attr(["rx","ry"]),m=v.rx,g=v.ry,y=t.getBBox(),b=y.x,x=y.y,w=y.width,k=y.height,d=4-d;c(m||g?[["M",[b,x+g]],["C",[b,x+g/d,b+m/d,x,b+m,x]],["L",[b+w-m,x]],["C",[b+w-m/d,x,b+w,x+g/d,b+w,x+g]],["L",[b+w,x+k-g]],["C",[b+w,x+k-g/d,b+w-m/d,x+k,b+w-m,x+k]],["L",[b+m,x+k]],["C",[b+m/d,x+k,b,x+k-g/d,b,x+k-g]],["L",[b,x+g]],["Z",[]]]:[["M",[b,x]],["L",[b+w,x]],["L",[b+w,x+k]],["L",[b,x+k]],["L",[b,x]],["Z",[]]]);break;default:a.parentNode.removeChild(a)}if(u&&a.setAttribute("d",u),n){rn.resetOrientation(a);var C=!1;try{C=a.getBBox()}catch(E){}return a.parentNode.removeChild(a),C}if(o){var _=O(a);R(_)&&rn.resetOrientation(a)}var T=t.nextSibling;i.addSubCommand(new ie(t,T,l)),i.addSubCommand(new ne(a)),Qe(),t.parentNode.removeChild(t),a.setAttribute("id",s),a.removeAttribute("visibility"),Ke([a],!0),oe(i)};var vn=function(t,e,i){var r=E.suspendRedraw(1e3);"pathedit"==we&&rn.moveNode(t,e);for(var i=i||L,a=i.length,s=["g","polyline","path"],l=["transform","opacity","filter"];a--;){var u=i[a];if(null!=u)if("textedit"===we&&"#text"!==t&&u.textContent.length&&nn.toSelectMode(u),("x"===t||"y"===t)&&s.indexOf(u.tagName)>=0){var c=getStrokedBBox([u]),d="x"===t?e-c.x:0,h="y"===t?e-c.y:0;S.moveSelectedElements(d*P,h*P,!0)}else{"g"===u.tagName&&l.indexOf(t)>=0;var p="#text"===t?u.textContent:u.getAttribute(t);if(null==p&&(p=""),p!==String(e)){if("#text"==t){{o.getBBox(u).width}u.textContent=e,/rotate/.test(u.getAttribute("transform"))&&(u=Ge(u))}else"#href"==t?W(u,e):u.setAttribute(t,e);n.isGecko()&&"text"===u.nodeName&&/rotate/.test(u.getAttribute("transform"))&&(0===(e+"").indexOf("url")||["font-size","font-family","x","y"].indexOf(t)>=0&&u.textContent)&&(u=Ge(u)),L.indexOf(u)>=0&&setTimeout(function(){u.parentNode&&se.requestSelector(u).resize()},0);var f=Y(u);if(0!=f&&"transform"!=t)for(var m=O(u),g=m.numberOfItems;g--;){var v=m.getItem(g);if(4==v.type){m.removeItem(g);var y=o.getBBox(u),b=V(y.x+y.width/2,y.y+y.height/2,$(m).matrix),x=b.x,w=b.y,k=E.createSVGTransform();k.setRotate(f,x,w),m.insertItemBefore(k,g);break}}}}}E.unsuspendRedraw(r)},yn=this.changeSelectedAttribute=function(t,e,n){var n=n||L;S.undoMgr.beginUndoableChange(t,n);n.length;vn(t,e,n);var i=S.undoMgr.finishUndoableChange();i.isEmpty()||oe(i)};this.deleteSelectedElements=function(){for(var t=new ae("Delete Elements"),e=L.length,n=[],i=0;e>i;++i){var r=L[i];if(null==r)break;var a=r.parentNode,o=r;se.releaseSelector(o),d.removePath_(o.id),"a"===a.tagName&&1===a.childNodes.length&&(o=a,a=a.parentNode);var s=o.nextSibling,l=a.removeChild(o);n.push(r),L[i]=null,t.addSubCommand(new ie(l,s,a))}t.isEmpty()||oe(t),je("changed",n),Qe()},this.cutSelectedElements=function(){for(var t=new ae("Cut Elements"),e=L.length,n=[],i=0;e>i;++i){var r=L[i];if(null==r)break;var a=r.parentNode,o=r;se.releaseSelector(o),d.removePath_(o.id);var s=o.nextSibling,l=a.removeChild(o);n.push(r),L[i]=null,t.addSubCommand(new ie(l,s,a))}t.isEmpty()||oe(t),je("changed",n),Qe(),S.clipBoard=n},this.copySelectedElements=function(){S.clipBoard=e.merge([],L)},this.pasteElements=function(t,n,i){var r=S.clipBoard,a=r.length;if(a){for(var o=[],s=new ae("Paste elements");a--;){var l=r[a];if(l){var u=$e(l);Z(l.id)||(u.id=l.id),o.push(u),(I||N().getCurrentLayer()).appendChild(u),s.addSubCommand(new ne(u))}}if(Je(o),"in_place"!==t){var c,d;t?"point"===t&&(c=n,d=i):(c=Pe.x,d=Pe.y);var h=getStrokedBBox(o),p=c-(h.x+h.width/2),f=d-(h.y+h.height/2),m=[],g=[];e.each(o,function(){m.push(p),g.push(f)});var v=S.moveSelectedElements(m,g,!1);s.addSubCommand(v)}oe(s),je("changed",o)}},this.groupSelectedElements=function(t){t||(t="g");var e="";switch(t){case"a":e="Make hyperlink";var n="";arguments.length>1&&(n=arguments[1]);break;default:t="g",e="Group Elements"}var i=new ae(e),r=D({element:t,attr:{id:Oe()}});"a"===t&&W(r,n),i.addSubCommand(new ne(r));for(var a=L.length;a--;){var o=L[a];if(null!=o){"a"===o.parentNode.tagName&&1===o.parentNode.childNodes.length&&(o=o.parentNode);var s=o.nextSibling,l=o.parentNode;r.appendChild(o),i.addSubCommand(new ee(o,s,l))}}i.isEmpty()||oe(i),Je([r],!0)};var bn=this.pushGroupProperties=function(t,n){for(var i,r,a=t.childNodes,s=a.length,l=t.getAttribute("transform"),u=O(t),c=$(u).matrix,d=new ae("Push group properties"),h=0,p=Y(t),f=e(t).attr(["filter","opacity"]),h=0;s>h;h++){var m=a[h];if(1===m.nodeType){if(null!==f.opacity&&1!==f.opacity){var g=(m.getAttribute("opacity")||1,Math.round((m.getAttribute("opacity")||1)*f.opacity*100)/100);yn("opacity",g,[m])}if(f.filter){var v=this.getBlur(m),y=v;r||(r=this.getBlur(t)),v?v=r-0+(v-0):0===v&&(v=r),y?i=qe(m.getAttribute("filter")):i?(i=$e(i),fn().appendChild(i)):i=qe(f.filter);var b="feGaussianBlur"===i.firstChild.tagName?"blur":"filter";i.id=m.id+"_"+b,yn("filter","url(#"+i.id+")",[m]),v&&(yn("stdDeviation",v,[i.firstChild]),S.setBlurOffsets(i,v))}var x=O(m);if(~m.tagName.indexOf("Gradient")&&(x=null),x&&"defs"!==m.tagName&&u.numberOfItems){if(p&&1==u.numberOfItems){var w=u.getItem(0).matrix,k=E.createSVGMatrix(),C=Y(m);C&&(k=x.getItem(0).matrix);var _=o.getBBox(m),T=$(x).matrix,A=V(_.x+_.width/2,_.y+_.height/2,T),N=p+C,P=E.createSVGTransform();P.setRotate(N,A.x,A.y);var I=F(w,k,P.matrix.inverse());if(C&&x.removeItem(0),N&&(x.numberOfItems?x.insertItemBefore(P,0):x.appendItem(P)),I.e||I.f){var M=E.createSVGTransform();M.setTranslate(I.e,I.f),x.numberOfItems?x.insertItemBefore(M,0):x.appendItem(M)}}else{var B=m.getAttribute("transform"),L={};L.transform=B?B:"";var D=E.createSVGTransform(),j=$(x).matrix,R=j.inverse(),q=F(R,c,j);D.setMatrix(q),x.appendItem(D)}var G=Ye(m);G&&d.addSubCommand(G)}}}if(l){var L={};L.transform=l,t.setAttribute("transform",""),t.removeAttribute("transform"),d.addSubCommand(new re(t,L))}return n&&!d.isEmpty()?d:void 0};this.ungroupSelectedElement=function(){var t=L[0];if(e(t).data("gsvg")||e(t).data("symbol"))return void un(t);if("use"===t.tagName){var n=Z(U(t).substr(1));return e(t).data("symbol",n).data("ref",n),void un(t)}var i=e(t).parents("a");if(i.length&&(t=i[0]),"g"===t.tagName||"a"===t.tagName){var r=new ae("Ungroup Elements"),a=bn(t,!0);a&&r.addSubCommand(a);for(var o=t.parentNode,s=t.nextSibling,l=new Array(t.childNodes.length),u=0;t.firstChild;){var c=t.firstChild,d=c.nextSibling,h=c.parentNode;if("title"!==c.tagName)l[u++]=c=o.insertBefore(c,s),r.addSubCommand(new ee(c,d,h));else{var p=c.nextSibling;r.addSubCommand(new ie(c,p,h)),h.removeChild(c)}}Qe();var f=t.nextSibling;t=o.removeChild(t),r.addSubCommand(new ie(t,f,o)),r.isEmpty()||oe(r),Ke(l)}},this.moveToTopSelectedElement=function(){var t=L[0];if(null!=t){var e=t,n=e.parentNode,i=e.nextSibling;e=e.parentNode.appendChild(e),i!=e.nextSibling&&(oe(new ee(e,i,n,"top")),je("changed",[e]))}},this.moveToBottomSelectedElement=function(){var t=L[0];if(null!=t){var e=t,n=e.parentNode,i=e.nextSibling,r=e.parentNode.firstChild;"title"==r.tagName&&(r=r.nextSibling),"defs"==r.tagName&&(r=r.nextSibling),e=e.parentNode.insertBefore(e,r),i!=e.nextSibling&&(oe(new ee(e,i,n,"bottom")),je("changed",[e]))}},this.moveUpDownSelected=function(t){var n=L[0];if(n){Ae=[];var i,r,a=e(Le(getStrokedBBox([n]))).toArray();if("Down"==t&&a.reverse(),e.each(a,function(){return r?(i=this,!1):void(this==n&&(r=!0))}),i){var o=n,s=o.parentNode,l=o.nextSibling;e(i)["Down"==t?"before":"after"](o),l!=o.nextSibling&&(oe(new ee(o,l,s,"Move "+t)),je("changed",[o]))}}},this.moveSelectedElements=function(t,e,n){t.constructor!=Array&&(t/=P,e/=P);for(var n=n||!0,i=new ae("position"),r=L.length;r--;){var a=L[r];if(null!=a){var o=E.createSVGTransform(),s=O(a);t.constructor==Array?o.setTranslate(t[r],e[r]):o.setTranslate(t,e),s.numberOfItems?s.insertItemBefore(o,0):s.appendItem(o);var l=Ye(a);l&&i.addSubCommand(l),se.requestSelector(a).resize()}}var u=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];if(i&&"line"==i.nodeName&&(i.getAttribute("marker-end")||i.getAttribute("marker-start"))){var r={start:i.getAttribute("marker-start"),end:i.getAttribute("marker-end")};i.removeAttribute("marker-start"),i.removeAttribute("marker-end"),i.setAttribute("marker-start",r.start),i.setAttribute("marker-end",r.end)}else i&&"g"==i.nodeName&&u(i.childNodes)}};return u(L),i.isEmpty()?void 0:(n&&oe(i),je("changed",L),i)},this.cloneSelectedElements=function(t,e){for(var n=new ae("Clone Elements"),i=L.length,r=0;i>r;++r){var a=L[r];if(null==a)break}var o=L.slice(0,r);this.clearSelection(!0);for(var r=o.length;r--;){var a=o[r]=$e(o[r]);(I||N().getCurrentLayer()).appendChild(a),n.addSubCommand(new ne(a))}n.isEmpty()||(Ke(o.reverse()),this.moveSelectedElements(t,e,!1),oe(n))},this.alignSelectedElements=function(t,e){var n=[],i=Number.MAX_VALUE,r=Number.MIN_VALUE,a=Number.MAX_VALUE,o=Number.MIN_VALUE,s=Number.MIN_VALUE,l=Number.MIN_VALUE,u=L.length;if(u){for(var c=0;u>c&&null!=L[c];++c){var d=L[c];switch(n[c]=getStrokedBBox([d]),e){case"smallest":(("l"==t||"c"==t||"r"==t)&&(s==Number.MIN_VALUE||s>n[c].width)||("t"==t||"m"==t||"b"==t)&&(l==Number.MIN_VALUE||l>n[c].height))&&(i=n[c].x,a=n[c].y,r=n[c].x+n[c].width,o=n[c].y+n[c].height,s=n[c].width,l=n[c].height);break;case"largest":(("l"==t||"c"==t||"r"==t)&&(s==Number.MIN_VALUE||s<n[c].width)||("t"==t||"m"==t||"b"==t)&&(l==Number.MIN_VALUE||l<n[c].height))&&(i=n[c].x,a=n[c].y,r=n[c].x+n[c].width,o=n[c].y+n[c].height,s=n[c].width,l=n[c].height);break;default:n[c].x<i&&(i=n[c].x),n[c].y<a&&(a=n[c].y),n[c].x+n[c].width>r&&(r=n[c].x+n[c].width),n[c].y+n[c].height>o&&(o=n[c].y+n[c].height)}}"page"==e&&(i=0,a=0,r=S.contentW,o=S.contentH);for(var h=new Array(u),p=new Array(u),c=0;u>c&&null!=L[c];++c){var d=L[c],f=n[c];switch(h[c]=0,p[c]=0,t){case"l":h[c]=i-f.x;break;case"c":h[c]=(i+r)/2-(f.x+f.width/2);break;case"r":h[c]=r-(f.x+f.width);break;case"t":p[c]=a-f.y;break;case"m":p[c]=(a+o)/2-(f.y+f.height/2);break;case"b":p[c]=o-(f.y+f.height)}}this.moveSelectedElements(h,p)}},this.contentW=pn().w,this.contentH=pn().h,this.updateCanvas=function(t,n){E.setAttribute("width",t),E.setAttribute("height",n);var i=e("#canvasBackground")[0],r=e("#svg-background")[0],a=_.getAttribute("x"),o=_.getAttribute("y"),s=t/2-this.contentW*P/2,l=n/2-this.contentH*P/2;Q(_,{width:this.contentW*P,height:this.contentH*P,x:s,y:l,viewBox:"0 0 "+this.contentW+" "+this.contentH}),Q(i,{width:_.getAttribute("width"),height:_.getAttribute("height"),x:s,y:l}),r&&Q(r,{width:this.contentW*P,height:this.contentH*P,x:0,y:0});var u=Z("background_image");return u&&Q(u,{width:"100%",height:"100%"}),se.selectorParentGroup.setAttribute("transform","translate("+s+","+l+")"),je("canvasUpdate"),{x:s,y:l,old_x:a,old_y:o,d_x:s-a,d_y:l-o}},this.setBackground=function(t){var n=e("#editor_imageBackgorund"),i=e("#svg-background"),r=S.getCurrentDrawing().getCurrentLayerName(),a=t.naturalWidth||t.width,o=t.naturalHeight||t.height;n[0]?(n.remove(),i.remove()):(S.createLayer("Background"),S.setCurrentLayerPosition(0),S.setCurrentLayer(S.getCurrentDrawing().getLayerName(S.getCurrentDrawing().getNumLayers()-1))),S.setCurrentLayer("Background"),D({element:"rect",attr:{x:0,y:0,width:"100%",height:"100%",id:"svg-background",opacity:1,fill:"#ffffff"}});var s=D({element:"image",attr:{x:0,y:0,id:"editor_imageBackgorund",width:a,height:o,opacity:1}});W(s,t.src),S.setCurrentLayer(r),S.setResolution(a,o),S.updateCanvas(a,o),je("bg-changed")},this.getBackground=function(){return e("#editor_imageBackgorund")[0]},this.cycleElement=function(t){var e=L[0],n=!1,i=Ve(I||N().getCurrentLayer());if(i.length){if(null==e){var r=t?i.length-1:0;n=i[r]}else for(var a=i.length;a--;)if(i[a]==e){var r=t?a-1:a+1;r>=i.length?r=0:0>r&&(r=i.length-1),n=i[r];break}Je([n],!0),je("selected",L)}},this.clear(),this.getPrivateMethods=function(){var t={addCommandToHistory:oe,setGradient:mn,addSvgElementFromJson:D,assignAttributes:Q,BatchCommand:ae,call:je,ChangeElementCommand:re,copyElem:$e,ffClone:Ge,findDefs:fn,findDuplicateGradient:gn,getElem:Z,getId:De,getIntersectionList:Le,getMouseTarget:tn,getNextId:Oe,getPathBBox:X,getUrlFromAttr:z,hasMatrixTransform:R,identifyLayers:cn,InsertElementCommand:ne,isIdentity:r.isIdentity,logMatrix:Ue,matrixMultiply:F,MoveElementCommand:ee,preventClickDefault:en,recalculateAllSelectedDimensions:He,recalculateDimensions:Ye,remapElement:We,RemoveElementCommand:ie,removeUnusedDefElems:an,round:Be,runExtensions:Me,sanitizeSvg:te,SVGEditTransformList:i.SVGTransformList,toString:toString,transformBox:r.transformBox,transformListToTransform:$,transformPoint:V,walkTree:o.walkTree};return t}}})}(),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one(t.support.transition.end,function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e()})}(jQuery),+function(t){var e='[data-dismiss="alert"]',n=function(n){t(n).on("click",e,this.close)};n.prototype.close=function(e){function n(){a.trigger("closed.bs.alert").remove()}var i=t(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var a=t(r);e&&e.preventDefault(),a.length||(a=i.hasClass("alert")?i:i.parent()),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one(t.support.transition.end,n).emulateTransitionEnd(150):n())};var i=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})},t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",e,n.prototype.close)}(jQuery),+function(t){var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.isLoading=!1};e.DEFAULTS={loadingText:"loading..."},e.prototype.setState=function(e){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",a=i.data();e+="Text",a.resetText||i.data("resetText",i[r]()),i[r](a[e]||this.options[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},e.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=function(n){return this.each(function(){var i=t(this),r=i.data("bs.button"),a="object"==typeof n&&n;r||i.data("bs.button",r=new e(this,a)),"toggle"==n?r.toggle():n&&r.setState(n)})},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api","[data-toggle^=button]",function(e){var n=t(e.target);n.hasClass("btn")||(n=n.closest(".btn")),n.button("toggle"),e.preventDefault()})}(jQuery),+function(t){var e=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},e.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},e.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},e.prototype.to=function(e){var n=this,i=this.getActiveIndex();return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",t(this.$items[e]))},e.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},e.prototype.next=function(){return this.sliding?void 0:this.slide("next")},e.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},e.prototype.slide=function(e,n){var i=this.$element.find(".item.active"),r=n||i[e](),a=this.interval,o="next"==e?"left":"right",s="next"==e?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[s]()}if(r.hasClass("active"))return this.sliding=!1;var u=t.Event("slide.bs.carousel",{relatedTarget:r[0],direction:o});return this.$element.trigger(u),u.isDefaultPrevented()?void 0:(this.sliding=!0,a&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var e=t(l.$indicators.children()[l.getActiveIndex()]);e&&e.addClass("active")})),t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,i.addClass(o),r.addClass(o),i.one(t.support.transition.end,function(){r.removeClass([e,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),a&&this.cycle(),this)};var n=t.fn.carousel;t.fn.carousel=function(n){return this.each(function(){var i=t(this),r=i.data("bs.carousel"),a=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n),o="string"==typeof n?n:a.slide;r||i.data("bs.carousel",r=new e(this,a)),"number"==typeof n?r.to(n):o?r[o]():a.interval&&r.pause().cycle()})},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(e){var n,i=t(this),r=t(i.attr("data-target")||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")),a=t.extend({},r.data(),i.data()),o=i.attr("data-slide-to");o&&(a.interval=!1),r.carousel(a),(o=i.attr("data-slide-to"))&&r.data("bs.carousel").to(o),e.preventDefault()}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var e=t(this);e.carousel(e.data())})})}(jQuery),+function(t){var e=function(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.DEFAULTS={toggle:!0},e.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},e.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e=t.Event("show.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var i=n.data("bs.collapse");if(i&&i.transitioning)return;n.collapse("hide"),i||n.data("bs.collapse",null)}var r=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[r](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[r]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var o=t.camelCase(["scroll",r].join("-"));this.$element.one(t.support.transition.end,t.proxy(a,this)).emulateTransitionEnd(350)[r](this.$element[0][o])}}},e.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[n](0).one(t.support.transition.end,t.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},e.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=function(n){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),a=t.extend({},e.DEFAULTS,i.data(),"object"==typeof n&&n);!r&&a.toggle&&"show"==n&&(n=!n),r||i.data("bs.collapse",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(e){var n,i=t(this),r=i.attr("data-target")||e.preventDefault()||(n=i.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),a=t(r),o=a.data("bs.collapse"),s=o?"toggle":i.data(),l=i.attr("data-parent"),u=l&&t(l);o&&o.transitioning||(u&&u.find('[data-toggle=collapse][data-parent="'+l+'"]').not(i).addClass("collapsed"),i[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),a.collapse(s)})}(jQuery),+function(t){function e(e){t(i).remove(),t(r).each(function(){var i=n(t(this)),r={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",r))})}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}var i=".dropdown-backdrop",r="[data-toggle=dropdown]",a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var a=n(r),o=a.hasClass("open");if(e(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(a.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;a.toggleClass("open").trigger("shown.bs.dropdown",s),r.focus()}return!1}},a.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var a=n(i),o=a.hasClass("open");if(!o||o&&27==e.keyCode)return 27==e.which&&a.find(r).focus(),i.click();var s=" li:not(.divider):visible a",l=a.find("[role=menu]"+s+", [role=listbox]"+s);if(l.length){var u=l.index(l.filter(":focus"));38==e.keyCode&&u>0&&u--,40==e.keyCode&&u<l.length-1&&u++,~u||(u=0),l.eq(u).focus()}}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof e&&i[e].call(n)})},t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",r,a.prototype.toggle).on("keydown.bs.dropdown.data-api",r+", [role=menu], [role=listbox]",a.prototype.keydown)}(jQuery),+function(t){var e=function(e,n){this.options=n,this.$element=t(e),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};e.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},e.prototype.toggle=function(t){return this[this.isShown?"hide":"show"](t)},e.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(document.body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$element.find(".modal-dialog").one(t.support.transition.end,function(){n.$element.focus().trigger(r)}).emulateTransitionEnd(300):n.$element.focus().trigger(r)}))},e.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one(t.support.transition.end,t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},e.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.focus()},this))},e.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},e.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.removeBackdrop(),t.$element.trigger("hidden.bs.modal")})},e.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},e.prototype.backdrop=function(e){var n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;i?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,e).emulateTransitionEnd(150):e()):e&&e()};var n=t.fn.modal;t.fn.modal=function(n,i){return this.each(function(){var r=t(this),a=r.data("bs.modal"),o=t.extend({},e.DEFAULTS,r.data(),"object"==typeof n&&n);a||r.data("bs.modal",a=new e(this,o)),"string"==typeof n?a[n](i):o.show&&a.show(i)})},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var n=t(this),i=n.attr("href"),r=t(n.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},r.data(),n.data());n.is("a")&&e.preventDefault(),r.modal(a,this).one("hide",function(){n.is(":visible")&&n.focus()})}),t(document).on("show.bs.modal",".modal",function(){t(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){t(document.body).removeClass("modal-open")})}(jQuery),+function(t){var e=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};e.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},e.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i);for(var r=this.options.trigger.split(" "),a=r.length;a--;){var o=r[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},e.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},e.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},e.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},e.prototype.show=function(){var e=t.Event("show.bs."+this.type);
if(this.hasContent()&&this.enabled){if(this.$element.trigger(e),e.isDefaultPrevented())return;var n=this,i=this.tip();this.setContent(),this.options.animation&&i.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,o=a.test(r);o&&(r=r.replace(a,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(r),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var s=this.getPosition(),l=i[0].offsetWidth,u=i[0].offsetHeight;if(o){var c=this.$element.parent(),d=r,h=document.documentElement.scrollTop||document.body.scrollTop,p="body"==this.options.container?window.innerWidth:c.outerWidth(),f="body"==this.options.container?window.innerHeight:c.outerHeight(),m="body"==this.options.container?0:c.offset().left;r="bottom"==r&&s.top+s.height+u-h>f?"top":"top"==r&&s.top-h-u<0?"bottom":"right"==r&&s.right+l>p?"left":"left"==r&&s.left-l<m?"right":r,i.removeClass(d).addClass(r)}var g=this.getCalculatedOffset(r,s,l,u);this.applyPlacement(g,r),this.hoverState=null;var v=function(){n.$element.trigger("shown.bs."+n.type)};t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,v).emulateTransitionEnd(150):v()}},e.prototype.applyPlacement=function(e,n){var i,r=this.tip(),a=r[0].offsetWidth,o=r[0].offsetHeight,s=parseInt(r.css("margin-top"),10),l=parseInt(r.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(l)&&(l=0),e.top=e.top+s,e.left=e.left+l,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var u=r[0].offsetWidth,c=r[0].offsetHeight;if("top"==n&&c!=o&&(i=!0,e.top=e.top+o-c),/bottom|top/.test(n)){var d=0;e.left<0&&(d=-2*e.left,e.left=0,r.offset(e),u=r[0].offsetWidth,c=r[0].offsetHeight),this.replaceArrow(d-a+u,u,"left")}else this.replaceArrow(c-o,c,"top");i&&r.offset(e)},e.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},e.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one(t.support.transition.end,e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},e.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},e.prototype.hasContent=function(){return this.getTitle()},e.prototype.getPosition=function(){var e=this.$element[0];return t.extend({},"function"==typeof e.getBoundingClientRect?e.getBoundingClientRect():{width:e.offsetWidth,height:e.offsetHeight},this.$element.offset())},e.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},e.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},e.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},e.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.toggleEnabled=function(){this.enabled=!this.enabled},e.prototype.toggle=function(e){var n=e?t(e.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;n.tip().hasClass("in")?n.leave(n):n.enter(n)},e.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=function(n){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),a="object"==typeof n&&n;(r||"destroy"!=n)&&(r||i.data("bs.tooltip",r=new e(this,a)),"string"==typeof n&&r[n]())})},t.fn.tooltip.Constructor=e,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){var e=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");e.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),e.prototype.constructor=e,e.prototype.getDefaults=function(){return e.DEFAULTS},e.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},e.prototype.hasContent=function(){return this.getTitle()||this.getContent()},e.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},e.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},e.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=function(n){return this.each(function(){var i=t(this),r=i.data("bs.popover"),a="object"==typeof n&&n;(r||"destroy"!=n)&&(r||i.data("bs.popover",r=new e(this,a)),"string"==typeof n&&r[n]())})},t.fn.popover.Constructor=e,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){function e(n,i){var r,a=t.proxy(this.process,this);this.$element=t(t(n).is("body")?window:n),this.$body=t("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",a),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||(r=t(n).attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=t([]),this.targets=t([]),this.activeTarget=null,this.refresh(),this.process()}e.DEFAULTS={offset:10},e.prototype.refresh=function(){var e=this.$element[0]==window?"offset":"position";this.offsets=t([]),this.targets=t([]);{var n=this;this.$body.find(this.selector).map(function(){var i=t(this),r=i.data("target")||i.attr("href"),a=/^#./.test(r)&&t(r);return a&&a.length&&a.is(":visible")&&[[a[e]().top+(!t.isWindow(n.$scrollElement.get(0))&&n.$scrollElement.scrollTop()),r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})}},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,i=n-this.$scrollElement.height(),r=this.offsets,a=this.targets,o=this.activeTarget;if(e>=i)return o!=(t=a.last()[0])&&this.activate(t);if(o&&e<=r[0])return o!=(t=a[0])&&this.activate(t);for(t=r.length;t--;)o!=a[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(a[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=function(n){return this.each(function(){var i=t(this),r=i.data("bs.scrollspy"),a="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(jQuery),+function(t){var e=function(e){this.element=t(e)};e.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],a=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(a),!a.isDefaultPrevented()){var o=t(i);this.activate(e.parent("li"),n),this.activate(o,o.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},e.prototype.activate=function(e,n,i){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var a=n.find("> .active"),o=i&&t.support.transition&&a.hasClass("fade");o?a.one(t.support.transition.end,r).emulateTransitionEnd(150):r(),a.removeClass("in")};var n=t.fn.tab;t.fn.tab=function(n){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new e(this)),"string"==typeof n&&r[n]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(jQuery),+function(t){var e=function(n,i){this.options=t.extend({},e.DEFAULTS,i),this.$window=t(window).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$window.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=t(document).height(),i=this.$window.scrollTop(),r=this.$element.offset(),a=this.options.offset,o=a.top,s=a.bottom;"top"==this.affixed&&(r.top+=i),"object"!=typeof a&&(s=o=a),"function"==typeof o&&(o=a.top(this.$element)),"function"==typeof s&&(s=a.bottom(this.$element));var l=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=s&&r.top+this.$element.height()>=n-s?"bottom":null!=o&&o>=i?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var u="affix"+(l?"-"+l:""),c=t.Event(u+".bs.affix");this.$element.trigger(c),c.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(u).trigger(t.Event(u.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:n-s-this.$element.height()}))}}};var n=t.fn.affix;t.fn.affix=function(n){return this.each(function(){var i=t(this),r=i.data("bs.affix"),a="object"==typeof n&&n;r||i.data("bs.affix",r=new e(this,a)),"string"==typeof n&&r[n]()})},t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),n=e.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.affix(n)})})}(jQuery),n("bootstrap",["jquery"],function(t){return function(){var e;return e||t.jQuery}}(this)),function(){n("contextmenu",["require","jquery"],function(t){var e=t("jquery"),n=e(window),i=e(document);e.extend(e.fn,{contextMenu:function(t,r){return void 0==t.menu?!1:(void 0==t.inSpeed&&(t.inSpeed=150),void 0==t.outSpeed&&(t.outSpeed=75),0==t.inSpeed&&(t.inSpeed=-1),0==t.outSpeed&&(t.outSpeed=-1),e(this).each(function(){var a=e(this),o=e(a).offset(),s=e("#"+t.menu);s.addClass("contextMenu"),e(this).bind("mousedown",function(l){var u=l;e(this).mouseup(function(l){var c=e(this);if(c.unbind("mouseup"),2===u.button||t.allowLeft){if(l.stopPropagation(),e(".contextMenu").hide(),a.hasClass("disabled"))return!1;var d=l.pageX,h=l.pageY,p=n.width()-s.width(),f=n.height()-s.height();d>p-15&&(d=p-15),h>f-30&&(h=f-30),s.css({top:h,left:d}).fadeIn(t.inSpeed),s.find("A").mouseover(function(){s.find("LI.hover").removeClass("hover"),e(this).parent().addClass("hover")}).mouseout(function(){s.find("LI.hover").removeClass("hover")}),i.keypress(function(t){switch(t.keyCode){case 38:s.find("LI.hover").length?(s.find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover"),s.find("LI.hover").length||s.find("LI:last").addClass("hover")):s.find("LI:last").addClass("hover");break;case 40:0==s.find("LI.hover").length?s.find("LI:first").addClass("hover"):(s.find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover"),s.find("LI.hover").length||s.find("LI:first").addClass("hover"));break;case 13:s.find("LI.hover A").trigger("click");break;case 27:i.trigger("click")}}),s.find("A").unbind("mouseup"),s.find("LI:not(.disabled) A").mouseup(function(){return e(".contextMenu").hide(),r&&r(e(this).attr("href").substr(1),e(c),{x:d-o.left,y:h-o.top,docX:d,docY:h}),!1}),setTimeout(function(){i.click(function(){s.fadeOut(t.outSpeed)})},0);var m=l;m.button=1,t.svgcanvas.mouseUpCallback(m)}})}),e(a).add(e("UL.contextMenu")).bind("contextmenu",function(){return!1})}),e(this))},disableContextMenuItems:function(t){return void 0==t?(e(this).find("LI").addClass("disabled"),e(this)):(e(this).each(function(){if(void 0!=t)for(var n=t.split(","),i=0;i<n.length;i++)e(this).find('A[href="'+n[i]+'"]').parent().addClass("disabled")}),e(this))},enableContextMenuItems:function(t){return void 0==t?(e(this).find("LI.disabled").removeClass("disabled"),e(this)):(e(this).each(function(){if(void 0!=t)for(var n=t.split(","),i=0;i<n.length;i++)e(this).find('A[href="'+n[i]+'"]').parent().removeClass("disabled")}),e(this))},disableContextMenu:function(){return e(this).each(function(){e(this).addClass("disabled")}),e(this)},enableContextMenu:function(){return e(this).each(function(){e(this).removeClass("disabled")}),e(this)},destroyContextMenu:function(){return e(this).each(function(){e(this).unbind("mousedown").unbind("mouseup")}),e(this)}})})}();var a=function(){function t(){if(!H){try{var t=j.getElementsByTagName("body")[0].appendChild(v("span"));t.parentNode.removeChild(t)}catch(e){return}H=!0;for(var n=R.length,i=0;n>i;i++)R[i]()}}function e(t){H?t():R[R.length]=t}function n(t){if(typeof O.addEventListener!=N)O.addEventListener("load",t,!1);else if(typeof j.addEventListener!=N)j.addEventListener("load",t,!1);else if(typeof O.attachEvent!=N)y(O,"onload",t);else if("function"==typeof O.onload){var e=O.onload;O.onload=function(){e(),t()}}else O.onload=t}function i(){F?r():o()}function r(){var t=j.getElementsByTagName("body")[0],e=v(P);e.setAttribute("type",B);var n=t.appendChild(e);if(n){var i=0;!function(){if(typeof n.GetVariable!=N){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),W.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);t.removeChild(e),n=null,o()}()}else o()}function o(){var t=$.length;if(t>0)for(var e=0;t>e;e++){var n=$[e].id,i=$[e].callbackFn,r={success:!1,id:n};if(W.pv[0]>0){var a=g(n);if(a)if(!b($[e].swfVersion)||W.wk&&W.wk<312)if($[e].expressInstall&&l()){var o={};o.data=$[e].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var d={},h=a.getElementsByTagName("param"),p=h.length,f=0;p>f;f++)"movie"!=h[f].getAttribute("name").toLowerCase()&&(d[h[f].getAttribute("name")]=h[f].getAttribute("value"));u(o,d,n,i)}else c(a),i&&i(r);else w(n,!0),i&&(r.success=!0,r.ref=s(n),i(r))}else if(w(n,!0),i){var m=s(n);m&&typeof m.SetVariable!=N&&(r.success=!0,r.ref=m),i(r)}}}function s(t){var e=null,n=g(t);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=N)e=n;else{var i=n.getElementsByTagName(P)[0];i&&(e=i)}return e}function l(){return!z&&b("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function u(t,e,n,i){z=!0,E=i||null,_={success:!1,id:n};var r=g(n);if(r){"OBJECT"==r.nodeName?(S=d(r),C=null):(S=r,C=n),t.id=L,(typeof t.width==N||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==N||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),j.title=j.title.slice(0,47)+" - Flash Player Installation";var a=W.ie&&W.win?"ActiveX":"PlugIn",o="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+j.title;if(typeof e.flashvars!=N?e.flashvars+="&"+o:e.flashvars=o,W.ie&&W.win&&4!=r.readyState){var s=v("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(t,e,n)}}function c(t){if(W.ie&&W.win&&4!=t.readyState){var e=v("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(d(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(d(t),t)}function d(t){var e=v("div");if(W.win&&W.ie)e.innerHTML=t.innerHTML;else{var n=t.getElementsByTagName(P)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;r>a;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||e.appendChild(i[a].cloneNode(!0))}}return e}function h(t,e,n){var i,r=g(n);if(W.wk&&W.wk<312)return i;if(r)if(typeof t.id==N&&(t.id=n),W.ie&&W.win){var a="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?a+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+t[o]+'"'));var s="";for(var l in e)e[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+e[l]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",q[q.length]=t.id,i=g(t.id)}else{var u=v(P);u.setAttribute("type",B);for(var c in t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?u.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&u.setAttribute(c,t[c]));for(var d in e)e[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&p(u,d,e[d]);r.parentNode.replaceChild(u,r),i=u}return i}function p(t,e,n){var i=v("param");i.setAttribute("name",e),i.setAttribute("value",n),t.appendChild(i)}function f(t){var e=g(t);e&&"OBJECT"==e.nodeName&&(W.ie&&W.win?(e.style.display="none",function(){4==e.readyState?m(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function m(t){var e=g(t);if(e){for(var n in e)"function"==typeof e[n]&&(e[n]=null);e.parentNode.removeChild(e)}}function g(t){var e=null;try{e=j.getElementById(t)}catch(n){}return e}function v(t){return j.createElement(t)}function y(t,e,n){t.attachEvent(e,n),G[G.length]=[t,e,n]}function b(t){var e=W.pv,n=t.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]||e[0]==n[0]&&e[1]==n[1]&&e[2]>=n[2]?!0:!1}function x(t,e,n,i){if(!W.ie||!W.mac){var r=j.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(T=null,A=null),!T||A!=a){var o=v("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),T=r.appendChild(o),W.ie&&W.win&&typeof j.styleSheets!=N&&j.styleSheets.length>0&&(T=j.styleSheets[j.styleSheets.length-1]),A=a}W.ie&&W.win?T&&typeof T.addRule==P&&T.addRule(t,e):T&&typeof j.createTextNode!=N&&T.appendChild(j.createTextNode(t+" {"+e+"}"))}}}function w(t,e){if(U){var n=e?"visible":"hidden";H&&g(t)?g(t).style.visibility=n:x("#"+t,"visibility:"+n)}}function k(t){var e=/[\\\"<>\.;]/,n=null!=e.exec(t);return n&&typeof encodeURIComponent!=N?encodeURIComponent(t):t}{var S,C,E,_,T,A,N="undefined",P="object",I="Shockwave Flash",M="ShockwaveFlash.ShockwaveFlash",B="application/x-shockwave-flash",L="SWFObjectExprInst",D="onreadystatechange",O=window,j=document,V=navigator,F=!1,R=[i],$=[],q=[],G=[],H=!1,z=!1,U=!0,W=function(){var t=typeof j.getElementById!=N&&typeof j.getElementsByTagName!=N&&typeof j.createElement!=N,e=V.userAgent.toLowerCase(),n=V.platform.toLowerCase(),i=/win/.test(n?n:e),r=/mac/.test(n?n:e),a=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],l=null;if(typeof V.plugins!=N&&typeof V.plugins[I]==P)l=V.plugins[I].description,!l||typeof V.mimeTypes!=N&&V.mimeTypes[B]&&!V.mimeTypes[B].enabledPlugin||(F=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=N)try{var u=new ActiveXObject(M);u&&(l=u.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(c){}return{w3:t,pv:s,wk:a,ie:o,win:i,mac:r}}();!function(){W.w3&&((typeof j.readyState!=N&&"complete"==j.readyState||typeof j.readyState==N&&(j.getElementsByTagName("body")[0]||j.body))&&t(),H||(typeof j.addEventListener!=N&&j.addEventListener("DOMContentLoaded",t,!1),W.ie&&W.win&&(j.attachEvent(D,function(){"complete"==j.readyState&&(j.detachEvent(D,arguments.callee),t())}),O==top&&!function(){if(!H){try{j.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}()),W.wk&&!function(){return H?void 0:/loaded|complete/.test(j.readyState)?void t():void setTimeout(arguments.callee,0)}(),n(t)))}(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var t=G.length,e=0;t>e;e++)G[e][0].detachEvent(G[e][1],G[e][2]);for(var n=q.length,i=0;n>i;i++)f(q[i]);for(var r in W)W[r]=null;W=null;for(var o in a)a[o]=null;a=null})}()}return{registerObject:function(t,e,n,i){if(W.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=n,r.callbackFn=i,$[$.length]=r,w(t,!1)}else i&&i({success:!1,id:t})},getObjectById:function(t){return W.w3?s(t):void 0},embedSWF:function(t,n,i,r,a,o,s,c,d,p){var f={success:!1,id:n};W.w3&&!(W.wk&&W.wk<312)&&t&&n&&i&&r&&a?(w(n,!1),e(function(){i+="",r+="";var e={};if(d&&typeof d===P)for(var m in d)e[m]=d[m];e.data=t,e.width=i,e.height=r;var g={};if(c&&typeof c===P)for(var v in c)g[v]=c[v];if(s&&typeof s===P)for(var y in s)typeof g.flashvars!=N?g.flashvars+="&"+y+"="+s[y]:g.flashvars=y+"="+s[y];if(b(a)){var x=h(e,g,n);e.id==n&&w(n,!0),f.success=!0,f.ref=x}else{if(o&&l())return e.data=o,void u(e,g,n,p);w(n,!0)}p&&p(f)})):p&&p(f)},switchOffAutoHideShow:function(){U=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(t,e,n){return W.w3?h(t,e,n):void 0},showExpressInstall:function(t,e,n,i){W.w3&&l()&&u(t,e,n,i)},removeSWF:function(t){W.w3&&f(t)},createCSS:function(t,e,n,i){W.w3&&x(t,e,n,i)},addDomLoadEvent:e,addLoadEvent:n,getQueryParamValue:function(t){var e=j.location.search||j.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return k(e);for(var n=e.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==t)return k(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var t=g(L);t&&S&&(t.parentNode.replaceChild(S,t),C&&(w(C,!0),W.ie&&W.win&&(S.style.display="block")),E&&E(_)),z=!1}}}}();n("swfObject",function(){}),function(t){var e=t.Callbacks("once unique memory"),n=0,i=null;if(window.FileReader)return void(t.fn.fileReader=function(){return this});var r=0,o=0,s=0;t.fn.fileReader=function(n){n=t.extend({},t.fn.fileReader.defaults,n);var i=this;return e.add(function(){return l(i,n)}),t.isFunction(n.callback)&&e.add(n.callback),FileAPIProxy.ready||FileAPIProxy.hasInitialized||FileAPIProxy.init(n),this},t.fn.fileReader.defaults={id:"fileReaderSWFObject",multiple:null,accept:null,label:null,extensions:null,filereader:"files/filereader.swf",expressInstall:null,debugMode:!1,callback:!1,position:"fixed",appendTo:"body",offsetCss:function(t){return t.offset()}};var l=function(e,r){return e.each(function(e,a){var o=t(r.trigger||a);a=t(a);var s=a.attr("id");s||(s="flashFileInput"+n,a.attr("id",s),n++),r.multiple=!!(null===r.multiple?a.attr("multiple"):r.multiple),r.accept=null===r.accept?a.attr("accept"):r.accept,FileAPIProxy.inputs[s]=a,FileAPIProxy.swfObject.add(s,r.multiple,r.accept,r.label,r.extensions),o.add(a).css("z-index",0).mouseover(function(t){s!==i&&(t=t||window.event,i=s,FileAPIProxy.swfObject.mouseover(s)),FileAPIProxy.container.height(o.outerHeight()).width(o.outerWidth()).css(r.offsetCss(o))}).click(function(t){return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1})})};window.FileAPIProxy={ready:!1,hasInitialized:!1,init:function(n){function r(t,e){setTimeout(function(){if("undefined"!=typeof t.ref.PercentLoaded)var n=setInterval(function(){o.debugMode&&console.info("SWF Load Percentage: ",t.ref.PercentLoaded()),100===t.ref.PercentLoaded()&&(e(),clearInterval(n))},500)},200)}var o=this;this.hasInitialized=!0,this.debugMode=n.debugMode,this.container=t("<div>").attr("id",n.id).wrap("<div>").parent().css({position:n.position,width:"1px",height:"1px",display:"inline-block",background:"transparent","z-index":99999}).on("mouseover mouseout mousedown mouseup",function(e){i&&t("#"+i).trigger(e.type)}).appendTo(n.appendTo),a.embedSWF(n.filereader,n.id,"100%","100%","10",n.expressInstall,{debugMode:n.debugMode?!0:""},{wmode:"transparent",allowScriptAccess:"sameDomain"},{},function(n){o.swfObject=n.ref,t(o.swfObject).css({display:"block",outline:0}).attr("tabindex",0),n.success?r(n,function(){o.ready&&e.fire(),o.ready=t.isFunction(n.ref.add)}):o.hasInitialized=!1})},swfObject:null,container:null,inputs:{},readers:{},onFileInputEvent:function(t){if(this.debugMode&&console.info("FileInput Event ",t.type,t),t.target in this.inputs){var e=this.inputs[t.target];t.target=e[0],"change"===t.type&&(t.files=new FileList(t.files),t.target={files:t.files}),e.trigger(t)}window.focus()},onFileReaderEvent:function(t){if(this.debugMode&&console.info("FileReader Event ",t.type,t,t.target in this.readers),t.target in this.readers){var e=this.readers[t.target];t.target=e,e._handleFlashEvent.call(e,t)}},onFileReaderError:function(t){this.debugMode&&console.log(t)},onSWFReady:function(){return this.container.css({position:"absolute"}),this.ready=t.isFunction(this.swfObject.add),this.ready&&e.fire(),!0}},window.FileReader=function(){this.EMPTY=0,this.LOADING=1,this.DONE=2,this.readyState=0,this.result=null,this.error=null,this.onloadstart=null,this.onprogress=null,this.onload=null,this.onabort=null,this.onerror=null,this.onloadend=null,this._callbacks={loadstart:t.Callbacks("unique"),progress:t.Callbacks("unique"),abort:t.Callbacks("unique"),error:t.Callbacks("unique"),load:t.Callbacks("unique"),loadend:t.Callbacks("unique")},this._id=null},window.FileReader.prototype={readAsBinaryString:function(t){this._start(t),FileAPIProxy.swfObject.read(t.input,t.name,"readAsBinaryString")},readAsText:function(t){this._start(t),FileAPIProxy.swfObject.read(t.input,t.name,"readAsText")},readAsDataURL:function(t){this._start(t),FileAPIProxy.swfObject.read(t.input,t.name,"readAsDataURL")},readAsArrayBuffer:function(){throw"Whoops FileReader.readAsArrayBuffer is unimplemented"},abort:function(){this.result=null,this.readyState!==this.EMPTY&&this.readyState!==this.DONE&&FileAPIProxy.swfObject.abort(this._id)},addEventListener:function(t,e){t in this._callbacks&&this._callbacks[t].add(e)},removeEventListener:function(t,e){t in this._callbacks&&this._callbacks[t].remove(e)},dispatchEvent:function(e){if(e.target=this,e.type in this._callbacks){var n=this["on"+e.type];t.isFunction(n)&&n(e),this._callbacks[e.type].fire(e)}return!0},_register:function(t){this._id=t.input+"."+t.name,FileAPIProxy.readers[this._id]=this},_start:function(t){if(this._register(t),this.readyState===this.LOADING)throw{type:"InvalidStateError",code:11,message:"The object is in an invalid state."}},_handleFlashEvent:function(t){switch(t.type){case"loadstart":r++,this.readyState=this.LOADING;break;case"loadend":if(o++,o-s!=r)return;s=o,this.readyState=this.DONE,this.dispatchEvent(new FileReaderEvent(t));break;case"load":this.readyState=this.DONE,this.result=FileAPIProxy.swfObject.result(this._id);break;case"error":this.result=null,this.error={name:"NotReadableError",message:"The File cannot be read!"}}}},FileReaderEvent=function(t){this.initEvent(t)},FileReaderEvent.prototype={initEvent:function(e){t.extend(this,{type:null,target:null,currentTarget:null,eventPhase:2,bubbles:!1,cancelable:!1,defaultPrevented:!1,isTrusted:!1,timeStamp:(new Date).getTime()},e)},stopPropagation:function(){},stopImmediatePropagation:function(){},preventDefault:function(){}},FileList=function(t){if(t){for(var e=0;e<t.length;e++)this[e]=t[e];this.length=t.length}else this.length=0},FileList.prototype={item:function(t){return t in this?this[t]:null}}}(jQuery),n("filereader",["swfObject"],function(t){return function(){var e;return e||t.swfobject}}(this)),function(){n("arrowExt",["require"],function(){return{attach:function(t){t.addExtension("Arrows",function(e){function n(t,n){var i=t.getAttribute(n);if(!i)return null;var r=i.match(/\(\#(.*)\)/);return r&&2===r.length?e.getElem(r[1]):null}function i(t,n){var i,r="#ffffff",a="none",l=0,u=e.getElem(t);if(!u&&""!=n&&"\\nomarker"!=n){var d=o[0],h=d.getAttribute("stroke"),p=50,f=50,m="0 0 100 100",g=5,v=5,y=10;if(i="\\"==n.substr(0,1)?n.substr(1):"textmarker",c[i]){if(u=s({element:"marker",attr:{id:t,markerUnits:"strokeWidth",orient:"auto",style:"pointer-events:none",se_type:i}}),"textmarker"!=i){var b=s(c[i]),x=h;"_o"==i.substr(-2)&&(x="none"),b.setAttribute("fill",x),b.setAttribute("stroke",h),b.setAttribute("stroke-width",y),u.appendChild(b)}else{var w=s(c[i]);w.textContent=n;var k=w.getBBox(),S=1,C=k;C.x=0,C.y=0,C.width+=2*S,C.height+=2*S,w.setAttribute("x",S),w.setAttribute("y",C.height-S-k.height/4),w.setAttribute("fill",h),p=C.width/2+S,f=C.height/2+S,m=C.x+" "+C.y+" "+C.width+" "+C.height,g=C.width/10,v=C.height/10;var E=s({element:"rect",attr:{x:C.x,y:C.y,width:C.width,height:C.height,fill:r,stroke:a,"stroke-width":l}});u.setAttribute("orient",0),u.appendChild(E),u.appendChild(w)}return u.setAttribute("viewBox",m),u.setAttribute("markerWidth",g),u.setAttribute("markerHeight",v),u.setAttribute("refX",p),u.setAttribute("refY",f),e.findDefs().appendChild(u),u}}}function r(r){var s="marker-"+r,u="start"===r?"\\leftarrow":"\\rightarrow",c=o[0],d=n(c,s);if(d&&$(d).remove(),c.removeAttribute(s),""==u&&(u="\\nomarker"),"\\nomarker"==u)return a(r,u),void e.call("changed",o);var h=l+r+"_"+c.id;i(h,u),t.changeSelectedAttribute(s,"url(#"+h+")"),e.call("changed",o)}function a(t,e){"\\"!=e.substr(0,1)&&(e="\\textmarker");var n="#"+u+t+"_"+e.substr(1);svgEditor.setIcon("#cur_"+t+"_marker_list",$(n).children()),$(n).addClass("current").siblings().removeClass("current")}var o,s=(e.svgcontent,e.addSvgElementFromJson),l="se_marker_",u="mkr_",c={nomarker:{},leftarrow:{element:"path",attr:{d:"M0,50 L100,90 L70,50 L100,10 Z"}},rightarrow:{element:"path",attr:{d:"M100,50 L0,90 L30,50 L0,10 Z"}},textmarker:{element:"text",attr:{x:0,y:0,"stroke-width":0,stroke:"none","font-size":75,"font-family":"serif","text-anchor":"left","xml:space":"preserve"}},forwardslash:{element:"path",attr:{d:"M30,100 L70,0"}},reverseslash:{element:"path",attr:{d:"M30,0 L70,100"}},verticalslash:{element:"path",attr:{d:"M50,0 L50,100"}},box:{element:"path",attr:{d:"M20,20 L20,80 L80,80 L80,20 Z"}},star:{element:"path",attr:{d:"M10,30 L90,30 L20,90 L50,10 L80,90 Z"}},xmark:{element:"path",attr:{d:"M20,80 L80,20 M80,80 L20,20"}},triangle:{element:"path",attr:{d:"M10,80 L50,20 L80,80 Z"}},mcircle:{element:"circle",attr:{r:30,cx:50,cy:50}}};
return $.each(["leftarrow","rightarrow","box","star","mcircle","triangle"],function(t,e){c[e+"_o"]=c[e]}),{name:"Arrows",svgicons:"svgicons/markers-icons.xml",selected:function(t){o=t.elem;for(var n=o.length;n--;){var i=o[n];i&&-1!==i.tagName.indexOf("line")&&("arrow"===e.getMode()?r("end"):"dbarrow"===e.getMode()&&(r("start"),r("end")))}},selectedChanged:function(e){for(var n=e.elems.length,i=[];n--;){var r=e.elems[n];r&&-1!==r.tagName.indexOf("marker")&&i.push(r.childNodes[0])}i.length>0&&(t.changeSelectedAttribute("stroke",e.value,i),t.changeSelectedAttribute("fill",e.value,i))}}})}}})}(),function(){n("svg-edit/shapes_library",[],function(){return{thick_arrow:"m1.49805,149.64304l148.50121,-148.00241l148.50121,148.00241l-74.25061,0l0,148.71457l-148.5012,0l0,-148.71457z",db_thick_arrow:"m0.99835,150.00092l86.49609,-86.49651l0,43.24814l125.35546,0l0,-43.24814l86.49605,86.49651l-86.49605,86.49605l0,-43.24803l-125.35546,0l0,43.24803l-86.49609,-86.49605z"}})}(),function(){n("svg-edit/ext_shapes",["require","svg-edit/shapes_library"],function(t){var e=t("svg-edit/shapes_library");return{attach:function(t){t.addExtension("shapes",function(){var n,i,r,a,o,s=t.getRootElem(),l={},u={},c=function(t){var n;for(n in e)if(n===t)return!0;return!1};return{mouseDown:function(s){var d=t.getMode();if(c(d)){a=s.start_x;var h=a;o=s.start_y;var p=o,f=t.getStyle();return u.x=s.event.clientX,u.y=s.event.clientY,r=t.addSvgElementFromJson({element:"path",curStyles:!0,attr:{d:e[d],id:t.getNextId(),opacity:f.opacity/2,style:"pointer-events:none"}}),/[a-z]/.test(n)&&(n=e[i]=t.pathActions.convertPath(r),r.setAttribute("d",n),t.pathActions.fixEnd(r)),r.setAttribute("transform","translate("+h+","+p+") scale(0.005) translate("+-h+","+-p+")"),t.recalculateDimensions(r),l=r.getBBox(),{started:!0}}},mouseMove:function(e){var n=t.getMode();if(c(n)){var i=t.getZoom(),u=e.event,d=e.mouse_x/i,h=e.mouse_y/i,p=t.getTransformList(r),f=r.getBBox(),m=f.x,g=f.y,v=f.width,y=f.height,b=d-a,x=h-o,w={x:Math.min(a,d),y:Math.min(o,h),width:Math.abs(d-a),height:Math.abs(h-o)},k=0,S=0,C=y?(y+x)/y:1,E=v?(v+b)/v:1;E=w.width/l.width||1,C=w.height/l.height||1,a>d&&(k=l.width),o>h&&(S=l.height);var _=s.createSVGTransform(),T=s.createSVGTransform(),A=s.createSVGTransform();if(_.setTranslate(-(m+k),-(g+S)),!u.shiftKey){var N=Math.min(Math.abs(E),Math.abs(C));E=N*(0>E?-1:1),C=N*(0>C?-1:1)}T.setScale(E,C),A.setTranslate(m+k,g+S),p.appendItem(A),p.appendItem(T),p.appendItem(_),t.recalculateDimensions(r),l=r.getBBox()}},mouseUp:function(e){var n=t.getMode();if(c(n)){{e.event.clientX!=u.x&&e.event.clientY!=u.y}return{keep:!0,element:r,started:!1}}}}})}}})}(),n("plugins/dialog",["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(t,e,n,i,r,a,o){function s(e){return t.defer(function(n){t.isString(e)?t.acquire(e).then(function(e){n.resolve(t.resolveObject(e))}).fail(function(n){t.error("Failed to load dialog module ("+e+"). Details: "+n.message)}):n.resolve(e)}).promise()}var l,u={},c=0,d=function(t,e,n){this.message=t,this.title=e||d.defaultTitle,this.options=n||d.defaultOptions};return d.prototype.selectOption=function(t){l.close(this,t)},d.prototype.getView=function(){return r.processMarkup(d.defaultViewMarkup)},d.setViewUrl=function(t){delete d.prototype.getView,d.prototype.viewUrl=t},d.defaultTitle=e.title||"Application",d.defaultOptions=["Ok"],d.defaultViewMarkup=['<div data-view="plugins/messageBox" class="messageBox">','<div class="modal-header">','<h3 data-bind="text: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="text: message"></p>',"</div>",'<div class="modal-footer" data-bind="foreach: options">','<button class="btn" data-bind="click: function () { $parent.selectOption($data); }, text: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"></button>',"</div>","</div>"].join("\n"),l={MessageBox:d,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:function(){return c>0},getContext:function(t){return u[t||"default"]},addContext:function(t,e){e.name=t,u[t]=e;var n="show"+t.substr(0,1).toUpperCase()+t.substr(1);this[n]=function(e,n){return this.show(e,n,t)}},createCompositionSettings:function(t,e){var n={model:t,activate:!1,transition:!1};return e.attached&&(n.attached=e.attached),e.compositionComplete&&(n.compositionComplete=e.compositionComplete),n},getDialog:function(t){return t?t.__dialog__:void 0},close:function(t){var e=this.getDialog(t);if(e){var n=Array.prototype.slice.call(arguments,1);e.close.apply(e,n)}},show:function(e,r,a){var o=this,l=u[a||"default"];return t.defer(function(t){s(e).then(function(e){var a=i.create();a.activateItem(e,r).then(function(i){if(i){var r=e.__dialog__={owner:e,context:l,activator:a,close:function(){var n=arguments;a.deactivateItem(e,!0).then(function(i){i&&(c--,l.removeHost(r),delete e.__dialog__,0===n.length?t.resolve():1===n.length?t.resolve(n[0]):t.resolve.apply(t,n))})}};r.settings=o.createCompositionSettings(e,l),l.addHost(r),c++,n.compose(r.host,r.settings)}else t.resolve(!1)})})}).promise()},showMessage:function(e,n,i){return t.isString(this.MessageBox)?l.show(this.MessageBox,[e,n||d.defaultTitle,i||d.defaultOptions]):l.show(new this.MessageBox(e,n,i))},install:function(t){e.showDialog=function(t,e,n){return l.show(t,e,n)},e.showMessage=function(t,e,n){return l.showMessage(t,e,n)},t.messageBox&&(l.MessageBox=t.messageBox),t.messageBoxView&&(l.MessageBox.prototype.getView=function(){return t.messageBoxView})}},l.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(t){var e=a("body"),n=a('<div class="modalBlockout"></div>').css({"z-index":l.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(e),i=a('<div class="modalHost"></div>').css({"z-index":l.getNextZIndex()}).appendTo(e);if(t.host=i.get(0),t.blockout=n.get(0),!l.isOpen()){t.oldBodyMarginRight=e.css("margin-right"),t.oldInlineMarginRight=e.get(0).style.marginRight;var r=a("html"),o=e.outerWidth(!0),s=r.scrollTop();a("html").css("overflow-y","hidden");var u=a("body").outerWidth(!0);e.css("margin-right",u-o+parseInt(t.oldBodyMarginRight,10)+"px"),r.scrollTop(s)}},removeHost:function(t){if(a(t.host).css("opacity",0),a(t.blockout).css("opacity",0),setTimeout(function(){o.removeNode(t.host),o.removeNode(t.blockout)},this.removeDelay),!l.isOpen()){var e=a("html"),n=e.scrollTop();e.css("overflow-y","").scrollTop(n),t.oldInlineMarginRight?a("body").css("margin-right",t.oldBodyMarginRight):a("body").css("margin-right","")}},attached:function(t){a(t).css("visibility","hidden")},compositionComplete:function(t,e,n){var i=l.getDialog(n.model),r=a(t),o=r.find("img").filter(function(){var t=a(this);return!(this.style.width&&this.style.height||t.attr("width")&&t.attr("height"))});r.data("predefinedWidth",r.get(0).style.width);var s=function(){setTimeout(function(){r.data("predefinedWidth")||r.css({width:""});var t=r.outerWidth(!1),e=r.outerHeight(!1),n=a(window).height(),o=Math.min(e,n);r.css({"margin-top":(-o/2).toString()+"px","margin-left":(-t/2).toString()+"px"}),r.data("predefinedWidth")||r.outerWidth(t),e>n?r.css("overflow-y","auto"):r.css("overflow-y",""),a(i.host).css("opacity",1),r.css("visibility","visible"),r.find(".autofocus").first().focus()},1)};s(),o.load(s),r.hasClass("autoclose")&&a(i.blockout).click(function(){i.close()})}}),l}),function(){n("pages/editor/modules/imageImport",["require"],function(){var t=function(t,e){e.stopPropagation(),e.preventDefault();var n=function(){var n=t.svgcanvas,i=null;if(i="drop"==e.type?e.dataTransfer.files[0]:e.target.files[e.target.files.length-1]){var r=new FileReader;r.onloadend=function(t){var e=function(e,i){var r=n.addSvgElementFromJson({element:"image",attr:{x:0,y:0,width:e,height:i,id:n.getNextId(),style:"pointer-events:inherit",transform:"matrix(0.999999 0 0 1 0 0)"}});n.setHref(r,t.target.result),n.selectOnly([r]),n.alignSelectedElements("m","page"),n.alignSelectedElements("c","page")},i=100,r=100,a=new Image;a.src=t.target.result,a.style.opacity=0,a.onload=function(){i=this.width,r=this.height,e(i,r)}},r.readAsDataURL(i)}};n()};return t})}(),function(){n("pages/editor/modules/imagePrint",["require"],function(){function t(t){t=t.replace(/\"\#start/g,"#start"),t=t.replace(/\"\#end/g,"#end"),t=t.replace(/\(\"/g,"("),t=t.replace(/\"\)/g,")");var e=window.open();e.document.write(t),e.print()}return t})}(),function(){n("pages/editor/modules/contextMenu",["require"],function(){var t=function(){};return t.prototype.updateMenu=function(t,e,n,i){var r=$("#cmenu_canvas li"),a=$("#cmenu_canvas");if(e){var o=e.length>=2&&null!=e[1],s=e;if(null!=s&&!s[0]&&s.length>0&&(s=null),null!=s){if(s[0])var l=s[0].tagName;r[("g"===l?"en":"dis")+"ableContextMenuItems"]("#ungroup"),r[("g"!==l&&o?"en":"dis")+"ableContextMenuItems"]("#group")}else o?r.enableContextMenuItems("#group").disableContextMenuItems("#ungroup"):(r.disableContextMenuItems("#delete,#cut,#copy,#group,#ungroup,#move_front,#move_up,#move_down,#move_back"),$(".contextMenu").hide());(s&&s[0]||o)&&a.enableContextMenuItems("#delete,#cut,#copy,#move_front,#move_up,#move_down,#move_back")}else r.disableContextMenuItems("#delete,#cut,#copy,#group,#ungroup,#move_front,#move_up,#move_down,#move_back");n.clipBoard.length&&(a.enableContextMenuItems("#paste,#paste_in_place"),"copy"===i&&a.enableContextMenuItems("#delete"))},t.prototype.createMenu=function(t,e){$("#forContexMenu").replaceWith("<ul id='cmenu_canvas' class='contextMenu'><li><a href='#cut'>Cut</a></li><li><a href='#copy'>Copy</a></li><li><a href='#paste'>Paste</a></li><li><a href='#paste_in_place'>Paste in Place</a></li><li class='separator'><a href='#delete'>Delete</a></li><li class='separator'><a href='#group'>Group<span class='shortcut'>G</span></a></li><li><a href='#ungroup'>Ungroup<span class='shortcut'>G</span></a></li><li class='separator'><a href='#move_front'>Bring to Front<span class='shortcut'>CTRL+SHFT+]</span></a></li><li><a href='#move_up'>Bring Forward<span class='shortcut'>CTRL+]</span></a></li><li><a href='#move_down'>Send Backward<span class='shortcut'>CTRL+[</span></a></li><li><a href='#move_back'>Send to Back<span class='shortcut'>CTRL+SHFT+[</span></a></li></ul>").promise().done(function(){$(".contextMenu li").mousedown(function(){}),$("#cmenu_canvas li").disableContextMenu()}),$("#containerForRoot").contextMenu({menu:"cmenu_canvas",inSpeed:0,svgcanvas:e},function(e){switch(e){case"delete":t.trigger("editor:delete-selected");break;case"cut":t.trigger("editor:cut-selected");break;case"copy":t.trigger("editor:copy-selected");break;case"paste":t.trigger("editor:paste-selected");break;case"paste_in_place":t.trigger("editor:paste-in-place-selected");break;case"group":t.trigger("editor:group-selected-items");break;case"ungroup":t.trigger("editor:ungroup-selected-items");break;case"move_front":t.trigger("editor:move-selected-items-front");break;case"move_back":t.trigger("editor:move-selected-items-back");break;case"move_up":t.trigger("editor:move-selected-items-updown","up");break;case"move_down":t.trigger("editor:move-selected-items-updown","Down");break;default:svgedit.contextmenu&&svgedit.contextmenu.hasCustomHandler(e)&&svgedit.contextmenu.getCustomHandler(e).call()}})},t})}(),function(){n("parts/toolbar/toolbar",["require","durandal/app"],function(t){var e=t("durandal/app"),n=function(t){$(this.view).find(".btn").each(function(){this===t?$(this).addClass("btn-active"):$(this).removeClass("btn-active")})},i=function(){};return i.prototype.selectTool=function(t,i){var r=$(i.target).data("tool");e.trigger("editor:tool-switched",r),n.call(t,i.target)},i.prototype.applySelection=n,i.prototype.compositionComplete=function(t){this.view=t},new i})}(),function(){n("pages/editor/modules/events",["require","durandal/app","jquery","./imagePrint","./contextMenu","config","parts/toolbar/toolbar"],function(t){var e=t("durandal/app"),n=t("jquery"),i=t("./imagePrint"),r=t("./contextMenu"),a=t("config"),o=t("parts/toolbar/toolbar"),s=function(t){var e=this.getSelectedElems(),i=[];e.forEach(function(t){"text"===n(t).prop("tagName")&&i.push(t)}.bind(this)),this.removeFromSelection(i),t(),this.addToSelection(i,!0)};return{init:function(t){var l=new r;e.on("editor:tool-switched").then(function(e){"select"===e?n("#svgcanvas svg *").css("cursor","move"):n("#svgcanvas svg *").css("cursor","default"),t.clearSelection(),t.setMode(e)}),e.on("editor:align").then(function(e){t.alignSelectedElements(e,"selected")}),t.bind("exported",i),e.on("editor:opacity-changed",function(e){t.setOpacity(.01*e)}),t.bind("selected",function(i,r){var s=t.getMode();if("select"===s&&o.applySelection(n("#selectTool")[0]),l.updateMenu(i,r,t),r[0]&&"text"===r[0].localName){var u=n("#hiddenInputForText");u.val(r[0].textContent)}var c,d=[];if(r.forEach(function(t){t&&d.push(t)}),1===d.length&&d[0]){if("image"===d[0].nodeName)return;d=n(d[0]),c={type:d.prop("tagName"),opacity:parseInt(100*d.attr("opacity"),10)||100},"g"!==c.type&&(c.fill=d.attr("fill").replace("#","")||a.defaultFill,c.strokeWidth=parseInt(d.attr("stroke-width"),10)||a.defaultStrokeWidth,c.strokeType=function(){switch(d.attr("stroke-dasharray")){case"none":return"Solid";case"2,2":return"Dotted";case"5,5":return"Dashed";default:return"Solid"}}(),c.strokeFill=d.attr("stroke")?d.attr("stroke").replace("#",""):a.defaultStrokeFill,"text"===d.prop("tagName")&&(c.font=d.attr("font-family")||a.defaultFont,c.fontSize=d.attr("font-size")||a.defaultFontSize,c.fontBold="bold"===d.attr("font-weight"),c.fontItalic="italic"===d.attr("font-style"))),e.trigger("editor:item-selected",c)}}),e.on("editor:stroke-type-changed",function(e){switch(e){case"Solid":e="none";break;case"Dotted":e="2,2";break;case"Dashed":e="5,5"}s.call(t,function(){t.setStrokeAttr("stroke-dasharray",e)})}),e.on("editor:stroke-width-changed",function(e){s.call(t,function(){t.setStrokeWidth(e)})}),e.on("editor:change-fill",function(e){var n=function(){t.setColor(e.type,("none"!==e.value?"#":"")+e.value)};"fill"===e.type?n():s.call(t,function(){n()})}),e.on("editor:font-changed",function(e){t.setFontFamily(e)}),e.on("editor:font-size-changed",function(e){t.setFontSize(e)}),e.on("editor:font-weight-changed",function(e){t.setBold(e)}),e.on("editor:font-style-changed",function(e){t.setItalic(e)}),e.on("editor:delete-selected").then(function(e,n){t.deleteSelectedElements(),l.updateMenu(e,n,t)}),e.on("editor:cut-selected").then(function(){t.cutSelectedElements()}),e.on("editor:copy-selected").then(function(e,n){t.copySelectedElements(),l.updateMenu(e,n,t,"copy")}),e.on("editor:paste-selected").then(function(){t.pasteElements()}),e.on("editor:paste-in-place-selected").then(function(){t.pasteElements("in_place")}),e.on("editor:group-selected-items").then(function(){t.groupSelectedElements()}),e.on("editor:ungroup-selected-items").then(function(){t.ungroupSelectedElement()}),e.on("editor:move-selected-items-front").then(function(){t.moveToTopSelectedElement()}),e.on("editor:move-selected-items-back").then(function(){t.moveToBottomSelectedElement()}),e.on("editor:move-selected-items-updown",function(e){t.moveUpDownSelected(e)})}}})}(),function(){n("pages/editor/modules/zoomImage",["require"],function(){function t(){var t=$(a),e=t.scrollLeft(),n=t.scrollTop(),i=this.canvas.getZoom();return{zoom:i,x:e,y:n}}function e(){var t,e=$(a);t=$(a).width()<$(o).attr("width")?$(a).width():$(o).attr("width");var n=$(a).height(),i=this.preViewStatus.y+.5*n,r=this.canvas.getZoom(),s=r/this.preViewStatus.zoom,l=s*i-.5*n;e.scrollTop(l)}function n(){var t,e=$(a);t=$(a).width()<$(o).attr("width")?$(a).width():$(o).attr("width");var n=this.preViewStatus.x+.5*t,i=this.canvas.getZoom(),r=i/this.preViewStatus.zoom,s=r*n-.5*t;e.scrollLeft(s)}function i(){var t,i=$(a),s=$(o),l=$(r);s.width()<i.width()?(t=.5*(i.width()-s.width()),l.css("margin-left",t),l.css("margin-right",t-15)):(l.css("margin-left",0),n.call(this)),l.css("height",$(o).attr("height")+2),l.css("width",$(o).attr("width")+2),s.height()<i.height()?(t=.5*(i.height()-s.height()),l.css("margin-top",t)):(l.css("margin-top",0),e.call(this))}var r="#svgcanvas",a="#containerForRoot",o="#svgroot",s=function(){};return s.prototype.setZoom=function(e){e/=100;var n=this.canvas.getResolution();this.preViewStatus=t.call(this),this.canvas.setZoom(e),this.canvas.updateCanvas(n.w*e,n.h*e),i.call(this)},s.prototype.update=function(){var t=$(a);t.css({overflow:"scroll",width:$(window).width(),height:$(window).height()-t.offset().top-30}),i.call(this)},s.prototype.create=function(e){var n=$(a);this.canvas=e,this.width=this.canvas.getResolution().w,this.height=this.canvas.getResolution().h,this.preViewStatus=t.call(this),n.css({overflow:"scroll",width:$(window).width(),height:$(window).height()-n.offset().top-30}),$(window).on("resize",function(){this.update()}.bind(this)),i.call(this)},s})}(),function(){n("pages/editor/modules/dragHandler",["require"],function(){function t(t){function e(t){if(n.getMode())i.removeClass("btn-active"),r.off(".scrollingHelper");else{var e={x:t.clientX,y:t.clientY};$(document).on("mousemove.forScroll",function(t){var n={x:t.clientX,y:t.clientY},i={x:n.x-e.x,y:n.y-e.y},r={x:a.scrollLeft()-i.x,y:a.scrollTop()-i.y};a.scrollTop(r.y),a.scrollLeft(r.x),e.x=n.x,e.y=n.y}),$(document).on("mouseup.forcsroll",function(){$(this).off(".forScroll")})}}var n=t.svgcanvas,i=$("#btn_hand"),r=$("#svgroot"),a=$("#containerForRoot");i.hasClass("btn-active")?(r.off(".scrollingHelper"),"pathedit"===t.lastInstrument&&(t.lastInstrument="path"),n.setMode(t.lastInstrument),i.removeClass("btn-active")):(i.addClass("btn-active"),t.lastInstrument=n.getMode(),n.setMode(),r.on("mousedown.scrollingHelper",e))}return t})}(),function(){n("pages/editor/modules/keyDownHandler",["require"],function(){var t,e,n=function(){};return n.prototype.keyPressed=function(n){var i=($("#containerForRoot"),t.getSelectedElems()),r=1==i.length||null==i[1]?i[0]:null,a=i.length>=2&&null!=i[1];if("textedit"!==t.getMode())if(n.ctrlKey||n.metaKey){{t.undoMgr}if(n.ctrlKey&&n.shiftKey)switch(n.keyCode){case 221:if(null!=r||a){t.moveToTopSelectedElement();break}break;case 219:t.moveToBottomSelectedElement()}else switch(n.keyCode){case 67:(null!=r||a)&&t.copySelectedElements();break;case 86:t.pasteElements("in_place"),t.moveSelectedElements(20,20);break;case 221:if(null!=r||a){t.moveUpDownSelected("up");break}break;case 219:t.moveUpDownSelected("Down");break;case 88:(null!=r||a)&&t.cutSelectedElements()}}else switch(n.keyCode){case 46:var o=t.getMode(),s=t.getSelectedElems();if(s[0]){var l=[];$.each(s,function(e,n){return void 0!==n&&null!==n&&(l.push(n),"text"===n.nodeName)?void t.textActions.clear():void 0}),t.deleteSelectedElements(l),t.setMode(o)}break;case 32:if(n.preventDefault(),n.stopPropagation(),e)return;e=!0,$("#btn_hand").trigger("click"),$(document).on("keyup.spaceKey",function(){$("#btn_hand").trigger("click"),$(this).off(".spaceKey"),e=!1});break;case 71:n.preventDefault(),n.stopPropagation(),a?t.groupSelectedElements():r&&t.ungroupSelectedElement();break;case 37:t.moveSelectedElements(-1,0);break;case 38:t.moveSelectedElements(0,-1);break;case 39:t.moveSelectedElements(1,0);break;case 40:t.moveSelectedElements(0,1)}},n.prototype.init=function(e){t=e},n})}(),function(){n("pages/editor/editor",["require","svgcanvas","bootstrap","contextmenu","filereader","arrowExt","svg-edit/ext_shapes","plugins/dialog","durandal/app","./modules/imageImport","./modules/imagePrint","./modules/events","./modules/zoomImage","./modules/dragHandler","config","knockout","./modules/keyDownHandler","./modules/contextMenu"],function(t){t("svgcanvas"),t("bootstrap"),t("contextmenu"),t("filereader");var e=t("arrowExt"),n=t("svg-edit/ext_shapes"),i=t("plugins/dialog"),r=t("durandal/app"),a=t("./modules/imageImport"),o=t("./modules/imagePrint"),s=t("./modules/events"),l=t("./modules/zoomImage"),u=t("./modules/dragHandler"),c=t("config"),d=t("knockout"),h=t("./modules/keyDownHandler"),p=t("./modules/contextMenu"),f=new h,m=new l,g=new p,v={canvasName:"default",canvas_expansion:3,dimensions:[1040,480],initFill:{color:c.defaultFill,opacity:1},initStroke:{width:c.defaultStrokeWidth,color:c.defaultStrokeFill,opacity:1},initOpacity:1,imgPath:"assets/",extPath:"extensions/",jGraduatePath:"jgraduate/images/",extensions:["ext-markers.js","ext-connector.js","ext-eyedropper.js","ext-shapes.js","ext-imagelib.js","ext-grid.js"],initTool:c.defaultTool,wireframe:!1,colorPickerCSS:null,gridSnapping:!1,gridColor:"#000",baseUnit:"px",snappingStep:10,showRulers:!0},y=function(){this.svgcanvas=null,this.lastInstrument=null,this.currentZoom=d.observable(100),this.currentZoom.subscribe(function(t){m.setZoom(t)}),this.updateSVGString=function(){this.lastSavedSVG=this.svgcanvas.getSvgString()}.bind(this),this.centerCanvas=function(){this.currentZoom(this.currentZoom()+1),this.currentZoom(this.currentZoom()-1)},r.on("editor:finished-loading",function(){this.updateSVGString(),$.cd_loadingOverlay("hide"),$("#importInput").fileReader({filereader:"assets/filereader.swf"}),$("button,div").tooltip(),$("#svgcanvas").show()}.bind(this))};y.prototype.attached=function(){$("#svgcanvas").hide();var t=this;this.svgcanvas=new $.SvgCanvas(document.getElementById("svgcanvas"),v),this.svgcanvas.updateCanvas(v.dimensions[0],v.dimensions[1]),window.dev=window.dev||{},window.dev.canvas=this.svgcanvas,e.attach(this.svgcanvas),n.attach(this.svgcanvas);var i=$("#hiddenInputForText");this.svgcanvas.textActions.setInputElem(i[0]),i.keyup(function(){t.svgcanvas.setTextContent(this.value)}),s.init(this.svgcanvas),f.init(this.svgcanvas),$(document).on("keydown.keys",f.keyPressed),m.create(this.svgcanvas),g.createMenu(r,this.svgcanvas),$("#containerForRoot").bind("mousedown",function(t){0===t.button&&"block"===$(".contextMenu").css("display")&&$(".contextMenu").hide()}),$.cd_loadingOverlay("show")},y.prototype.imageImport=function(t,e){a(t,e)},y.prototype.setBackground=function(t){this.svgcanvas.setBackground(t)},y.prototype.cropClicked=function(){i.show("parts/crop/crop")},y.prototype.exportClicked=function(){i.show("parts/export/export")},y.prototype.imagePrint=function(){this.svgcanvas.bind("exported",function(t,e){var n="<svg>";n+=e.svg,n+="</svg>",o(n),this.svgcanvas.unbind("exported")}.bind(this)),this.svgcanvas.rasterExport()},y.prototype.dragCanvas=function(){u(this)};return y.prototype.isDirty=function(){return this.lastSavedSVG!==this.svgcanvas.getSvgString()},new y})}(),n("text!parts/alignment/alignment.html",[],function(){return'<div class="tools-row">\n    <button data-toggle="tooltip" title="Align Left" class="btn btn-markup btn-align-left" data-align="l" data-bind="click: alignClicked"></button>\n    <button data-toggle="tooltip" title="Align center" class="btn btn-markup btn-align-center" data-align="c" data-bind="click: alignClicked"></button>\n    <button data-toggle="tooltip" title="Align right" class="btn btn-markup btn-align-right" data-align="r" data-bind="click: alignClicked"></button>\n</div>\n<div class="tools-row">\n    <button data-toggle="tooltip" title="Align top" class="btn btn-markup btn-align-top" data-align="t" data-bind="click: alignClicked"></button>\n    <button data-toggle="tooltip" title="Align middle" class="btn btn-markup btn-align-middle" data-align="m" data-bind="click: alignClicked"></button>\n    <button data-toggle="tooltip" title="Align bottom" class="btn btn-markup btn-align-bottom" data-align="b" data-bind="click: alignClicked"></button>\n</div>'}),function(){n("parts/alignment/alignment",["require","durandal/app"],function(t){var e=t("durandal/app"),n=function(){};return n.prototype.alignClicked=function(t,n){var i=$(n.target).data("align");e.trigger("editor:align",i)},n})}(),n("text!parts/crop/crop.html",[],function(){return'<div id="crop">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-body">\n                <div class="crop-window">\n                    <div class="row">\n                        <div class="preview"></div>\n                    </div>\n                    <div class="row">\n                        <div class="col-md-6 info-block">\n                            <div class="col-md-5 position">\n                                <div>X:<span class="data-of-infoblock" data-bind="text: status.x"></span>px</div>\n                                <div>Y:<span class="data-of-infoblock" data-bind="text: status.y"></span>px</div>\n                            </div>\n                            <div class="col-md-7 size">\n                                <div>Width:<span class="data-of-infoblock" data-bind="text: status.width"></span>px</div>\n                                <div>Height:<span class="data-of-infoblock" data-bind="text: status.height"></span>px</div>\n                            </div>\n                        </div>\n                        <div class="col-md-6 control-block">\n                            <button type="button" class="btn-default btn-modal" data-bind="click: applyClicked">Crop</button>\n                            <button type="button" class="btn-default btn-modal" data-bind="click: cancelClicked">Cancel</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'}),function(){n("canvg",["require"],function(){function t(){var t={};return t.FRAMERATE=30,t.MAX_VIRTUAL_PIXELS=3e4,t.init=function(e){var n=0;t.UniqueId=function(){return n++,"canvg"+n},t.Definitions={},t.Styles={},t.Animations=[],t.Images=[],t.ctx=e,t.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(t,e){this.viewPorts.push({width:t,height:e})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(t){return null!=t&&"number"==typeof t?t:"x"==t?this.width():"y"==t?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},t.init(),t.ImagesLoaded=function(){for(var e=0;e<t.Images.length;e++)if(!t.Images[e].loaded)return!1;return!0},t.trim=function(t){return t.replace(/^\s+|\s+$/g,"")},t.compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},t.ajax=function(t){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e?(e.open("GET",t,!1),e.send(null),e.responseText):null},t.parseXml=function(t){if(window.DOMParser){t=t.replace(/<svg /,"<canvg "),t=t.replace(/<\/svg>/,"</canvg>"),t=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/,'xmlns="http://www.canvg.org/2000/canvg"');var e=new DOMParser;return e.parseFromString(t,"text/xml")}t=t.replace(/<!DOCTYPE svg[^>]*>/,"");var n=new ActiveXObject("Microsoft.XMLDOM");return n.async="false",n.loadXML(t),n},t.Property=function(t,e){this.name=t,this.value=e},t.Property.prototype.getValue=function(){return this.value},t.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},t.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var t=parseFloat(this.value);return(this.value+"").match(/%$/)&&(t/=100),t},t.Property.prototype.valueOrDefault=function(t){return this.hasValue()?this.value:t},t.Property.prototype.numValueOrDefault=function(t){return this.hasValue()?this.numValue():t},t.Property.prototype.addOpacity=function(e){var n=this.value;if(null!=e&&""!=e&&"string"==typeof this.value){var i=new RGBColor(this.value);i.ok&&(n="rgba("+i.r+", "+i.g+", "+i.b+", "+e+")")}return new t.Property(this.name,n)},t.Property.prototype.getDefinition=function(){var e=this.value.match(/#([^\)']+)/);return e&&(e=e[1]),e||(e=this.value),t.Definitions[e]},t.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},t.Property.prototype.getFillStyleDefinition=function(e,n){var i=this.getDefinition();return null!=i&&i.createGradient?i.createGradient(t.ctx,e,n):null!=i&&i.createPattern?i.createPattern(t.ctx,e):null},t.Property.prototype.getDPI=function(){return 96},t.Property.prototype.getEM=function(e){var n=12,i=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);return i.hasValue()&&(n=i.toPixels(e)),n},t.Property.prototype.getUnits=function(){var t=this.value+"";return t.replace(/[0-9\.\-]/g,"")},t.Property.prototype.toPixels=function(e,n){if(!this.hasValue())return 0;var i=this.value+"";if(i.match(/em$/))return this.numValue()*this.getEM(e);if(i.match(/ex$/))return this.numValue()*this.getEM(e)/2;if(i.match(/px$/))return this.numValue();if(i.match(/pt$/))return this.numValue()*this.getDPI(e)*(1/72);if(i.match(/pc$/))return 15*this.numValue();if(i.match(/cm$/))return this.numValue()*this.getDPI(e)/2.54;if(i.match(/mm$/))return this.numValue()*this.getDPI(e)/25.4;if(i.match(/in$/))return this.numValue()*this.getDPI(e);if(i.match(/%$/))return this.numValue()*t.ViewPort.ComputeSize(e);var r=this.numValue();return n&&1>r?r*t.ViewPort.ComputeSize(e):r},t.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/s$/)?1e3*this.numValue():(t.match(/ms$/),this.numValue())},t.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var t=this.value+"";return t.match(/deg$/)?this.numValue()*(Math.PI/180):t.match(/grad$/)?this.numValue()*(Math.PI/200):t.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},t.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(e,n,i,r,a,o){var s=null!=o?this.Parse(o):this.CreateFont("","","","","",t.ctx.font);return{fontFamily:a||s.fontFamily,fontSize:r||s.fontSize,fontStyle:e||s.fontStyle,fontWeight:i||s.fontWeight,fontVariant:n||s.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var e=this;this.Parse=function(n){for(var i={},r=t.trim(t.compressSpaces(n||"")).split(" "),a={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},o="",s=0;s<r.length;s++)a.fontStyle||-1==e.Styles.indexOf(r[s])?a.fontVariant||-1==e.Variants.indexOf(r[s])?a.fontWeight||-1==e.Weights.indexOf(r[s])?a.fontSize?"inherit"!=r[s]&&(o+=r[s]):("inherit"!=r[s]&&(i.fontSize=r[s].split("/")[0]),a.fontStyle=a.fontVariant=a.fontWeight=a.fontSize=!0):("inherit"!=r[s]&&(i.fontWeight=r[s]),a.fontStyle=a.fontVariant=a.fontWeight=!0):("inherit"!=r[s]&&(i.fontVariant=r[s]),a.fontStyle=a.fontVariant=!0):("inherit"!=r[s]&&(i.fontStyle=r[s]),a.fontStyle=!0);return""!=o&&(i.fontFamily=o),i}},t.ToNumberArray=function(e){for(var n=t.trim(t.compressSpaces((e||"").replace(/,/g," "))).split(" "),i=0;i<n.length;i++)n[i]=parseFloat(n[i]);return n},t.Point=function(t,e){this.x=t,this.y=e},t.Point.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},t.Point.prototype.applyTransform=function(t){var e=this.x*t[0]+this.y*t[2]+t[4],n=this.x*t[1]+this.y*t[3]+t[5];this.x=e,this.y=n},t.CreatePoint=function(e){var n=t.ToNumberArray(e);return new t.Point(n[0],n[1])},t.CreatePath=function(e){for(var n=t.ToNumberArray(e),i=[],r=0;r<n.length;r+=2)i.push(new t.Point(n[r],n[r+1]));return i},t.BoundingBox=function(t,e,n,r){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(t,e){null!=t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),null!=e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))},this.addX=function(t){this.addPoint(t,null)},this.addY=function(t){this.addPoint(null,t)},this.addBoundingBox=function(t){this.addPoint(t.x1,t.y1),this.addPoint(t.x2,t.y2)
},this.addQuadraticCurve=function(t,e,n,i,r,a){var o=t+2/3*(n-t),s=e+2/3*(i-e),l=o+1/3*(r-t),u=s+1/3*(a-e);this.addBezierCurve(t,e,o,l,s,u,r,a)},this.addBezierCurve=function(t,e,n,r,a,o,s,l){var u=[t,e],c=[n,r],d=[a,o],h=[s,l];for(this.addPoint(u[0],u[1]),this.addPoint(h[0],h[1]),i=0;1>=i;i++){var p=function(t){return Math.pow(1-t,3)*u[i]+3*Math.pow(1-t,2)*t*c[i]+3*(1-t)*Math.pow(t,2)*d[i]+Math.pow(t,3)*h[i]},f=6*u[i]-12*c[i]+6*d[i],m=-3*u[i]+9*c[i]-9*d[i]+3*h[i],g=3*c[i]-3*u[i];if(0!=m){var v=Math.pow(f,2)-4*g*m;if(!(0>v)){var y=(-f+Math.sqrt(v))/(2*m);y>0&&1>y&&(0==i&&this.addX(p(y)),1==i&&this.addY(p(y)));var b=(-f-Math.sqrt(v))/(2*m);b>0&&1>b&&(0==i&&this.addX(p(b)),1==i&&this.addY(p(b)))}}else{if(0==f)continue;var x=-g/f;x>0&&1>x&&(0==i&&this.addX(p(x)),1==i&&this.addY(p(x)))}}},this.isPointInBox=function(t,e){return this.x1<=t&&t<=this.x2&&this.y1<=e&&e<=this.y2},this.addPoint(t,e),this.addPoint(n,r)},t.Transform=function(e){var n=this;this.Type={},this.Type.translate=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.translate(this.p.x||0,this.p.y||0)},this.applyToPoint=function(t){t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(e){var n=t.ToNumberArray(e);this.angle=new t.Property("angle",n[0]),this.cx=n[1]||0,this.cy=n[2]||0,this.apply=function(t){t.translate(this.cx,this.cy),t.rotate(this.angle.toRadians()),t.translate(-this.cx,-this.cy)},this.applyToPoint=function(t){var e=this.angle.toRadians();t.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),t.applyTransform([Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0]),t.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(e){this.p=t.CreatePoint(e),this.apply=function(t){t.scale(this.p.x||1,this.p.y||this.p.x||1)},this.applyToPoint=function(t){t.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(e){this.m=t.ToNumberArray(e),this.apply=function(t){t.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(t){t.applyTransform(this.m)}},this.Type.SkewBase=function(e){this.base=n.Type.matrix,this.base(e),this.angle=new t.Property("angle",e)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(t){this.base=n.Type.SkewBase,this.base(t),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(t)},this.applyToPoint=function(t){for(var e=0;e<this.transforms.length;e++)this.transforms[e].applyToPoint(t)};for(var i=t.trim(t.compressSpaces(e)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),r=0;r<i.length;r++){var a=t.trim(i[r].split("(")[0]),o=i[r].split("(")[1].replace(")",""),s=new this.Type[a](o);s.type=a,this.transforms.push(s)}},t.AspectRatio=function(e,n,i,r,a,o,s,l,u,c){n=t.compressSpaces(n),n=n.replace(/^defer\s/,"");var d=n.split(" ")[0]||"xMidYMid",h=n.split(" ")[1]||"meet",p=i/r,f=a/o,m=Math.min(p,f),g=Math.max(p,f);"meet"==h&&(r*=m,o*=m),"slice"==h&&(r*=g,o*=g),u=new t.Property("refX",u),c=new t.Property("refY",c),u.hasValue()&&c.hasValue()?e.translate(-m*u.toPixels("x"),-m*c.toPixels("y")):(d.match(/^xMid/)&&("meet"==h&&m==f||"slice"==h&&g==f)&&e.translate(i/2-r/2,0),d.match(/YMid$/)&&("meet"==h&&m==p||"slice"==h&&g==p)&&e.translate(0,a/2-o/2),d.match(/^xMax/)&&("meet"==h&&m==f||"slice"==h&&g==f)&&e.translate(i-r,0),d.match(/YMax$/)&&("meet"==h&&m==p||"slice"==h&&g==p)&&e.translate(0,a-o)),"none"==d?e.scale(p,f):"meet"==h?e.scale(m,m):"slice"==h&&e.scale(g,g),e.translate(null==s?0:-s,null==l?0:-l)},t.Element={},t.EmptyProperty=new t.Property("EMPTY",""),t.Element.ElementBase=function(e){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(e,n){var i=this.attributes[e];return null!=i?i:(1==n&&(i=new t.Property(e,""),this.attributes[e]=i),i||t.EmptyProperty)},this.getHrefAttribute=function(){for(var e in this.attributes)if(e.match(/:href$/))return this.attributes[e];return t.EmptyProperty},this.style=function(e,n){var i=this.styles[e];if(null!=i)return i;var r=this.attribute(e);if(null!=r&&r.hasValue())return this.styles[e]=r,r;var a=this.parent;if(null!=a){var o=a.style(e);if(null!=o&&o.hasValue())return o}return 1==n&&(i=new t.Property(e,""),this.styles[e]=i),i||t.EmptyProperty},this.render=function(t){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(t.save(),this.attribute("mask").hasValue()){var e=this.attribute("mask").getDefinition();null!=e&&e.apply(t,this)}else if(this.style("filter").hasValue()){var n=this.style("filter").getDefinition();null!=n&&n.apply(t,this)}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}},this.setContext=function(){},this.clearContext=function(){},this.renderChildren=function(t){for(var e=0;e<this.children.length;e++)this.children[e].render(t)},this.addChild=function(e,n){var i=e;n&&(i=t.CreateElement(e)),i.parent=this,this.children.push(i)},null!=e&&1==e.nodeType){for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];1==i.nodeType&&this.addChild(i,!0),this.captureTextNodes&&3==i.nodeType&&this.addChild(new t.Element.tspan(i),!1)}for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n];this.attributes[r.nodeName]=new t.Property(r.nodeName,r.nodeValue)}var a=t.Styles[e.nodeName];if(null!=a)for(var o in a)this.styles[o]=a[o];if(this.attribute("class").hasValue())for(var s=t.compressSpaces(this.attribute("class").value).split(" "),l=0;l<s.length;l++){if(a=t.Styles["."+s[l]],null!=a)for(var o in a)this.styles[o]=a[o];if(a=t.Styles[e.nodeName+"."+s[l]],null!=a)for(var o in a)this.styles[o]=a[o]}if(this.attribute("id").hasValue()){var a=t.Styles["#"+this.attribute("id").value];if(null!=a)for(var o in a)this.styles[o]=a[o]}if(this.attribute("style").hasValue())for(var a=this.attribute("style").value.split(";"),n=0;n<a.length;n++)if(""!=t.trim(a[n])){var u=a[n].split(":"),o=t.trim(u[0]),c=t.trim(u[1]);this.styles[o]=new t.Property(o,c)}this.attribute("id").hasValue()&&null==t.Definitions[this.attribute("id").value]&&(t.Definitions[this.attribute("id").value]=this)}},t.Element.RenderedElementBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.setContext=function(e){if(this.style("fill").isUrlDefinition()){var n=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=n&&(e.fillStyle=n)}else if(this.style("fill").hasValue()){var i=this.style("fill");"currentColor"==i.value&&(i.value=this.style("color").value),e.fillStyle="none"==i.value?"rgba(0,0,0,0)":i.value}if(this.style("fill-opacity").hasValue()){var i=new t.Property("fill",e.fillStyle);i=i.addOpacity(this.style("fill-opacity").value),e.fillStyle=i.value}if(this.style("stroke").isUrlDefinition()){var n=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=n&&(e.strokeStyle=n)}else if(this.style("stroke").hasValue()){var r=this.style("stroke");"currentColor"==r.value&&(r.value=this.style("color").value),e.strokeStyle="none"==r.value?"rgba(0,0,0,0)":r.value}if(this.style("stroke-opacity").hasValue()){var r=new t.Property("stroke",e.strokeStyle);r=r.addOpacity(this.style("stroke-opacity").value),e.strokeStyle=r.value}if(this.style("stroke-width").hasValue()){var a=this.style("stroke-width").toPixels();e.lineWidth=0==a?.001:a}if(this.style("stroke-linecap").hasValue()&&(e.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(e.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(e.miterLimit=this.style("stroke-miterlimit").value),"undefined"!=typeof e.font&&(e.font=t.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var o=new t.Transform(this.attribute("transform").value);o.apply(e)}if(this.attribute("clip-path").hasValue()){var s=this.attribute("clip-path").getDefinition();null!=s&&s.apply(e)}this.style("opacity").hasValue()&&(e.globalAlpha=this.style("opacity").numValue())}},t.Element.RenderedElementBase.prototype=new t.Element.ElementBase,t.Element.PathElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.path=function(e){return null!=e&&e.beginPath(),new t.BoundingBox},this.renderChildren=function(e){this.path(e),t.Mouse.checkPath(this,e),""!=e.fillStyle&&e.fill(),""!=e.strokeStyle&&e.stroke();var n=this.getMarkers();if(null!=n){if(this.style("marker-start").isUrlDefinition()){var i=this.style("marker-start").getDefinition();i.render(e,n[0][0],n[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var i=this.style("marker-mid").getDefinition(),r=1;r<n.length-1;r++)i.render(e,n[r][0],n[r][1]);if(this.style("marker-end").isUrlDefinition()){var i=this.style("marker-end").getDefinition();i.render(e,n[n.length-1][0],n[n.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},t.Element.PathElementBase.prototype=new t.Element.RenderedElementBase,t.Element.svg=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseClearContext=this.clearContext,this.clearContext=function(e){this.baseClearContext(e),t.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(e){e.strokeStyle="rgba(0,0,0,0)",e.lineCap="butt",e.lineJoin="miter",e.miterLimit=4,this.baseSetContext(e),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),e.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var n=t.ViewPort.width(),i=t.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){n=this.attribute("width").toPixels("x"),i=this.attribute("height").toPixels("y");var r=0,a=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(r=-this.attribute("refX").toPixels("x"),a=-this.attribute("refY").toPixels("y")),e.beginPath(),e.moveTo(r,a),e.lineTo(n,a),e.lineTo(n,i),e.lineTo(r,i),e.closePath(),e.clip()}if(t.ViewPort.SetCurrent(n,i),this.attribute("viewBox").hasValue()){var o=t.ToNumberArray(this.attribute("viewBox").value),s=o[0],l=o[1];n=o[2],i=o[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,t.ViewPort.width(),n,t.ViewPort.height(),i,s,l,this.attribute("refX").value,this.attribute("refY").value),t.ViewPort.RemoveCurrent(),t.ViewPort.SetCurrent(o[2],o[3])}}},t.Element.svg.prototype=new t.Element.RenderedElementBase,t.Element.rect=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),o=this.attribute("rx").toPixels("x"),s=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(s=o),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(o=s),o=Math.min(o,r/2),s=Math.min(s,a/2),null!=e&&(e.beginPath(),e.moveTo(n+o,i),e.lineTo(n+r-o,i),e.quadraticCurveTo(n+r,i,n+r,i+s),e.lineTo(n+r,i+a-s),e.quadraticCurveTo(n+r,i+a,n+r-o,i+a),e.lineTo(n+o,i+a),e.quadraticCurveTo(n,i+a,n,i+a-s),e.lineTo(n,i+s),e.quadraticCurveTo(n,i,n+o,i),e.closePath()),new t.BoundingBox(n,i,n+r,i+a)}},t.Element.rect.prototype=new t.Element.PathElementBase,t.Element.circle=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=this.attribute("cx").toPixels("x"),i=this.attribute("cy").toPixels("y"),r=this.attribute("r").toPixels();return null!=e&&(e.beginPath(),e.arc(n,i,r,0,2*Math.PI,!0),e.closePath()),new t.BoundingBox(n-r,i-r,n+r,i+r)}},t.Element.circle.prototype=new t.Element.PathElementBase,t.Element.ellipse=function(e){this.base=t.Element.PathElementBase,this.base(e),this.path=function(e){var n=4*((Math.sqrt(2)-1)/3),i=this.attribute("rx").toPixels("x"),r=this.attribute("ry").toPixels("y"),a=this.attribute("cx").toPixels("x"),o=this.attribute("cy").toPixels("y");return null!=e&&(e.beginPath(),e.moveTo(a,o-r),e.bezierCurveTo(a+n*i,o-r,a+i,o-n*r,a+i,o),e.bezierCurveTo(a+i,o+n*r,a+n*i,o+r,a,o+r),e.bezierCurveTo(a-n*i,o+r,a-i,o+n*r,a-i,o),e.bezierCurveTo(a-i,o-n*r,a-n*i,o-r,a,o-r),e.closePath()),new t.BoundingBox(a-i,o-r,a+i,o+r)}},t.Element.ellipse.prototype=new t.Element.PathElementBase,t.Element.line=function(e){this.base=t.Element.PathElementBase,this.base(e),this.getPoints=function(){return[new t.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new t.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(e){var n=this.getPoints();return null!=e&&(e.beginPath(),e.moveTo(n[0].x,n[0].y),e.lineTo(n[1].x,n[1].y)),new t.BoundingBox(n[0].x,n[0].y,n[1].x,n[1].y)},this.getMarkers=function(){var t=this.getPoints(),e=t[0].angleTo(t[1]);return[[t[0],e],[t[1],e]]}},t.Element.line.prototype=new t.Element.PathElementBase,t.Element.polyline=function(e){this.base=t.Element.PathElementBase,this.base(e),this.points=t.CreatePath(this.attribute("points").value),this.path=function(e){var n=new t.BoundingBox(this.points[0].x,this.points[0].y);null!=e&&(e.beginPath(),e.moveTo(this.points[0].x,this.points[0].y));for(var i=1;i<this.points.length;i++)n.addPoint(this.points[i].x,this.points[i].y),null!=e&&e.lineTo(this.points[i].x,this.points[i].y);return n},this.getMarkers=function(){for(var t=[],e=0;e<this.points.length-1;e++)t.push([this.points[e],this.points[e].angleTo(this.points[e+1])]);return t.push([this.points[this.points.length-1],t[t.length-1][1]]),t}},t.Element.polyline.prototype=new t.Element.PathElementBase,t.Element.polygon=function(e){this.base=t.Element.polyline,this.base(e),this.basePath=this.path,this.path=function(t){var e=this.basePath(t);return null!=t&&(t.lineTo(this.points[0].x,this.points[0].y),t.closePath()),e}},t.Element.polygon.prototype=new t.Element.polyline,t.Element.path=function(e){this.base=t.Element.PathElementBase,this.base(e);var n=this.attribute("d").value;n=n.replace(/,/gm," "),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),n=n.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),n=n.replace(/([0-9])([+\-])/gm,"$1 $2"),n=n.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),n=n.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),n=t.compressSpaces(n),n=t.trim(n),this.PathParser=new function(e){this.tokens=e.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new t.Point(0,0),this.control=new t.Point(0,0),this.current=new t.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var e=new t.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(e)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var e=new t.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return e},this.makeAbsolute=function(t){return this.isRelativeCommand()&&(t.x+=this.current.x,t.y+=this.current.y),t},this.addMarker=function(t,e,n){null!=n&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(n)),this.addMarkerAngle(t,null==e?null:e.angleTo(t))},this.addMarkerAngle=function(t,e){this.points.push(t),this.angles.push(e)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var t=0;t<this.angles.length;t++)if(null==this.angles[t])for(var e=t+1;e<this.angles.length;e++)if(null!=this.angles[e]){this.angles[t]=this.angles[e];break}return this.angles}}(n),this.path=function(e){var n=this.PathParser;n.reset();var i=new t.BoundingBox;for(null!=e&&e.beginPath();!n.isEnd();)switch(n.nextCommand(),n.command){case"M":case"m":var r=n.getAsCurrentPoint();for(n.addMarker(r),i.addPoint(r.x,r.y),null!=e&&e.moveTo(r.x,r.y),n.start=n.current;!n.isCommandOrEnd();){var r=n.getAsCurrentPoint();n.addMarker(r,n.start),i.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"L":case"l":for(;!n.isCommandOrEnd();){var a=n.current,r=n.getAsCurrentPoint();n.addMarker(r,a),i.addPoint(r.x,r.y),null!=e&&e.lineTo(r.x,r.y)}break;case"H":case"h":for(;!n.isCommandOrEnd();){var o=new t.Point((n.isRelativeCommand()?n.current.x:0)+n.getScalar(),n.current.y);n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=e&&e.lineTo(n.current.x,n.current.y)}break;case"V":case"v":for(;!n.isCommandOrEnd();){var o=new t.Point(n.current.x,(n.isRelativeCommand()?n.current.y:0)+n.getScalar());n.addMarker(o,n.current),n.current=o,i.addPoint(n.current.x,n.current.y),null!=e&&e.lineTo(n.current.x,n.current.y)}break;case"C":case"c":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"S":case"s":for(;!n.isCommandOrEnd();){var s=n.current,l=n.getReflectedControlPoint(),u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,l),i.addBezierCurve(s.x,s.y,l.x,l.y,u.x,u.y,c.x,c.y),null!=e&&e.bezierCurveTo(l.x,l.y,u.x,u.y,c.x,c.y)}break;case"Q":case"q":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getAsControlPoint(),c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"T":case"t":for(;!n.isCommandOrEnd();){var s=n.current,u=n.getReflectedControlPoint();n.control=u;var c=n.getAsCurrentPoint();n.addMarker(c,u,u),i.addQuadraticCurve(s.x,s.y,u.x,u.y,c.x,c.y),null!=e&&e.quadraticCurveTo(u.x,u.y,c.x,c.y)}break;case"A":case"a":for(;!n.isCommandOrEnd();){var s=n.current,d=n.getScalar(),h=n.getScalar(),p=n.getScalar()*(Math.PI/180),f=n.getScalar(),m=n.getScalar(),c=n.getAsCurrentPoint(),g=new t.Point(Math.cos(p)*(s.x-c.x)/2+Math.sin(p)*(s.y-c.y)/2,-Math.sin(p)*(s.x-c.x)/2+Math.cos(p)*(s.y-c.y)/2),v=Math.pow(g.x,2)/Math.pow(d,2)+Math.pow(g.y,2)/Math.pow(h,2);v>1&&(d*=Math.sqrt(v),h*=Math.sqrt(v));var y=(f==m?-1:1)*Math.sqrt((Math.pow(d,2)*Math.pow(h,2)-Math.pow(d,2)*Math.pow(g.y,2)-Math.pow(h,2)*Math.pow(g.x,2))/(Math.pow(d,2)*Math.pow(g.y,2)+Math.pow(h,2)*Math.pow(g.x,2)));isNaN(y)&&(y=0);var b=new t.Point(y*d*g.y/h,y*-h*g.x/d),x=new t.Point((s.x+c.x)/2+Math.cos(p)*b.x-Math.sin(p)*b.y,(s.y+c.y)/2+Math.sin(p)*b.x+Math.cos(p)*b.y),w=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},k=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(w(t)*w(e))},S=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(k(t,e))},C=S([1,0],[(g.x-b.x)/d,(g.y-b.y)/h]),E=[(g.x-b.x)/d,(g.y-b.y)/h],_=[(-g.x-b.x)/d,(-g.y-b.y)/h],T=S(E,_);k(E,_)<=-1&&(T=Math.PI),k(E,_)>=1&&(T=0);var A=1-m?1:-1,N=C+A*(T/2),P=new t.Point(x.x+d*Math.cos(N),x.y+h*Math.sin(N));if(n.addMarkerAngle(P,N-A*Math.PI/2),n.addMarkerAngle(c,N-A*Math.PI),i.addPoint(c.x,c.y),null!=e){var k=d>h?d:h,I=d>h?1:d/h,M=d>h?h/d:1;e.translate(x.x,x.y),e.rotate(p),e.scale(I,M),e.arc(0,0,k,C,C+T,1-m),e.scale(1/I,1/M),e.rotate(-p),e.translate(-x.x,-x.y)}}break;case"Z":case"z":null!=e&&e.closePath(),n.current=n.start}return i},this.getMarkers=function(){for(var t=this.PathParser.getMarkerPoints(),e=this.PathParser.getMarkerAngles(),n=[],i=0;i<t.length;i++)n.push([t[i],e[i]]);return n}},t.Element.path.prototype=new t.Element.PathElementBase,t.Element.pattern=function(e){this.base=t.Element.ElementBase,this.base(e),this.createPattern=function(e){var n=this.attribute("width").toPixels("x",!0),i=this.attribute("height").toPixels("y",!0),r=new t.Element.svg;r.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),r.attributes.width=new t.Property("width",n+"px"),r.attributes.height=new t.Property("height",i+"px"),r.attributes.transform=new t.Property("transform",this.attribute("patternTransform").value),r.children=this.children;var a=document.createElement("canvas");a.width=n,a.height=i;var o=a.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&o.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var s=-1;1>=s;s++)for(var l=-1;1>=l;l++)o.save(),o.translate(s*a.width,l*a.height),r.render(o),o.restore();var u=e.createPattern(a,"repeat");return u}},t.Element.pattern.prototype=new t.Element.ElementBase,t.Element.marker=function(e){this.base=t.Element.ElementBase,this.base(e),this.baseRender=this.render,this.render=function(e,n,i){e.translate(n.x,n.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(i),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(e.lineWidth,e.lineWidth),e.save();var r=new t.Element.svg;r.attributes.viewBox=new t.Property("viewBox",this.attribute("viewBox").value),r.attributes.refX=new t.Property("refX",this.attribute("refX").value),r.attributes.refY=new t.Property("refY",this.attribute("refY").value),r.attributes.width=new t.Property("width",this.attribute("markerWidth").value),r.attributes.height=new t.Property("height",this.attribute("markerHeight").value),r.attributes.fill=new t.Property("fill",this.attribute("fill").valueOrDefault("black")),r.attributes.stroke=new t.Property("stroke",this.attribute("stroke").valueOrDefault("none")),r.children=this.children,r.render(e),e.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&e.scale(1/e.lineWidth,1/e.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&e.rotate(-i),e.translate(-n.x,-n.y)}},t.Element.marker.prototype=new t.Element.ElementBase,t.Element.defs=function(e){this.base=t.Element.ElementBase,this.base(e),this.render=function(){}},t.Element.defs.prototype=new t.Element.ElementBase,t.Element.GradientBase=function(e){this.base=t.Element.ElementBase,this.base(e),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"stop"==i.type&&this.stops.push(i)}this.getGradient=function(){},this.createGradient=function(e,n,i){var r=this;this.getHrefAttribute().hasValue()&&(r=this.getHrefAttribute().getDefinition());var a=function(e){if(i.hasValue()){var n=new t.Property("color",e);return n.addOpacity(i.value).value}return e},o=this.getGradient(e,n);if(null==o)return a(r.stops[r.stops.length-1].color);for(var s=0;s<r.stops.length;s++)o.addColorStop(r.stops[s].offset,a(r.stops[s].color));if(this.attribute("gradientTransform").hasValue()){var l=t.ViewPort.viewPorts[0],u=new t.Element.rect;u.attributes.x=new t.Property("x",-t.MAX_VIRTUAL_PIXELS/3),u.attributes.y=new t.Property("y",-t.MAX_VIRTUAL_PIXELS/3),u.attributes.width=new t.Property("width",t.MAX_VIRTUAL_PIXELS),u.attributes.height=new t.Property("height",t.MAX_VIRTUAL_PIXELS);var c=new t.Element.g;c.attributes.transform=new t.Property("transform",this.attribute("gradientTransform").value),c.children=[u];var d=new t.Element.svg;d.attributes.x=new t.Property("x",0),d.attributes.y=new t.Property("y",0),d.attributes.width=new t.Property("width",l.width),d.attributes.height=new t.Property("height",l.height),d.children=[c];var h=document.createElement("canvas");h.width=l.width,h.height=l.height;var p=h.getContext("2d");return p.fillStyle=o,d.render(p),p.createPattern(h,"no-repeat")}return o}},t.Element.GradientBase.prototype=new t.Element.ElementBase,t.Element.linearGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),a="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),o="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return i==a&&r==o?null:t.createLinearGradient(i,r,a,o)}},t.Element.linearGradient.prototype=new t.Element.GradientBase,t.Element.radialGradient=function(e){this.base=t.Element.GradientBase,this.base(e),this.getGradient=function(t,e){var n=e.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var i="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),r="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),a=i,o=r;this.attribute("fx").hasValue()&&(a="objectBoundingBox"==this.gradientUnits?n.x()+n.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(o="objectBoundingBox"==this.gradientUnits?n.y()+n.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var s="objectBoundingBox"==this.gradientUnits?(n.width()+n.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return t.createRadialGradient(a,o,0,i,r,s)}},t.Element.radialGradient.prototype=new t.Element.GradientBase,t.Element.stop=function(e){this.base=t.Element.ElementBase,this.base(e),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var n=this.style("stop-color");this.style("stop-opacity").hasValue()&&(n=n.addOpacity(this.style("stop-opacity").value)),this.color=n.value},t.Element.stop.prototype=new t.Element.ElementBase,t.Element.AnimateBase=function(e){this.base=t.Element.ElementBase,this.base(e),t.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var t=this.attribute("attributeType").value,e=this.attribute("attributeName").value;return"CSS"==t?this.parent.style(e,!0):this.parent.attribute(e,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(t){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"!=this.attribute("fill").valueOrDefault("remove")||this.removed?!1:(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+t;var e=!1;if(this.begin<this.duration){var n=this.calcValue();if(this.attribute("type").hasValue()){var i=this.attribute("type").value;n=i+"("+n+")"}this.getProperty().value=n,e=!0}return e},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var e={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var n=e.progress*(this.values.value.length-1),i=Math.floor(n),r=Math.ceil(n);e.from=new t.Property("from",parseFloat(this.values.value[i])),e.to=new t.Property("to",parseFloat(this.values.value[r])),e.progress=(n-i)/(r-i)}else e.from=this.from,e.to=this.to;return e}},t.Element.AnimateBase.prototype=new t.Element.ElementBase,t.Element.animate=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=t.from.numValue()+(t.to.numValue()-t.from.numValue())*t.progress;return e+this.initialUnits}},t.Element.animate.prototype=new t.Element.AnimateBase,t.Element.animateColor=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){var t=this.progress(),e=new RGBColor(t.from.value),n=new RGBColor(t.to.value);if(e.ok&&n.ok){var i=e.r+(n.r-e.r)*t.progress,r=e.g+(n.g-e.g)*t.progress,a=e.b+(n.b-e.b)*t.progress;return"rgb("+parseInt(i,10)+","+parseInt(r,10)+","+parseInt(a,10)+")"}return this.attribute("from").value}},t.Element.animateColor.prototype=new t.Element.AnimateBase,t.Element.animateTransform=function(e){this.base=t.Element.AnimateBase,this.base(e),this.calcValue=function(){for(var e=this.progress(),n=t.ToNumberArray(e.from.value),i=t.ToNumberArray(e.to.value),r="",a=0;a<n.length;a++)r+=n[a]+(i[a]-n[a])*e.progress+" ";return r}},t.Element.animateTransform.prototype=new t.Element.animate,t.Element.font=function(e){this.base=t.Element.ElementBase,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var n=0;n<this.children.length;n++){var i=this.children[n];"font-face"==i.type?(this.fontFace=i,i.style("font-family").hasValue()&&(t.Definitions[i.style("font-family").value]=this)):"missing-glyph"==i.type?this.missingGlyph=i:"glyph"==i.type&&(""!=i.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[i.unicode]&&(this.glyphs[i.unicode]=[]),this.glyphs[i.unicode][i.arabicForm]=i):this.glyphs[i.unicode]=i)}},t.Element.font.prototype=new t.Element.ElementBase,t.Element.fontface=function(e){this.base=t.Element.ElementBase,this.base(e),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},t.Element.fontface.prototype=new t.Element.ElementBase,t.Element.missingglyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=0},t.Element.missingglyph.prototype=new t.Element.path,t.Element.glyph=function(e){this.base=t.Element.path,this.base(e),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},t.Element.glyph.prototype=new t.Element.path,t.Element.text=function(e){this.captureTextNodes=!0,this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.style("dominant-baseline").hasValue()&&(t.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(t.textBaseline=this.style("alignment-baseline").value)},this.getBoundingBox=function(){return new t.BoundingBox(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"),0,0)
},this.renderChildren=function(t){this.textAnchor=this.style("text-anchor").valueOrDefault("start"),this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y");for(var e=0;e<this.children.length;e++)this.renderChild(t,this,e)},this.renderChild=function(t,e,n){var i=e.children[n];i.attribute("x").hasValue()?i.x=i.attribute("x").toPixels("x"):(this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),i.attribute("dx").hasValue()&&(this.x+=i.attribute("dx").toPixels("x")),i.x=this.x);var r=0;if("start"!=this.textAnchor&&(0==n||i.attribute("x").hasValue())){for(var a=r,o=n+1;o<this.children.length;o++){var s=this.children[o];if(s.attribute("x").hasValue())break;a+=s.measureText(t)}i.x-="end"==this.textAnchor?a:a/2}this.x=i.x+r,i.attribute("y").hasValue()?i.y=i.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),i.attribute("dy").hasValue()&&(this.y+=i.attribute("dy").toPixels("y")),i.y=this.y),this.y=i.y,i.render(t);for(var n=0;n<i.children.length;n++)this.renderChild(t,i,n)}},t.Element.text.prototype=new t.Element.RenderedElementBase,t.Element.TextElementBase=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getGlyph=function(t,e,n){var i=e[n],r=null;if(t.isArabic){var a="isolated";(0==n||" "==e[n-1])&&n<e.length-2&&" "!=e[n+1]&&(a="terminal"),n>0&&" "!=e[n-1]&&n<e.length-2&&" "!=e[n+1]&&(a="medial"),n>0&&" "!=e[n-1]&&(n==e.length-1||" "==e[n+1])&&(a="initial"),"undefined"!=typeof t.glyphs[i]&&(r=t.glyphs[i][a],null==r&&"glyph"==t.glyphs[i].type&&(r=t.glyphs[i]))}else r=t.glyphs[i];return null==r&&(r=t.missingGlyph),r},this.renderChildren=function(e){var n=this.parent.style("font-family").getDefinition();if(null==n)""!=e.fillStyle&&e.fillText(t.compressSpaces(this.getText()),this.x,this.y),""!=e.strokeStyle&&e.strokeText(t.compressSpaces(this.getText()),this.x,this.y);else{var i=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=this.parent.style("font-style").valueOrDefault(t.Font.Parse(t.ctx.font).fontStyle),a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++){var l=this.getGlyph(n,a,s),u=i/n.fontFace.unitsPerEm;e.translate(this.x,this.y),e.scale(u,-u);var c=e.lineWidth;e.lineWidth=e.lineWidth*n.fontFace.unitsPerEm/i,"italic"==r&&e.transform(1,0,.4,1,0,0),l.render(e),"italic"==r&&e.transform(1,0,-.4,1,0,0),e.lineWidth=c,e.scale(1/u,-1/u),e.translate(-this.x,-this.y),this.x+=i*(l.horizAdvX||n.horizAdvX)/n.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(this.x+=o[s])}}},this.getText=function(){},this.measureText=function(e){var n=this.parent.style("font-family").getDefinition();if(null!=n){var i=this.parent.style("font-size").numValueOrDefault(t.Font.Parse(t.ctx.font).fontSize),r=0,a=this.getText();n.isRTL&&(a=a.split("").reverse().join(""));for(var o=t.ToNumberArray(this.parent.attribute("dx").value),s=0;s<a.length;s++){var l=this.getGlyph(n,a,s);r+=(l.horizAdvX||n.horizAdvX)*i/n.fontFace.unitsPerEm,"undefined"==typeof o[s]||isNaN(o[s])||(r+=o[s])}return r}var u=t.compressSpaces(this.getText());if(!e.measureText)return 10*u.length;e.save(),this.setContext(e);var c=e.measureText(u).width;return e.restore(),c}},t.Element.TextElementBase.prototype=new t.Element.RenderedElementBase,t.Element.tspan=function(e){this.captureTextNodes=!0,this.base=t.Element.TextElementBase,this.base(e),this.text=e.nodeValue||e.text||"",this.getText=function(){return this.text}},t.Element.tspan.prototype=new t.Element.TextElementBase,t.Element.tref=function(e){this.base=t.Element.TextElementBase,this.base(e),this.getText=function(){var t=this.getHrefAttribute().getDefinition();return null!=t?t.children[0].getText():void 0}},t.Element.tref.prototype=new t.Element.TextElementBase,t.Element.a=function(e){this.base=t.Element.TextElementBase,this.base(e),this.hasText=!0;for(var n=0;n<e.childNodes.length;n++)3!=e.childNodes[n].nodeType&&(this.hasText=!1);this.text=this.hasText?e.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(e){if(this.hasText){this.baseRenderChildren(e);var n=new t.Property("fontSize",t.Font.Parse(t.ctx.font).fontSize);t.Mouse.checkBoundingBox(this,new t.BoundingBox(this.x,this.y-n.toPixels("y"),this.x+this.measureText(e),this.y))}else{var i=new t.Element.g;i.children=this.children,i.parent=this,i.render(e)}},this.onclick=function(){window.open(this.getHrefAttribute().value)},this.onmousemove=function(){t.ctx.canvas.style.cursor="pointer"}},t.Element.a.prototype=new t.Element.TextElementBase,t.Element.image=function(e){this.base=t.Element.RenderedElementBase,this.base(e);var n=this.getHrefAttribute().value,i=n.match(/\.svg$/);if(t.Images.push(this),this.loaded=!1,i)this.img=t.ajax(n),this.loaded=!0;else{this.img=document.createElement("img"),1==t.opts.useCORS&&(this.img.crossOrigin="Anonymous");var r=this;this.img.onload=function(){r.loaded=!0},this.img.onerror=function(){console&&console.log('ERROR: image "'+n+'" not found'),r.loaded=!0},this.img.src=n}this.renderChildren=function(e){var n=this.attribute("x").toPixels("x"),r=this.attribute("y").toPixels("y"),a=this.attribute("width").toPixels("x"),o=this.attribute("height").toPixels("y");0!=a&&0!=o&&(e.save(),i?e.drawSvg(this.img,n,r,a,o):(e.translate(n,r),t.AspectRatio(e,this.attribute("preserveAspectRatio").value,a,this.img.width,o,this.img.height,0,0),e.drawImage(this.img,0,0)),e.restore())},this.getBoundingBox=function(){var e=this.attribute("x").toPixels("x"),n=this.attribute("y").toPixels("y"),i=this.attribute("width").toPixels("x"),r=this.attribute("height").toPixels("y");return new t.BoundingBox(e,n,e+i,n+r)}},t.Element.image.prototype=new t.Element.RenderedElementBase,t.Element.g=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.getBoundingBox=function(){for(var e=new t.BoundingBox,n=0;n<this.children.length;n++)e.addBoundingBox(this.children[n].getBoundingBox());return e}},t.Element.g.prototype=new t.Element.RenderedElementBase,t.Element.symbol=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(e){if(this.baseSetContext(e),this.attribute("viewBox").hasValue()){var n=t.ToNumberArray(this.attribute("viewBox").value),i=n[0],r=n[1];width=n[2],height=n[3],t.AspectRatio(e,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,i,r),t.ViewPort.SetCurrent(n[2],n[3])}}},t.Element.symbol.prototype=new t.Element.RenderedElementBase,t.Element.style=function(e){this.base=t.Element.ElementBase,this.base(e);for(var n="",i=0;i<e.childNodes.length;i++)n+=e.childNodes[i].nodeValue;n=n.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),n=t.compressSpaces(n);for(var r=n.split("}"),i=0;i<r.length;i++)if(""!=t.trim(r[i]))for(var a=r[i].split("{"),o=a[0].split(","),s=a[1].split(";"),l=0;l<o.length;l++){var u=t.trim(o[l]);if(""!=u){for(var c={},d=0;d<s.length;d++){var h=s[d].indexOf(":"),p=s[d].substr(0,h),f=s[d].substr(h+1,s[d].length-h);null!=p&&null!=f&&(c[t.trim(p)]=new t.Property(t.trim(p),t.trim(f)))}if(t.Styles[u]=c,"@font-face"==u)for(var m=c["font-family"].value.replace(/"/g,""),g=c.src.value.split(","),v=0;v<g.length;v++)if(g[v].indexOf('format("svg")')>0)for(var y=g[v].indexOf("url"),b=g[v].indexOf(")",y),x=g[v].substr(y+5,b-y-6),w=t.parseXml(t.ajax(x)),k=w.getElementsByTagName("font"),S=0;S<k.length;S++){var C=t.CreateElement(k[S]);t.Definitions[m]=C}}}},t.Element.style.prototype=new t.Element.ElementBase,t.Element.use=function(e){this.base=t.Element.RenderedElementBase,this.base(e),this.baseSetContext=this.setContext,this.setContext=function(t){this.baseSetContext(t),this.attribute("x").hasValue()&&t.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&t.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var t=this.getHrefAttribute().getDefinition();return this.attribute("width").hasValue()&&(t.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(t.attribute("height",!0).value=this.attribute("height").value),t},this.path=function(t){var e=this.getDefinition();null!=e&&e.path(t)},this.getBoundingBox=function(){var t=this.getDefinition();return null!=t?t.getBoundingBox():void 0},this.renderChildren=function(t){var e=this.getDefinition();if(null!=e){var n=e.parent;e.parent=null,e.render(t),e.parent=n}}},t.Element.use.prototype=new t.Element.RenderedElementBase,t.Element.mask=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e){var n=this.attribute("x").toPixels("x"),i=this.attribute("y").toPixels("y"),r=this.attribute("width").toPixels("x"),a=this.attribute("height").toPixels("y"),o=e.attribute("mask").value;e.attribute("mask").value="";var s=document.createElement("canvas");s.width=n+r,s.height=i+a;var l=s.getContext("2d");this.renderChildren(l);var u=document.createElement("canvas");u.width=n+r,u.height=i+a;var c=u.getContext("2d");e.render(c),c.globalCompositeOperation="destination-in",c.fillStyle=l.createPattern(s,"no-repeat"),c.fillRect(0,0,n+r,i+a),t.fillStyle=c.createPattern(u,"no-repeat"),t.fillRect(0,0,n+r,i+a),e.attribute("mask").value=o},this.render=function(){}},t.Element.mask.prototype=new t.Element.ElementBase,t.Element.clipPath=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t){for(var e=0;e<this.children.length;e++)this.children[e].path&&(this.children[e].path(t),t.clip())},this.render=function(){}},t.Element.clipPath.prototype=new t.Element.ElementBase,t.Element.filter=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e){var n=e.getBoundingBox(),i=Math.floor(n.x1),r=Math.floor(n.y1),a=Math.floor(n.width()),o=Math.floor(n.height()),s=e.style("filter").value;e.style("filter").value="";for(var l=0,u=0,c=0;c<this.children.length;c++){var d=this.children[c].extraFilterDistance||0;l=Math.max(l,d),u=Math.max(u,d)}var h=document.createElement("canvas");h.width=a+2*l,h.height=o+2*u;var p=h.getContext("2d");p.translate(-i+l,-r+u),e.render(p);for(var c=0;c<this.children.length;c++)this.children[c].apply(p,0,0,a+2*l,o+2*u);t.drawImage(h,0,0,a+2*l,o+2*u,i-l,r-u,a+2*l,o+2*u),e.style("filter",!0).value=s},this.render=function(){}},t.Element.filter.prototype=new t.Element.ElementBase,t.Element.feMorphology=function(e){this.base=t.Element.ElementBase,this.base(e),this.apply=function(){}},t.Element.feMorphology.prototype=new t.Element.ElementBase,t.Element.feColorMatrix=function(e){function n(t,e,n,i,r,a){return t[n*i*4+4*e+a]}function i(t,e,n,i,r,a,o){t[n*i*4+4*e+a]=o}this.base=t.Element.ElementBase,this.base(e),this.apply=function(t,e,r,a,o){for(var s=t.getImageData(0,0,a,o),r=0;o>r;r++)for(var e=0;a>e;e++){var l=n(s.data,e,r,a,o,0),u=n(s.data,e,r,a,o,1),c=n(s.data,e,r,a,o,2),d=(l+u+c)/3;i(s.data,e,r,a,o,0,d),i(s.data,e,r,a,o,1,d),i(s.data,e,r,a,o,2,d)}t.clearRect(0,0,a,o),t.putImageData(s,0,0)}},t.Element.feColorMatrix.prototype=new t.Element.ElementBase,t.Element.feGaussianBlur=function(e){this.base=t.Element.ElementBase,this.base(e),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(e,n,i,r,a){return"undefined"==typeof stackBlurCanvasRGBA?void console.log("ERROR: StackBlur.js must be included for blur to work"):(e.canvas.id=t.UniqueId(),e.canvas.style.display="none",document.body.appendChild(e.canvas),stackBlurCanvasRGBA(e.canvas.id,n,i,r,a,this.blurRadius),void document.body.removeChild(e.canvas))}},t.Element.feGaussianBlur.prototype=new t.Element.ElementBase,t.Element.title=function(){},t.Element.title.prototype=new t.Element.ElementBase,t.Element.desc=function(){},t.Element.desc.prototype=new t.Element.ElementBase,t.Element.MISSING=function(t){console&&console.log("ERROR: Element '"+t.nodeName+"' not yet implemented.")},t.Element.MISSING.prototype=new t.Element.ElementBase,t.CreateElement=function(e){var n=e.nodeName.replace(/^[^:]+:/,"");n=n.replace(/\-/g,"");var i=null;return"canvg"==n&&(n="svg"),i="undefined"!=typeof t.Element[n]?new t.Element[n](e):new t.Element.MISSING(e),i.type=e.nodeName,i},t.load=function(e,n){t.loadXml(e,t.ajax(n))},t.loadXml=function(e,n){t.loadXmlDoc(e,t.parseXml(n))},t.loadXmlDoc=function(e,n){t.init(e);var i=function(t){for(var n=e.canvas;n;)t.x-=n.offsetLeft,t.y-=n.offsetTop,n=n.offsetParent;return window.scrollX&&(t.x+=window.scrollX),window.scrollY&&(t.y+=window.scrollY),t};1!=t.opts.ignoreMouse&&(e.canvas.onclick=function(e){var n=i(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onclick(n.x,n.y)},e.canvas.onmousemove=function(e){var n=i(new t.Point(null!=e?e.clientX:event.clientX,null!=e?e.clientY:event.clientY));t.Mouse.onmousemove(n.x,n.y)});var r=t.CreateElement(n.documentElement);r.root=!0;var a=!0,o=function(){t.ViewPort.Clear(),e.canvas.parentNode&&t.ViewPort.SetCurrent(e.canvas.parentNode.clientWidth,e.canvas.parentNode.clientHeight),1!=t.opts.ignoreDimensions&&(r.style("width").hasValue()&&(e.canvas.width=r.style("width").toPixels("x"),e.canvas.style.width=e.canvas.width+"px"),r.style("height").hasValue()&&(e.canvas.height=r.style("height").toPixels("y"),e.canvas.style.height=e.canvas.height+"px"));var n=e.canvas.clientWidth||e.canvas.width,i=e.canvas.clientHeight||e.canvas.height;if(1==t.opts.ignoreDimensions&&r.style("width").hasValue()&&r.style("height").hasValue()&&(n=r.style("width").toPixels("x"),i=r.style("height").toPixels("y")),t.ViewPort.SetCurrent(n,i),null!=t.opts.offsetX&&(r.attribute("x",!0).value=t.opts.offsetX),null!=t.opts.offsetY&&(r.attribute("y",!0).value=t.opts.offsetY),null!=t.opts.scaleWidth&&null!=t.opts.scaleHeight){var o=1,s=1,l=t.ToNumberArray(r.attribute("viewBox").value);r.attribute("width").hasValue()?o=r.attribute("width").toPixels("x")/t.opts.scaleWidth:isNaN(l[2])||(o=l[2]/t.opts.scaleWidth),r.attribute("height").hasValue()?s=r.attribute("height").toPixels("y")/t.opts.scaleHeight:isNaN(l[3])||(s=l[3]/t.opts.scaleHeight),r.attribute("width",!0).value=t.opts.scaleWidth,r.attribute("height",!0).value=t.opts.scaleHeight,r.attribute("viewBox",!0).value="0 0 "+n*o+" "+i*s,r.attribute("preserveAspectRatio",!0).value="none"}1!=t.opts.ignoreClear&&e.clearRect(0,0,n,i),r.render(e),a&&(a=!1,"function"==typeof t.opts.renderCallback&&t.opts.renderCallback())},s=!0;t.ImagesLoaded()&&(s=!1,o()),t.intervalID=setInterval(function(){var e=!1;if(s&&t.ImagesLoaded()&&(s=!1,e=!0),1!=t.opts.ignoreMouse&&(e|=t.Mouse.hasEvents()),1!=t.opts.ignoreAnimation)for(var n=0;n<t.Animations.length;n++)e|=t.Animations[n].update(1e3/t.FRAMERATE);"function"==typeof t.opts.forceRedraw&&1==t.opts.forceRedraw()&&(e=!0),e&&(o(),t.Mouse.runEvents())},1e3/t.FRAMERATE)},t.stop=function(){t.intervalID&&clearInterval(t.intervalID)},t.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(t,e){this.events.push({type:"onclick",x:t,y:e,run:function(t){t.onclick&&t.onclick()}})},this.onmousemove=function(t,e){this.events.push({type:"onmousemove",x:t,y:e,run:function(t){t.onmousemove&&t.onmousemove()}})},this.eventElements=[],this.checkPath=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInPath&&e.isPointInPath(i.x,i.y)&&(this.eventElements[n]=t)}},this.checkBoundingBox=function(t,e){for(var n=0;n<this.events.length;n++){var i=this.events[n];e.isPointInBox(i.x,i.y)&&(this.eventElements[n]=t)}},this.runEvents=function(){t.ctx.canvas.style.cursor="";for(var e=0;e<this.events.length;e++)for(var n=this.events[e],i=this.eventElements[e];i;)n.run(i),i=i.parent;this.events=[],this.eventElements=[]}},t}var e=function(n,i,r){if(null!=n||null!=i||null!=r){r=r||{},"string"==typeof n&&(n=document.getElementById(n)),null!=n.svg&&n.svg.stop();var a=t();(1!=n.childNodes.length||"OBJECT"!=n.childNodes[0].nodeName)&&(n.svg=a),a.opts=r;var o=n.getContext("2d");"undefined"!=typeof i.documentElement?a.loadXmlDoc(o,i):"<"==i.substr(0,1)?a.loadXml(o,i):a.load(o,i)}else for(var s=document.getElementsByTagName("svg"),l=0;l<s.length;l++){var u=s[l],c=document.createElement("canvas");c.width=u.clientWidth,c.height=u.clientHeight,u.parentNode.insertBefore(c,u),u.parentNode.removeChild(u);var d=document.createElement("div");d.appendChild(u),e(c,d.innerHTML)}};return CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(t,n,i,r,a){e(this.canvas,t,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:n,offsetY:i,scaleWidth:r,scaleHeight:a})}),e})}(),function(){n("parts/fields/fields",["require","knockout","durandal/app","pages/editor/editor","modules/adjustLayers"],function(t){var e,n=t("knockout"),i=(t("durandal/app"),t("pages/editor/editor")),r=t("modules/adjustLayers"),a=function(){e=new r,this.positionTop=e.positionTop=n.observable(0).extend({numeric:{negative:!1}}),this.positionLeft=e.positionLeft=n.observable(0).extend({numeric:{negative:!1}}),this.positionBottom=e.positionBottom=n.observable(0).extend({numeric:{negative:!1}}),this.positionRight=e.positionRight=n.observable(0).extend({numeric:{negative:!1}}),e.create(i.svgcanvas),this.reset=function(){e.reset()}};return a.prototype.attached=function(){i.svgcanvas.multipleBind("bg-changed",function(){this.reset(),i.centerCanvas()}.bind(this))},a.prototype.updateFields=function(){e.updateFields(),i.centerCanvas()},new a})}(),function(){n("parts/crop/crop",["require","jquery","modules/crop","plugins/dialog","canvg","pages/editor/editor","knockout","modules/adjustLayers","durandal/app","modules/newSize","parts/fields/fields"],function(t){var e=t("jquery"),n=t("modules/crop"),i=t("plugins/dialog"),r=t("canvg"),a=t("pages/editor/editor"),o=t("knockout"),s=t("modules/adjustLayers"),l=(t("durandal/app"),t("modules/newSize")),u=t("parts/fields/fields");n=new n;var c=new s;c.create(a.svgcanvas);var d=function(){this.status={x:o.observable(0),y:o.observable(0),width:o.observable(0),height:o.observable(0)}};return a.svgcanvas.multipleBind("bg-changed",function(){c.reset()}),d.prototype.cancelClicked=function(){n.remove(),i.close(this)},d.prototype.applyClicked=function(){var t=a.svgcanvas.getResolution(),e=n.getStatus().cropStatus,r=n.getCanvasSize(),s=t.w*t.zoom/r.width,l=t.h*t.zoom/r.height;c.positionTop=o.observable(c.positionTop()+(0-e.y)*l),c.positionBottom=o.observable(c.positionBottom()+(e.y+e.height-r.height)*l),c.positionLeft=o.observable(c.positionLeft()+(0-e.x)*s),c.positionRight=o.observable(c.positionRight()+(e.x+e.width-r.width)*s),c.updateFields(),a.centerCanvas(),u.reset(),n.remove(),i.close(this)},d.prototype.compositionComplete=function(){var t=e("#crop .preview");n.create(t);var i=n.getStatus().cropStatus,o=this;this.status.x(i.x),this.status.y(i.y),this.status.width(i.width),this.status.height(i.height);var s=document.createElement("canvas");a.svgcanvas.bind("exported",function(e,u){u.svg=u.svg.replace(/\"\#start/g,"#start"),u.svg=u.svg.replace(/\"\#end/g,"#end"),u.svg=u.svg.replace(/\(\"/g,"("),u.svg=u.svg.replace(/\"\)/g,")"),r(s,u.svg,{renderCallback:function(){n.setBackground(s.toDataURL(),function(){var e=n.getStatus().backgroundImg,r=l(e.width,e.height,t.width(),t.height());n.setCanvasSize(r.width,r.height);var a=e.width/r.width,s=e.height/r.height;n.on({mouseUp:function(){i=n.getStatus().cropStatus,o.status.x(Math.round(i.x*a)),o.status.y(Math.round(i.y*s)),o.status.width(Math.round(i.width*a)),o.status.height(Math.round(i.height*s))}})})}}),a.svgcanvas.unbind("exported")}),a.svgcanvas.rasterExport()},d})}(),n("text!parts/export/export.html",[],function(){return'<div id="export">\n    <div class="modal-dialog">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>\n                <h4 class="modal-title" id="myModalLabel">\n                    <img src="assets/export-sketch.png" alt=""/>\n                    <span class="window-header-title">Export sketch</span>\n                </h4>\n            </div>\n            <div class="export-body">\n                <label for="name">File name</label>\n                <input type="text" id="name" data-bind="value: name">\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn-default btn-modal" data-bind="click: exportClicked">Export</button>\n                <button type="button" class="btn-default btn-modal" data-bind="click: cancelClicked">Cancel</button>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n'}),function(){var t=/([^&=]+)=?([^&]*)/g,e=function(t){return decodeURIComponent(t.replace(/\+/g," "))},i=function(n){n=n.split("?")[1]||"";var i,r={};if(n)for("?"==n.substr(0,1)&&(n=n.substr(1));i=t.exec(n);){var a=e(i[1]),o=e(i[2]);void 0!==r[a]?($.isArray(r[a])||(r[a]=[r[a]]),r[a].push(o)):r[a]=o}return r};n("utils/url",[],function(){return{parseQueryString:i}})}(),function(){n("services/backend",["require","jquery","durandal/app","utils/url","jquery","config","pages/editor/editor","canvg","utils/url","config","pages/editor/editor"],function(t){var e=t("jquery"),n=(t("durandal/app"),t("utils/url")),e=t("jquery"),i=t("config"),r=t("pages/editor/editor"),a=t("canvg"),n=t("utils/url"),i=t("config"),r=t("pages/editor/editor"),o=function(){var t,n=document.createElement("canvas"),i=e.Deferred();return r.svgcanvas.bind("exported",function(e,o){o.svg=o.svg.replace(/\"\#start/g,"#start"),o.svg=o.svg.replace(/\"\#end/g,"#end"),o.svg=o.svg.replace(/\(\"/g,"("),o.svg=o.svg.replace(/\"\)/g,")"),a(n,o.svg,{useCORS:!0,renderCallback:function(){t=n.toDataURL().replace(/^data:image\/(png|jpg);base64,/,""),i.resolve(t)}.bind(this)}),r.svgcanvas.unbind("exported")}.bind(this)),r.svgcanvas.rasterExport(),i.promise()};return{"export":function(t){o().then(function(n){e.cd_download(i.appServer+"SketchExport.ashx",{name:t,type:"png",imageData:n})})},save:function(){return o().then(function(t){var a=n.parseQueryString(location.href);return e.ajax({cache:!1,url:i.appServer+"SketchSave.ashx",data:{imageId:r.currentImg,imageVersion:a.imageVersion,userName:a.userName,imageData:t,saveType:a.saveType,SRSID:a.SRSID,SRTID:a.SRTID,FDIM:a.FDIM,TID:a.TID,TP:a.TP},type:"POST"}).then(function(t){return r.updateSVGString(),t})})},getSampleImages:function(t){var r=n.parseQueryString(location.href);e.ajax({cache:!1,url:i.appServer+"GetSampleImages.ashx",type:"GET",dataType:"xml",data:{styleID:r.SID,styleSet:r.SN,sampleWorkflowID:r.SWID,sampleRequestWorkflowID:r.SRWID,sampleRequestTradeID:r.SRTID,submit:r.TB},success:function(e){t(e)}})},getImages360:function(t,e){function n(t){r==t&&e(i)}var i=[],r=0;if(t.frameCount)for(var a=1,o=t.frameCount;o>=a;a++)!function(e){var o=new Image;o.onload=function(){i.push({img:o,position:e}),r++,n(t.frameCount)},o.src=t.path.replace(/\d+.jpg/,a+".jpg")}(a);else{var s=new Image;s.onload=function(){i.push({img:s,position:1}),r++,e(i)},s.src=t.path.replace(/\d+.jpg/,".jpg")}},getPathToImage:function(t){return i.appServer+"LocalImage.ashx?p="+t+"&sl="+i.bgImageSizeLimit}}})}(),function(){n("parts/export/export",["require","plugins/dialog","knockout","services/backend"],function(t){var e=t("plugins/dialog"),n=t("knockout"),i=t("services/backend"),r=function(){this.name=n.observable("sketch01")};return r.prototype.cancelClicked=function(){e.close(this)},r.prototype.exportClicked=function(){i.export(this.name()),e.close(this)},r})}(),n("text!parts/fields/fields.html",[],function(){return'<div class="fields-content">\n    <div class="fields-resize">\n\n        <div class="top-input">\n            <input data-bind="value: positionTop" class="fields-input" type="number" /> px\n        </div>\n\n        <div class="middle-input">\n            <div>\n                <div class="pull-right"><input data-bind="value: positionRight" class="fields-input" type="number" /> px</div>\n                <div class="pull-left"><input data-bind="value: positionLeft" class="fields-input" type="number" /> px</div>\n            </div>\n        </div>\n\n        <div class="bottom-input">\n            <input data-bind="value: positionBottom" class="fields-input" type="number" /> px\n        </div>\n\n        <img class="img-fields" src="assets/fields_image.png" alt=""/>\n    </div>\n\n    <div class="fields-footer">\n        <button type="button" class="btn-modal btn-default pull-right" data-bind="click: updateFields">Apply</button>\n    </div>\n</div>'}),function(){n("parts/sample/modules/zoomBoxSample",["require","jquery","modules/crop"],function(t){var e=t("jquery"),n=t("modules/crop");n=new n,window.dev.crot=n;var i=function(){this.image360=[],this.position=0};return i.prototype._setImgFrom360=function(){for(var t=this,e=0,i=this.image360.length;i>e;e++)if(t.image360[e].position==t.position)return n.setBackground(t.image360[e].img),t.image360[e].img},i.prototype.initCanvas=function(t,e){n.create(t,e)},i.prototype.init360=function(t,i){i=i||function(){},this.image360=t,this.position=1;var r=this;e(n._canvas).on("mousedown",function(t){if(!n.getStatus().cropping){var a=this,o=t.clientX;e(a).on("mousemove",function(t){t.clientX<o&&o-t.clientX>=5?(i(r.turnLeft()),o=t.clientX):t.clientX>o&&t.clientX-o>=5&&(i(r.turnRight()),o=t.clientX)}),e(window).on("mouseup",function(){e(a).off("mousemove"),e(window).off("mouseup")})}})},i.prototype.turnLeft=function(){return this.position++,this.position>this.image360.length&&(this.position=1),this._setImgFrom360()},i.prototype.getDataImage=function(){return n.getData()},i.prototype.turnRight=function(){return this.position--,this.position<1&&(this.position=this.image360.length),this._setImgFrom360()},i.prototype.setSize=function(t){n.setCanvasSize(t.width,t.height)},i.prototype.setBackground=function(t){n.setBackground(t)},i.prototype.zoomOn=function(t){n.on(t)},i.prototype.zoomOff=function(){n.off()},new i})}(),n("text!parts/sample/sample.html",[],function(){return'<div class="row sample-images-current">\n    <div class="sample-splash">\n        <div class="splash-background"></div>\n        <div class="spinner">\n            <div>\n                <p>Loading images</p>\n                <img src="assets/spinner.GIF" alt=""/>\n            </div>\n        </div>\n    </div>\n    <div class="col-md-6 left-panel">\n        <div class="row" style="height: 22px; padding-top: 5px;">\n            <div class="col-md-6 original">Original</div>\n            <div class="col-md-6 markups">Markups</div>\n        </div>\n        <div class="other-sample-images"></div>\n    </div>\n    <div class="col-md-6 right-panel">\n        <div class="sample-images-current">\n            <div class="btn-rotate-left pull-left"></div>\n            <div class="btn-rotate-right pull-right"></div>\n            <div class="sample-images-content">\n                <div></div>\n            </div>\n            <div class="other-images-zoom">\n                <span data-bind="toggle-button: {icon: \'glyphicon glyphicon-zoom-in\', toggled: zooming }, css: \'pull-left\'" title="Zoom"></span>\n                <button class="btn-default btn-modal btn-zoom-group btn-zoom-apply pull-right">Apply</button>\n            </div>\n        </div>\n    </div>\n</div>'}),function(){n("parts/sample/sample",["require","jquery","pages/editor/editor","services/backend","parts/sample/modules/zoomBoxSample","modules/newSize","durandal/app","knockout"],function(t){var e=t("jquery"),n=t("pages/editor/editor"),i=t("services/backend"),r=t("parts/sample/modules/zoomBoxSample"),a=t("modules/newSize"),o=t("durandal/app"),s=t("knockout"),l=function(t){var n,i=e(t);return n=i.hasClass("row")?i.data("origsrc"):l(i.parent())},u=function(){this.$zoomBtn=null,this.canvas=null,this.zooming=s.observable(!1)};return u.prototype.updateMarkups=function(t){var n=new Image,r=e(".activeImg");n.onload=function(){var t=!1,n=r.parent().parent().parent();if(!n.hasClass("carousel-inner")&&0===n.find(".carousel").length){var i=e('<div class="carousel slide"><div class="carousel-inner"></div><a class="left carousel-control"><span class="glyphicon glyphicon-chevron-left"></span></a><a class="right carousel-control"><span class="glyphicon glyphicon-chevron-right"></span></a></div>').appendTo(n.find(".placeOfCarousel"));i.carousel({interval:0,wrap:!1}),i.find(".left.carousel-control").css("display","block"),i.find(".right.carousel-control").css("display","block"),e(i.find(".left.carousel-control")).on("mousedown",function(t){i.carousel("prev"),t.preventDefault()}),e(i.find(".right.carousel-control")).on("mousedown",function(t){i.carousel("next"),t.preventDefault()}),t=!0}var a=e('<div class="containerForImg"></div>').append(this);n.hasClass("carousel-inner")?e('<div class="item '+(t?"active":"")+' sample-images-list"></div>').appendTo(n).append(a):e('<div class="item '+(t?"active":"")+' sample-images-list"></div>').appendTo(n.find(".carousel-inner")).append(a)},n.src=i.getPathToImage(e(t).find("MarkUp").attr("path"))},u.prototype.compositionComplete=function(){function t(t){i.getImages360({frameCount:e(s).attr("data-cf"),path:e(s).attr("src")},function(i){function o(){var o=a(s.naturalWidth||s.width,s.naturalHeight||s.height,u.container.width(),u.container.height());r.setSize(o),r.setBackground(s),n.currentImg=l(s),r.init360(i,function(t){n.currentImg=l(t)}),i.length<=1?(e(".btn-rotate-left.pull-left").css("display","none"),e(".btn-rotate-right.pull-right").css("display","none")):(e(".btn-rotate-left.pull-left").css("display","block"),e(".btn-rotate-right.pull-right").css("display","block")),e(".btn-rotate-left.pull-left").on("mousedown",function(t){t.preventDefault(),n.currentImg=l(r.turnLeft())}),e(".btn-rotate-right.pull-right").on("mousedown",function(t){t.preventDefault(),n.currentImg=l(r.turnRight())}),t&&t()}o()})}this.splash=e(".sample-splash"),this.$zoomBtn=e(".sample-images-current .btn-zoom"),this.$applyBtn=e(".sample-images-current .btn-zoom-apply"),this.container=e(".sample-images-content"),this.zooming.subscribe(function(t){t?r.zoomOn():r.zoomOff()});var s,u=this;r.initCanvas(this.container.find("div"),{top:0,left:0,position:"relative"}),i.getSampleImages(function(l){var c=e(l).find("Original"),d=e(".other-sample-images");c.each(function(r,l){!function(r,l){var c=new Image;c.crossOrigin="anonymous",0==r&&(c.onload=function(){s=c,e(c).addClass("activeImg"),t(function(){n.currentZoom(100),n.setBackground(s),o.trigger("editor:finished-loading"),n.svgcanvas.clearContent();{var t=a(s.naturalWidth||s.width,s.naturalHeight||s.height,e(window).width(),e(window).height()-(e(".page-header").offset().top+e(".page-header").outerHeight()));parseInt(100*t.width/(s.naturalWidth||s.width),10)}n.centerCanvas(),u.splash.hide()})}),c.src=i.getPathToImage(e(l).attr("path")+"1.jpg"),e(c).attr("data-cf",e(l).attr("frameCount"));var h=e('<div class="row" data-origsrc="'+c.src.replace(/.*\{/,"").replace(/\}.*/,"")+'"><div class="col-md-5 placeOfOriginalImage"></div><div class="col-md-7 placeOfCarousel"></div></div>').appendTo(d);if(e('<div style="display: table-cell; vertical-align: middle; height: 195px; width: inherit;"></div>').append(c).appendTo(h.find(".placeOfOriginalImage")),e(l).find("MarkUp").length>0){var p=e('<div class="carousel slide"><div class="carousel-inner"></div><a class="left carousel-control"><span class="glyphicon glyphicon-chevron-left"></span></a><a class="right carousel-control"><span class="glyphicon glyphicon-chevron-right"></span></a></div>').appendTo(h.find(".placeOfCarousel"));p.carousel({interval:0,wrap:!1}),e(l).find("MarkUp").each(function(t,n){!function(t,n){var r=new Image;r.crossOrigin="anonymous",r.src=i.getPathToImage(e(n).attr("path")),p.find(".left.carousel-control").css("display","block"),p.find(".right.carousel-control").css("display","block"),e(p.find(".left.carousel-control")).on("mousedown",function(t){p.carousel("prev"),t.preventDefault()
}),e(p.find(".right.carousel-control")).on("mousedown",function(t){p.carousel("next"),t.preventDefault()});var a=e('<div class="containerForImg"></div>').append(r);0==t?e('<div class="item active sample-images-list"></div>').prependTo(p.find(".carousel-inner")).append(a):e('<div class="item sample-images-list"></div>').appendTo(p.find(".carousel-inner")).append(a)}(t,n)})}}(r,l)}),e(document).on("mousedown",".carousel-control",function(){console.log(this)}),d.on("mousedown","img",function(n){s=n.target,u.splash.show(),e(".activeImg").removeClass("activeImg"),e(this).addClass("activeImg"),t(function(){u.splash.hide()})}),e(u.$applyBtn).on("mousedown",function(){function t(){n.currentZoom(100),n.svgcanvas.clear();var t=a(s.naturalWidth||s.width,s.naturalHeight||s.height,e(window).width(),e(window).height()-(e(".page-header").offset().top+e(".page-header").outerHeight())),i=(parseInt(100*t.width/(s.naturalWidth||s.width),10),new Image);i.onload=function(){n.setBackground(this),o.trigger("editor:finished-loading"),n.centerCanvas(),r.zoomOff()},i.src=r.getDataImage()}n.isDirty()?o.showMessage("There is unsaved data on the canvas. Do you really want to close?",null,["Yes","No"]).then(function(e){"Yes"===e&&t()}):t()})})},new u})}(),n("text!parts/styles/styles.html",[],function(){return'<div class="layers">\n\n    <div id="common">\n        <fieldset class="scheduler-border">\n            <legend class="scheduler-border">Common</legend>\n            <div class="layers-stroke">\n                <span class="window-header-title">Opacity:</span>\n                <div class="btn-group tool" style="width: 100px" data-bind="slider:{ min: 0, max: 100, value: currentItemOpacity }"></div>\n            </div>\n        </fieldset>\n    </div>\n\n    <div id="stroke" data-bind="visible: selectedTool() !== \'text\' && selectedTool() !== \'g\'">\n        <fieldset class="scheduler-border">\n            <legend class="scheduler-border">Stroke</legend>\n            <div class="layers-stroke">\n                <span class="window-header-title">Color:</span>\n                <div class="btn-group tool" data-bind="colorpicker: { options: colorPalette, selectedOption: strokeFill }"></div>\n            </div>\n            <div data-bind="visible: strokeFill() !== \'none\'">\n                <div class="layers-stroke">\n                    <span class="window-header-title">Width:</span>\n                    <div class="btn-group tool" data-bind="{slider: {min: 1, max: 50, value: strokeWidth }}"></div>\n                </div>\n                <div class="layers-stroke">\n                    <span class="window-header-title">Type:</span>\n                    <div class="btn-group tool" data-bind="dropdownlist: { options:[\'Solid\', \'Dotted\', \'Dashed\'], selectedOption: strokeType }"></div>\n                </div>\n            </div>\n        </fieldset>\n    </div>\n\n    <div id="fill" data-bind="visible: [\'g\', \'line\', \'arrow\', \'dbarrow\'].indexOf(selectedTool()) === -1">\n        <fieldset class="scheduler-border">\n            <legend class="scheduler-border">Fill</legend>\n            <div class="layers-stroke">\n                <span class="window-header-title">Color:</span>\n                <div class="btn-group tool" data-bind="colorpicker: { options: colorPalette, selectedOption: fill }"></div>\n            </div>\n        </fieldset>\n    </div>\n\n    <div id="text" data-bind="visible: selectedTool() === \'text\'">\n        <fieldset class="scheduler-border">\n            <legend class="scheduler-border">Text</legend>\n            <div class="layers-stroke">\n                <span class="window-header-title">Font:</span>\n                <div class="btn-group tool" data-bind="dropdownlist: {\n                    options:[\'Serif\', \'Sans-Serif\', \'Cursive\', \'Fantasy\', \'Monospace\'],\n                    selectedOption: font\n                }"></div>\n                <div class="btn-group aSpinEdit" data-bind="stepper:{minimum:0, maximum:72, value:fontSize}"></div>\n            </div>\n            <div class="layers-stroke">\n                <span class="window-header-title">Style:</span>\n                <span data-bind="toggle-button: {icon: \'fa fa-bold\', toggled: fontBold }, css: \'tool\'"></span>\n                <span data-bind="toggle-button: {icon: \'fa fa-italic\', toggled: fontItalic }"></span>\n            </div>\n        </fieldset>\n    </div>\n\n</div>\n'}),function(){n("parts/styles/styles",["require","durandal/app","knockout","config"],function(t){var e=t("durandal/app"),n=t("knockout"),i=t("config"),r=i.defaultFontColor,a=i.defaultFill,o=function(){this.colorPalette=["none","FF942D","00E936","000000","108BFB","FF286A","FFF73A","FFFFFF","FF0000"],this.currentItemOpacity=n.observable(100),this.currentItemOpacity.subscribe(function(t){e.trigger("editor:opacity-changed",t)}),this.strokeType=n.observable("Solid"),this.strokeType.subscribe(function(t){e.trigger("editor:stroke-type-changed",t)}),this.strokeWidth=n.observable(i.defaultStrokeWidth),this.strokeWidth.subscribe(function(t){e.trigger("editor:stroke-width-changed",t)}),this.strokeFill=n.observable(i.defaultStrokeFill),this.strokeFill.subscribe(function(t){e.trigger("editor:change-fill",{type:"stroke",value:t})}),this.fill=n.observable(i.defaultFill),this.fill.subscribe(function(t){e.trigger("editor:change-fill",{type:"fill",value:t}),"text"===this.selectedTool()?r=t:a=t}.bind(this)),this.font=n.observable(i.defaultFont),this.font.subscribe(function(t){e.trigger("editor:font-changed",t)}),this.fontSize=n.observable(i.defaultFontSize),this.fontSize.subscribe(function(t){e.trigger("editor:font-size-changed",t)}),this.fontItalic=n.observable(!1),this.fontItalic.subscribe(function(t){e.trigger("editor:font-style-changed",t)}),this.fontBold=n.observable(!1),this.fontBold.subscribe(function(t){e.trigger("editor:font-weight-changed",t)}),this.selectedTool=n.observable(i.defaultTool),e.on("editor:item-selected",function(t){this.selectedTool(t.type),this.currentItemOpacity(t.opacity),"g"!==this.selectedTool()&&"circle"!==this.selectedTool()&&(this.fill(t.fill),this.strokeWidth(t.strokeWidth),this.strokeType(t.strokeType),this.strokeFill(t.strokeFill),"text"===this.selectedTool()&&(this.font(t.font),this.fontSize(t.fontSize),this.fontItalic(t.fontItalic),this.fontBold(t.fontBold)))}.bind(this)),e.on("editor:tool-switched").then(function(t){this.selectedTool(t),this.fill("text"===t?r:a)}.bind(this))};return o})}(),n("text!parts/toolbar/toolbar.html",[],function(){return'<div class="tools-row">\n    <button  data-toggle="tooltip" title="Curves"  class="btn btn-markup btn-bezier"  data-tool="path" data-bind="click: selectTool"></button>\n    <button id="selectTool" data-toggle="tooltip" title="Select"  class="btn btn-markup btn-transform-move btn-active" data-tool="select" data-bind="click: selectTool"></button>\n</div>\n<div class="tools-row">\n    <button data-toggle="tooltip" title="Ellipse" class="btn btn-markup btn-ellips" data-tool="ellipse" data-bind="click: selectTool"></button>\n    <button data-toggle="tooltip" title="Rectangle" class="btn btn-markup btn-rectangle" data-tool="rect" data-bind="click: selectTool"></button>\n</div>\n<div class="tools-row">\n    <button data-toggle="tooltip" title="Pen" class="btn btn-markup btn-pen" data-tool="fhpath" data-bind="click: selectTool"></button>\n    <button data-toggle="tooltip" title="Line" class="btn btn-markup btn-line" data-tool="line" data-bind="click: selectTool"></button>\n</div>\n<div class="tools-row">\n    <button data-toggle="tooltip" title="Text" class="btn btn-markup btn-text-tool" data-tool="text" data-bind="click: selectTool"></button>\n    <button data-toggle="tooltip" title="Arrow" class="btn btn-markup btn-one-arrow" data-tool="arrow" data-bind="click: selectTool"></button>\n</div>\n<div class="tools-row">\n    <button data-toggle="tooltip" title="Double arrows" class="btn btn-markup btn-two-arrow" data-tool="dbarrow" data-bind="click: selectTool"></button>\n    <button data-toggle="tooltip" title="Thick arrow" class="btn btn-markup btn-thick-arrow" data-tool="thick_arrow" data-bind="click: selectTool"></button>\n</div>\n<div class="tools-row">\n    <button data-toggle="tooltip" title="Double thick arrows" class="btn btn-markup btn-thick-dbarrow" data-tool="db_thick_arrow" data-bind="click: selectTool"></button>\n    <button  class="btn btn-markup btn-hidden"></button>\n</div>\n\n\n\n'}),n("text!parts/yunique-toolbar/yunique-toolbar.html",[],function(){return'<table width="100%" cellspacing="0" cellpadding="0" border="0" class="savePanel">\n    <tbody>\n    <tr valign="middle">\n        <td width="10" valign="top" align="center">\n            <img width="3" height="15" src="assets/bbTbSCnr.gif">\n        </td>\n        <td>\n            <input type="image" style="height: 0px; width: 0px; border-width: 0px;" src="assets/1x1.gif">\n            <input type="image" data-bind="click: save, attr:{src : settings.saveImg} ">\n            <input type="image" data-bind="click: saveAndClose, attr:{src : settings.saveAndCloseImg}" style="border-width:0px;">\n            <input type="image" data-bind="click: close, attr:{src:settings.closeImg}" style="border-width:0px;">\n        </td>\n    </tr>\n    </tbody>\n</table>\n'}),function(){n("parts/yunique-toolbar/yunique-toolbar",["require","durandal/app","config","services/backend","jquery","pages/editor/editor","parts/sample/sample"],function(t){var e=t("durandal/app"),n=t("config"),i=t("services/backend"),r=t("jquery"),a=t("pages/editor/editor"),o=t("parts/sample/sample"),s=function(){try{window.opener.location.href=window.opener.location.href.replace("POP=Markup&",""),window.opener.opener.location.href=window.opener.opener.location.href.replace("POP=Markup&","")}catch(t){}},l=function(){this.settings={saveImg:n.imageServer+"ButtonStream.ashx?BN=btn_save.gif&PL=en-US",saveAndCloseImg:n.imageServer+"ButtonStream.ashx?BN=btn_save_close.gif&PL=en-US",closeImg:n.imageServer+"ButtonStream.ashx?BN=btn_close.gif&PL=en-US"}};return l.prototype.save=function(){r.cd_loadingOverlay("show"),i.save().done(function(t){o.updateMarkups(t),s(),r.cd_loadingOverlay("hide"),r.cd_notify("Sketch has been saved!")})},l.prototype.saveAndClose=function(){r.cd_loadingOverlay("show"),i.save().then(function(){window.close(),s()})},l.prototype.close=function(){a.isDirty()?e.showMessage("There is unsaved data on the canvas. Do you really want to close?",null,["Yes","No"]).then(function(t){"Yes"===t&&window.close()}):window.close()},l})}(),n("text!widgets/colorpicker/view.html",[],function(){return' <!--Single button -->\n<div class="btn-group">\n    <button type="button" data-bind="style: {\'backgroundColor\': $data}" class="btn btn-default btn-sm dropdown-toggle btn-dropdown colorpicker" data-toggle="dropdown">\n        <div data-bind="colorPickerBackground: selectedOption" class="colorpicker-picked"></div> <span class="caret"></span> <div></div>\n    </button>\n\n    <ul class="dropdown-menu" role="menu">\n        <li class="row">\n            <ul class="col-md-12 colorpicker-colors" data-bind="foreach: options">\n                <div data-bind="colorPickerBackground: $data, click: $parent.optionClicked.bind($data)" class="colorpicker-color"></div>\n            </ul>\n        </li>\n    </ul>\n</div>'}),function(){n("widgets/colorpicker/viewmodel",["require","knockout","jquery"],function(t){var e=t("knockout"),n=t("jquery");e.bindingHandlers.colorPickerBackground={update:function(t,i){var r,a=e.unwrap(i());r="none"===a?"url(assets/transparent.png) center no-repeat":"#"+a,n(t).css("background",r)}};var i=function(){this.selectedOption=null,this.options=[],this.optionClicked=function(t){this.selectedOption(t)}.bind(this)};return i.prototype.activate=function(t){e.utils.extend(this,t)},i})}(),n("text!widgets/dropdownlist/view.html",[],function(){return'<!-- Single button -->\n<div class="btn-group">\n    <button type="button" class="btn btn-default btn-sm dropdown-toggle btn-dropdown" data-toggle="dropdown">\n        <!--ko text: selectedOption--><!--/ko--> <span class="caret"></span>\n    </button>\n    <ul class="dropdown-menu" role="menu" data-bind="foreach: options">\n        <li><a href="#" data-bind="text: $data, click: $parent.optionClicked.bind($data)"></a></li>\n    </ul>\n</div>'}),function(){n("widgets/dropdownlist/viewmodel",["require","knockout"],function(t){var e=t("knockout"),n=function(){this.selectedOption=null,this.options=[],this.optionClicked=function(t){this.selectedOption(t)}.bind(this)};return n.prototype.activate=function(t){e.utils.extend(this,t)},n})}(),n("text!widgets/panel/view.html",[],function(){return'<div class="windowPanel">\n    <div data-bind="event: { mousedown: drag }" class="header draggable">\n        <span data-bind="text: settings.title"></span>\n        <div class="actions">\n            <i class="glyphicon glyphicon-remove" data-bind="visible: settings.closable, click: close"></i>\n        </div>\n    </div>\n    <div data-part="content"></div>\n</div>'}),function(){n("widgets/panel/viewmodel",["require","jquery","knockout"],function(t){function e(t){for(var e=0,n=0;null!=t;e+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent);return{x:e,y:n}}var n=t("jquery"),i=t("knockout"),r={x:function(t){n(this.settings.child).css("left",parseInt(t,10))},y:function(t){n(this.settings.child).css("top",parseInt(t,10))},width:function(t){n(this.settings.child).css("width",parseInt(t,10))},height:function(t){n(this.settings.child).css("height",parseInt(t,10))},visible:function(t){n(this.settings.child).css("visibility",t?"visible":"hidden")}},a=function(){this.settings={type:"basic",x:i.observable(0),y:i.observable(0),width:i.observable(0),height:i.observable(0),minHeight:10,draggable:!1,title:i.observable(""),trigger:"",visible:i.observable(!0)}};return a.prototype.activate=function(t){if(Object.keys(t).forEach(function(e){i.isObservable(this.settings[e])&&!i.isObservable(t[e])?this.settings[e](t[e]):this.settings[e]=t[e]}.bind(this)),Object.keys(r).forEach(function(t){this.settings[t].subscribe(r[t],this)}.bind(this)),"popup"===this.settings.type&&!this.settings.trigger)throw new Error('"trigger" property is missing in Panel binding declaration')},a.prototype.close=function(){n(this.settings.child).css("visibility","hidden")},a.prototype.drag=function(t,e){if(t.settings.draggable){n(".windowPanel").each(function(t,e){var i=100;e===this.settings.child&&(i=1e3),n(e).css("zIndex",i)}.bind(this));var i,r,a=n(window).height(),o=n(window).width(),s=n(this.settings.child),l=e.clientY-s[0].offsetTop,u=e.clientX-s[0].offsetLeft;e.preventDefault(),e.stopPropagation(),s.css("opacity","0.5");var c=function(e){i=e.clientX-u,r=e.clientY-l;var s=a>=n(t.settings.child).height()+r,c=o>=n(t.settings.child).width()+i;i>=0&&r>=0&&s&&c&&(t.settings.x(i),t.settings.y(r))};n(document).on("mousemove",c),n(document).on("mouseup",function(){n(document).off("mousemove",c),s.css("opacity","1")}.bind(this))}},a.prototype.attached=function(){var t,i,r=n("#"+this.settings.trigger),a=n(window);"popup"===this.settings.type&&(i=e(r[0]),this.settings.y(i.y+80),this.settings.x(a.width()<i.x+this.settings.width()?i.x-this.settings.width()+43:i.x)),t={width:this.settings.width()||"200",visibility:this.settings.visible()?"visible":"hidden",top:this.settings.y(),left:this.settings.x()},this.settings.height()&&(t.height=this.settings.height()),n(this.settings.child).css(t),n(this.settings.child).find(".actions").css({marginLeft:this.settings.width()-40}),r&&r.on("click",function(){n(this.settings.child).css("visibility","visible")}.bind(this)),a.resize(function(){a.width()<this.settings.x()+this.settings.width()+10&&n(this.settings.child).css("left",a.width()-this.settings.width()-20)}.bind(this))},a})}(),n("text!widgets/slider/view.html",[],function(){return"<input/>"}),!function(t){var e=function(e,n){this.dragLocked=!1,this.limit=1e5,this.element=t(e).hide(),this.picker=t('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle"></div><div class="slider-handle"></div></div><div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element),this.id=this.element.data("slider-id")||n.id,this.id&&(this.picker[0].id=this.id),"undefined"!=typeof Modernizr&&Modernizr.touch&&(this.touchCapable=!0);var i=this.element.data("slider-tooltip")||n.tooltip;switch(this.tooltip=this.picker.find(".tooltip"),this.tooltipInner=this.tooltip.find("div.tooltip-inner"),this.orientation=this.element.data("slider-orientation")||n.orientation,this.orientation){case"vertical":this.picker.addClass("slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight",this.tooltip.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",this.element.outerWidth()),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px"}this.min=this.element.data("slider-min")||n.min,this.max=this.element.data("slider-max")||n.max,this.step=this.element.data("slider-step")||n.step,this.value=this.element.data("slider-value")||n.value,this.value[1]&&(this.range=!0),this.selection=this.element.data("slider-selection")||n.selection,this.selectionEl=this.picker.find(".slider-selection"),"none"===this.selection&&this.selectionEl.addClass("hide"),this.selectionElStyle=this.selectionEl[0].style,this.handle1=this.picker.find(".slider-handle:first"),this.handle1Stype=this.handle1[0].style,this.handle2=this.picker.find(".slider-handle:last"),this.handle2Stype=this.handle2[0].style;var r=this.element.data("slider-handle")||n.handle;switch(r){case"round":this.handle1.addClass("round"),this.handle2.addClass("round");break;case"triangle":this.handle1.addClass("triangle"),this.handle2.addClass("triangle")}this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),this.value[1]="after"==this.selection?this.max:this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos],this.formater=n.formater,this.reversed=this.element.data("slider-reversed")||n.reversed,this.layout(),this.picker.on(this.touchCapable?{touchstart:t.proxy(this.mousedown,this)}:{mousedown:t.proxy(this.mousedown,this)}),"show"===i?this.picker.on({mouseenter:t.proxy(this.showTooltip,this),mouseleave:t.proxy(this.hideTooltip,this)}):this.tooltip.addClass("hide")};e.prototype={constructor:e,over:!1,inDrag:!1,showTooltip:function(){this.tooltip.addClass("in"),this.over=!0},hideTooltip:function(){this.inDrag===!1&&this.tooltip.removeClass("in"),this.over=!1},layout:function(){var t;t=this.reversed?[this.percentage[1]-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]],this.handle1Stype[this.stylePos]=t[0]+"%",this.handle2Stype[this.stylePos]=t[1]+"%","vertical"==this.orientation?(this.selectionElStyle.top=Math.min(t[0],t[1])+"%",this.selectionElStyle.height=Math.abs(t[0]-t[1])+"%"):(this.selectionElStyle.left=Math.min(t[0],t[1])+"%",this.selectionElStyle.width=Math.abs(t[0]-t[1])+"%"),this.range?(this.tooltipInner.text(this.formater(this.value[0])+" : "+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=this.size*(t[0]+(t[1]-t[0])/2)/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px"):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=this.size*t[0]/100-("vertical"===this.orientation?this.tooltip.outerHeight()/2:this.tooltip.outerWidth()/2)+"px")},mousedown:function(e){if(!this.dragLocked){this.touchCapable&&"touchstart"===e.type&&(e=e.originalEvent),this.offset=this.picker.offset(),this.size=this.picker[0][this.sizePos];var n=this.getPercentage(e);if(this.range){var i=Math.abs(this.percentage[0]-n),r=Math.abs(this.percentage[1]-n);this.dragged=r>i?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?this.percentage[1]-n:n,this.layout(),t(document).on(this.touchCapable?{touchmove:t.proxy(this.mousemove,this),touchend:t.proxy(this.mouseup,this)}:{mousemove:t.proxy(this.mousemove,this),mouseup:t.proxy(this.mouseup,this)}),this.inDrag=!0;var a=this.calculateValue();return this.setValue(a),this.element.trigger({type:"slideStart",value:a}).trigger({type:"slide",value:a}),!1}},mousemove:function(t){if(!this.dragLocked){this.touchCapable&&"touchmove"===t.type&&(t=t.originalEvent);var e=this.getPercentage(t);if(this.range&&(0===this.dragged&&this.percentage[1]<e?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>e&&(this.percentage[1]=this.percentage[0],this.dragged=0)),x=this.reversed?this.percentage[1]-e:e,x>this.limit)return;this.percentage[this.dragged]=x,this.layout();var n=this.calculateValue();return this.setValue(n),this.element.trigger({type:"slide",value:n}).data("value",n).prop("value",n),!1}},mouseup:function(){t(document).off(this.touchCapable?{touchmove:this.mousemove,touchend:this.mouseup}:{mousemove:this.mousemove,mouseup:this.mouseup}),this.inDrag=!1,0==this.over&&this.hideTooltip(),this.element;var e=this.calculateValue();return this.layout(),this.element.trigger({type:"slideStop",value:e}).data("value",e).prop("value",e),!1},calculateValue:function(){var t;return this.range?(t=[this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step],this.value=t):(t=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,this.value=[t,this.value[1]]),t},getPercentage:function(t){this.touchCapable&&(t=t.touches[0]);var e=100*(t[this.mousePos]-this.offset[this.stylePos])/this.size;return e=Math.round(e/this.percentage[2])*this.percentage[2],Math.max(0,Math.min(100,e))},getValue:function(){return this.range?this.value:this.value[0]},setLimit:function(t){this.limit=t},setDragLocked:function(t){this.dragLocked=t},getDragLocked:function(){return this.dragLocked},setValue:function(t){this.value=t,this.range?(this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=[Math.max(this.min,Math.min(this.max,this.value))],this.handle2.addClass("hide"),this.value[1]="after"==this.selection?this.max:this.min),this.diff=this.max-this.min,this.percentage=[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff],this.layout()},destroy:function(){this.element.show().insertBefore(this.picker),this.picker.remove()}},t.fn.slider=function(n,i){return this.each(function(){var r=t(this),a=r.data("slider"),o="object"==typeof n&&n;a||r.data("slider",a=new e(this,t.extend({},t.fn.slider.defaults,o))),"string"==typeof n&&a[n](i)})},t.fn.slider.defaults={min:0,max:10,step:1,orientation:"horizontal",value:5,selection:"before",tooltip:"show",handle:"round",reversed:!1,limit:1e5,dragLocked:!1,formater:function(t){return t}},t.fn.slider.Constructor=e}(window.jQuery),n("bootstrapSlider",function(){}),function(){n("widgets/slider/viewmodel",["require","durandal/app","knockout","jquery","bootstrapSlider"],function(t){var e=(t("durandal/app"),t("knockout")),n=t("jquery"),i=(t("bootstrapSlider"),function(){this.settings={min:0,max:0,value:0,step:1}});return i.prototype.activate=function(t){e.utils.extend(this.settings,t)},i.prototype.compositionComplete=function(t){n(t).slider({min:this.settings.min,max:this.settings.max,value:e.isObservable(this.settings.value)?this.settings.value():this.settings.value,step:this.settings.step}).on("slide",function(t){this.settings.value(t.value)}.bind(this)),e.isObservable(this.settings.value)&&this.settings.value.subscribe(function(e){n(t).slider("setValue",e)})},i})}(),n("text!widgets/stepper/view.html",[],function(){return'<input type="text" class="btn-group aSpinEdit" />'}),jQuery.fn.mousehold=function(t){var e=100;if(t&&"function"==typeof t){var n=0,i=!1,r=void 0;return this.each(function(){$(this).mousedown(function(){i=!0;var r=0,a=this;n=setInterval(function(){r++,t.call(a,r),i=!1},e)}),r=function(){clearInterval(n),i&&t.call(this,1),i=!1},$(this).mouseout(r),$(this).mouseup(r)})}},!function(t){var e=function(e,i){this.element=t(e),this.element.addClass("spinedit"),this.element.addClass("noSelect"),this.intervalId=void 0;var r="object"==typeof i;this.minimum=t.fn.spinedit.defaults.minimum,r&&"number"==typeof i.minimum&&this.setMinimum(i.minimum),this.maximum=t.fn.spinedit.defaults.maximum,r&&"number"==typeof i.maximum&&this.setMaximum(i.maximum),this.numberOfDecimals=t.fn.spinedit.defaults.numberOfDecimals,r&&"number"==typeof i.numberOfDecimals&&this.setNumberOfDecimals(i.numberOfDecimals);var a=t.fn.spinedit.defaults.value;if(r&&"number"==typeof i.value)a=i.value;else if(this.element.val()){var o=parseFloat(this.element.val());isNaN(o)||(a=o.toFixed(this.numberOfDecimals))}this.setValue(a),this.step=t.fn.spinedit.defaults.step,r&&"number"==typeof i.step&&this.setStep(i.step);var s=t(n.template);this.element.after(s),t(s).each(function(e,n){t(n).bind("selectstart click mousedown",function(){return!1})}),s.find(".caret-up").mousehold(t.proxy(this.increase,this)),s.find(".caret-down").mousehold(t.proxy(this.decrease,this)),this.element.on("keypress",t.proxy(this._keypress,this)),this.element.on("blur",t.proxy(this._checkConstraints,this))};e.prototype={constructor:e,setMinimum:function(t){this.minimum=parseFloat(t)},setMaximum:function(t){this.maximum=parseFloat(t)},setStep:function(t){this.step=parseFloat(t)},setNumberOfDecimals:function(t){this.numberOfDecimals=parseInt(t)},setValue:function(t){t=parseFloat(t),isNaN(t)&&(t=this.minimum),this.value!=t&&(t<this.minimum&&(t=this.minimum),t>this.maximum&&(t=this.maximum),this.value=t,this.element.val(this.value.toFixed(this.numberOfDecimals)),this.element.change(),this.element.trigger({type:"valueChanged",value:parseFloat(this.value.toFixed(this.numberOfDecimals))}))},increase:function(){var t=this.value+this.step;this.setValue(t)},decrease:function(){var t=this.value-this.step;this.setValue(t)},_keypress:function(t){var e=t.keyCode||t.charCode;if(45!=e&&!(this.numberOfDecimals>0&&46==e)){for(var n=[],i=48;58>i;i++)n.push(i);n.indexOf(e)>=0||t.preventDefault()}},_checkConstraints:function(e){var n=t(e.target);this.setValue(n.val())}},t.fn.spinedit=function(n){var i=Array.apply(null,arguments);return i.shift(),this.each(function(){var r=t(this),a=r.data("spinedit"),o="object"==typeof n&&n;a||(r.data("spinedit",new e(this,t.extend({},t.fn.spinedit().defaults,o))),a=r.data("spinedit")),"string"==typeof n&&"function"==typeof a[n]&&a[n].apply(a,i)})},t.fn.spinedit.defaults={value:0,minimum:0,maximum:100,step:1,numberOfDecimals:0},t.fn.spinedit.Constructor=e;var n={};n.template='<div class="spinedit"><div class="spinedit-container"><i class="caret-up"></i><i class="caret-down"></i></div></div>'}(window.jQuery),n("bootstrapStepper",function(){}),function(){n("widgets/stepper/viewmodel",["require","durandal/app","knockout","jquery","bootstrapStepper"],function(t){var e=(t("durandal/app"),t("knockout")),n=t("jquery"),i=(t("bootstrapStepper"),function(){this.settings={minimum:0,maximum:72,value:8,step:1}});return i.prototype.activate=function(t){e.utils.extend(this.settings,t)},i.prototype.compositionComplete=function(t){n(t).spinedit({minimum:this.settings.minimum,maximum:this.settings.maximum,value:e.isObservable(this.settings.value)?this.settings.value():this.settings.value,step:this.settings.step}).on("valueChanged",function(t){this.settings.value(t.value)}.bind(this)),e.isObservable(this.settings.value)&&this.settings.value.subscribe(function(e){n(t).spinedit("setValue",e)})},i})}(),n("text!widgets/toggle-button/view.html",[],function(){return"<span data-bind=\"click: clicked, css: {'pressed': toggled, 'btn btn-default btn-style': true}\">\n    <i data-bind=\"if: icon, attr: {'class': icon}\"></i>\n    <span data-bind=\"if: label, text: label\"></span>\n</span>"}),function(){n("widgets/toggle-button/viewmodel",["require","knockout"],function(t){var e=t("knockout"),n=function(){this.toggled=!1,this.label="",this.icon="",this.clicked=function(){this.toggled(!this.toggled())}.bind(this)};return n.prototype.activate=function(t){e.utils.extend(this,t)},n})}(),n("plugins/history",["durandal/system","jquery"],function(t,e){function n(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}var i=/^[#\/]|\s+$/g,r=/^\/+|\/+$/g,a=/msie [\w.]+/,o=/\/$/,s={interval:50,active:!1};return"undefined"!=typeof window&&(s.location=window.location,s.history=window.history),s.getHash=function(t){var e=(t||s).location.href.match(/#(.*)$/);return e?e[1]:""},s.getFragment=function(t,e){if(null==t)if(s._hasPushState||!s._wantsHashChange||e){t=s.location.pathname+s.location.search;var n=s.root.replace(o,"");t.indexOf(n)||(t=t.substr(n.length))}else t=s.getHash();return t.replace(i,"")},s.activate=function(n){s.active&&t.error("History has already been activated."),s.active=!0,s.options=t.extend({},{root:"/"},s.options,n),s.root=s.options.root,s._wantsHashChange=s.options.hashChange!==!1,s._wantsPushState=!!s.options.pushState,s._hasPushState=!!(s.options.pushState&&s.history&&s.history.pushState);var o=s.getFragment(),l=document.documentMode,u=a.exec(navigator.userAgent.toLowerCase())&&(!l||7>=l);s.root=("/"+s.root+"/").replace(r,"/"),u&&s._wantsHashChange&&(s.iframe=e('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,s.navigate(o,!1)),s._hasPushState?e(window).on("popstate",s.checkUrl):s._wantsHashChange&&"onhashchange"in window&&!u?e(window).on("hashchange",s.checkUrl):s._wantsHashChange&&(s._checkUrlInterval=setInterval(s.checkUrl,s.interval)),s.fragment=o;var c=s.location,d=c.pathname.replace(/[^\/]$/,"$&/")===s.root;if(s._wantsHashChange&&s._wantsPushState){if(!s._hasPushState&&!d)return s.fragment=s.getFragment(null,!0),s.location.replace(s.root+s.location.search+"#"+s.fragment),!0;s._hasPushState&&d&&c.hash&&(this.fragment=s.getHash().replace(i,""),this.history.replaceState({},document.title,s.root+s.fragment+c.search))}return s.options.silent?void 0:s.loadUrl()},s.deactivate=function(){e(window).off("popstate",s.checkUrl).off("hashchange",s.checkUrl),clearInterval(s._checkUrlInterval),s.active=!1},s.checkUrl=function(){var t=s.getFragment();return t===s.fragment&&s.iframe&&(t=s.getFragment(s.getHash(s.iframe))),t===s.fragment?!1:(s.iframe&&s.navigate(t,!1),void s.loadUrl())},s.loadUrl=function(t){var e=s.fragment=s.getFragment(t);return s.options.routeHandler?s.options.routeHandler(e):!1},s.navigate=function(e,i){if(!s.active)return!1;if(void 0===i?i={trigger:!0}:t.isBoolean(i)&&(i={trigger:i}),e=s.getFragment(e||""),s.fragment!==e){s.fragment=e;var r=s.root+e;if(""===e&&"/"!==r&&(r=r.slice(0,-1)),s._hasPushState)s.history[i.replace?"replaceState":"pushState"]({},document.title,r);else{if(!s._wantsHashChange)return s.location.assign(r);n(s.location,e,i.replace),s.iframe&&e!==s.getFragment(s.getHash(s.iframe))&&(i.replace||s.iframe.document.open().close(),n(s.iframe.location,e,i.replace))}return i.trigger?s.loadUrl(e):void 0}},s.navigateBack=function(){s.history.back()},s}),n("plugins/http",["jquery","knockout"],function(t,e){return{callbackParam:"callback",get:function(e,n){return t.ajax(e,{data:n})},jsonp:function(e,n,i){return-1==e.indexOf("=?")&&(i=i||this.callbackParam,e+=-1==e.indexOf("?")?"?":"&",e+=i+"=?"),t.ajax({url:e,dataType:"jsonp",data:n})},post:function(n,i){return t.ajax({url:n,data:e.toJSON(i),type:"POST",contentType:"application/json",dataType:"json"})
}}}),n("plugins/observable",["durandal/system","durandal/binder","knockout"],function(t,e,n){function i(t){var e=t[0];return"_"===e||"$"===e}function r(e){return!(!e||void 0===e.nodeType||!t.isNumber(e.nodeType))}function a(t){if(!t||r(t)||t.ko===n||t.jquery)return!1;var e=h.call(t);return-1==p.indexOf(e)&&!(t===!0||t===!1)}function o(t,e){var n=t.__observable__,i=!0;if(!n||!n.__full__){n=n||(t.__observable__={}),n.__full__=!0,f.forEach(function(n){t[n]=function(){i=!1;var t=y[n].apply(e,arguments);return i=!0,t}}),m.forEach(function(n){t[n]=function(){i&&e.valueWillMutate();var r=v[n].apply(t,arguments);return i&&e.valueHasMutated(),r}}),g.forEach(function(n){t[n]=function(){for(var r=0,a=arguments.length;a>r;r++)s(arguments[r]);i&&e.valueWillMutate();var o=v[n].apply(t,arguments);return i&&e.valueHasMutated(),o}}),t.splice=function(){for(var n=2,r=arguments.length;r>n;n++)s(arguments[n]);i&&e.valueWillMutate();var a=v.splice.apply(t,arguments);return i&&e.valueHasMutated(),a};for(var r=0,a=t.length;a>r;r++)s(t[r])}}function s(e){var r,s;if(a(e)&&(r=e.__observable__,!r||!r.__full__)){if(r=r||(e.__observable__={}),r.__full__=!0,t.isArray(e)){var l=n.observableArray(e);o(e,l)}else for(var c in e)i(c)||r[c]||(s=e[c],t.isFunction(s)||u(e,c,s));b&&t.log("Converted",e)}}function l(t,e,n){var i;t(e),i=t.peek(),n?i?i.destroyAll||o(i,t):(i=[],t(i),o(i,t)):s(i)}function u(e,i,r){var a,u,c=e.__observable__||(e.__observable__={});if(void 0===r&&(r=e[i]),t.isArray(r))a=n.observableArray(r),o(r,a),u=!0;else if("function"==typeof r){if(!n.isObservable(r))return null;a=r}else t.isPromise(r)?(a=n.observable(),r.then(function(e){if(t.isArray(e)){var i=n.observableArray(e);o(e,i),e=i}a(e)})):(a=n.observable(r),s(r));return Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get:a,set:n.isWriteableObservable(a)?function(e){e&&t.isPromise(e)?e.then(function(e){l(a,e,t.isArray(e))}):l(a,e,u)}:void 0}),c[i]=a,a}function c(e,i,r){var a,o={owner:e,deferEvaluation:!0};return"function"==typeof r?o.read=r:("value"in r&&t.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof r.get&&t.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),o.read=r.get,o.write=r.set),a=n.computed(o),e[i]=a,u(e,i,a)}var d,h=Object.prototype.toString,p=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],f=["remove","removeAll","destroy","destroyAll","replace"],m=["pop","reverse","sort","shift","splice"],g=["push","unshift"],v=Array.prototype,y=n.observableArray.fn,b=!1;return d=function(t,e){var i,r,a;return t?(i=t.__observable__,i&&(r=i[e])?r:(a=t[e],n.isObservable(a)?a:u(t,e,a))):null},d.defineProperty=c,d.convertProperty=u,d.convertObject=s,d.install=function(t){var n=e.binding;e.binding=function(t,e,i){i.applyBindings&&!i.skipConversion&&s(t),n(t,e)},b=t.logConversion},d}),n("plugins/router",["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(t,e,n,i,r,a,o,s){function l(t){return t=t.replace(v,"\\$&").replace(f,"(?:$1)?").replace(m,function(t,e){return e?t:"([^/]+)"}).replace(g,"(.*?)"),new RegExp("^"+t+"$")}function u(t){var e=t.indexOf(":"),n=e>0?e-1:t.length;return t.substring(0,n)}function c(t,e){return-1!==t.indexOf(e,t.length-e.length)}function d(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;i>n;n++)if(t[n]!=e[n])return!1;return!0}var h,p,f=/\((.*?)\)/g,m=/(\(\?)?:\w+/g,g=/\*\w+/g,v=/[\-{}\[\]+?.,\\\^$|#\s]/g,y=/\/$/,b=function(){function r(t){return t.router&&t.router.parent==B}function s(t){N&&N.config.isActive&&N.config.isActive(t)}function f(e,n){t.log("Navigation Complete",e,n);var i=t.getModuleId(A);i&&B.trigger("router:navigation:from:"+i),A=e,s(!1),N=n,s(!0);var a=t.getModuleId(A);a&&B.trigger("router:navigation:to:"+a),r(e)||B.updateDocumentTitle(e,n),p.explicitNavigation=!1,p.navigatingBack=!1,B.trigger("router:navigation:complete",e,n,B)}function m(e,n){t.log("Navigation Cancelled"),B.activeInstruction(N),N&&B.navigate(N.fragment,!1),I(!1),p.explicitNavigation=!1,p.navigatingBack=!1,B.trigger("router:navigation:cancelled",e,n,B)}function g(e){t.log("Navigation Redirecting"),I(!1),p.explicitNavigation=!1,p.navigatingBack=!1,B.navigate(e,{trigger:!0,replace:!0})}function v(e,n,i){p.navigatingBack=!p.explicitNavigation&&A!=i.fragment,B.trigger("router:route:activating",n,i,B),e.activateItem(n,i.params).then(function(t){if(t){var a=A;if(f(n,i),r(n)){var o=i.fragment;i.queryString&&(o+="?"+i.queryString),n.router.loadUrl(o)}a==n&&(B.attached(),B.compositionComplete())}else e.settings.lifecycleData&&e.settings.lifecycleData.redirect?g(e.settings.lifecycleData.redirect):m(n,i);h&&(h.resolve(),h=null)}).fail(function(e){t.error(e)})}function x(e,n,i){var r=B.guardRoute(n,i);r?r.then?r.then(function(r){r?t.isString(r)?g(r):v(e,n,i):m(n,i)}):t.isString(r)?g(r):v(e,n,i):m(n,i)}function w(t,e,n){B.guardRoute?x(t,e,n):v(t,e,n)}function k(t){return N&&N.config.moduleId==t.config.moduleId&&A&&(A.canReuseForRoute&&A.canReuseForRoute.apply(A,t.params)||!A.canReuseForRoute&&A.router&&A.router.loadUrl)}function S(){if(!I()){var e=P.shift();P=[],e&&(I(!0),B.activeInstruction(e),k(e)?w(n.create(),A,e):t.acquire(e.config.moduleId).then(function(n){var i=t.resolveObject(n);w(M,i,e)}).fail(function(n){t.error("Failed to load routed module ("+e.config.moduleId+"). Details: "+n.message)}))}}function C(t){P.unshift(t),S()}function E(t,e,n){for(var i=t.exec(e).slice(1),r=0;r<i.length;r++){var a=i[r];i[r]=a?decodeURIComponent(a):null}var o=B.parseQueryString(n);return o&&i.push(o),{params:i,queryParams:o}}function _(e){B.trigger("router:route:before-config",e,B),t.isRegExp(e)?e.routePattern=e.route:(e.title=e.title||B.convertRouteToTitle(e.route),e.moduleId=e.moduleId||B.convertRouteToModuleId(e.route),e.hash=e.hash||B.convertRouteToHash(e.route),e.routePattern=l(e.route)),e.isActive=e.isActive||o.observable(!1),B.trigger("router:route:after-config",e,B),B.routes.push(e),B.route(e.routePattern,function(t,n){var i=E(e.routePattern,t,n);C({fragment:t,queryString:n,config:e,params:i.params,queryParams:i.queryParams})})}function T(e){if(t.isArray(e.route))for(var n=e.isActive||o.observable(!1),i=0,r=e.route.length;r>i;i++){var a=t.extend({},e);a.route=e.route[i],a.isActive=n,i>0&&delete a.nav,_(a)}else _(e);return B}var A,N,P=[],I=o.observable(!1),M=n.create(),B={handlers:[],routes:[],navigationModel:o.observableArray([]),activeItem:M,isNavigating:o.computed(function(){var t=M(),e=I(),n=t&&t.router&&t.router!=B&&t.router.isNavigating()?!0:!1;return e||n}),activeInstruction:o.observable(null),__router__:!0};return i.includeIn(B),M.settings.areSameItem=function(t,e,n,i){return t==e?d(n,i):!1},B.parseQueryString=function(t){var e,n;if(!t)return null;if(n=t.split("&"),0==n.length)return null;e={};for(var i=0;i<n.length;i++){var r=n[i];if(""!==r){var a=r.split("=");e[a[0]]=a[1]&&decodeURIComponent(a[1].replace(/\+/g," "))}}return e},B.route=function(t,e){B.handlers.push({routePattern:t,callback:e})},B.loadUrl=function(e){var n=B.handlers,i=null,r=e,o=e.indexOf("?");if(-1!=o&&(r=e.substring(0,o),i=e.substr(o+1)),B.relativeToParentRouter){var s=this.parent.activeInstruction();r=s.params.join("/"),r&&"/"==r.charAt(0)&&(r=r.substr(1)),r||(r=""),r=r.replace("//","/").replace("//","/")}r=r.replace(y,"");for(var l=0;l<n.length;l++){var u=n[l];if(u.routePattern.test(r))return u.callback(r,i),!0}return t.log("Route Not Found"),B.trigger("router:route:not-found",e,B),N&&a.navigate(N.fragment,{trigger:!1,replace:!0}),p.explicitNavigation=!1,p.navigatingBack=!1,!1},B.updateDocumentTitle=function(t,n){n.config.title?document.title=e.title?n.config.title+" | "+e.title:n.config.title:e.title&&(document.title=e.title)},B.navigate=function(t,e){return t&&-1!=t.indexOf("://")?(window.location.href=t,!0):(p.explicitNavigation=!0,a.navigate(t,e))},B.navigateBack=function(){a.navigateBack()},B.attached=function(){B.trigger("router:navigation:attached",A,N,B)},B.compositionComplete=function(){I(!1),B.trigger("router:navigation:composition-complete",A,N,B),S()},B.convertRouteToHash=function(t){if(B.relativeToParentRouter){var e=B.parent.activeInstruction(),n=e.config.hash+"/"+t;return a._hasPushState&&(n="/"+n),n=n.replace("//","/").replace("//","/")}return a._hasPushState?t:"#"+t},B.convertRouteToModuleId=function(t){return u(t)},B.convertRouteToTitle=function(t){var e=u(t);return e.substring(0,1).toUpperCase()+e.substring(1)},B.map=function(e,n){if(t.isArray(e)){for(var i=0;i<e.length;i++)B.map(e[i]);return B}return t.isString(e)||t.isRegExp(e)?(n?t.isString(n)&&(n={moduleId:n}):n={},n.route=e):n=e,T(n)},B.buildNavigationModel=function(e){for(var n=[],i=B.routes,r=e||100,a=0;a<i.length;a++){var o=i[a];o.nav&&(t.isNumber(o.nav)||(o.nav=++r),n.push(o))}return n.sort(function(t,e){return t.nav-e.nav}),B.navigationModel(n),B},B.mapUnknownRoutes=function(e,n){var i="*catchall",r=l(i);return B.route(r,function(o,s){var l=E(r,o,s),u={fragment:o,queryString:s,config:{route:i,routePattern:r},params:l.params,queryParams:l.queryParams};if(e)if(t.isString(e))u.config.moduleId=e,n&&a.navigate(n,{trigger:!1,replace:!0});else if(t.isFunction(e)){var c=e(u);if(c&&c.then)return void c.then(function(){B.trigger("router:route:before-config",u.config,B),B.trigger("router:route:after-config",u.config,B),C(u)})}else u.config=e,u.config.route=i,u.config.routePattern=r;else u.config.moduleId=o;B.trigger("router:route:before-config",u.config,B),B.trigger("router:route:after-config",u.config,B),C(u)}),B},B.reset=function(){return N=A=void 0,B.handlers=[],B.routes=[],B.off(),delete B.options,B},B.makeRelative=function(e){return t.isString(e)&&(e={moduleId:e,route:e}),e.moduleId&&!c(e.moduleId,"/")&&(e.moduleId+="/"),e.route&&!c(e.route,"/")&&(e.route+="/"),e.fromParent&&(B.relativeToParentRouter=!0),B.on("router:route:before-config").then(function(t){e.moduleId&&(t.moduleId=e.moduleId+t.moduleId),e.route&&(t.route=""===t.route?e.route.substring(0,e.route.length-1):e.route+t.route)}),B},B.createChildRouter=function(){var t=b();return t.parent=B,t},B};return p=b(),p.explicitNavigation=!1,p.navigatingBack=!1,p.targetIsThisWindow=function(t){var e=s(t.target).attr("target");return!e||e===window.name||"_self"===e||"top"===e&&window===window.top?!0:!1},p.activate=function(e){return t.defer(function(n){if(h=n,p.options=t.extend({routeHandler:p.loadUrl},p.options,e),a.activate(p.options),a._hasPushState)for(var i=p.routes,r=i.length;r--;){var o=i[r];o.hash=o.hash.replace("#","")}s(document).delegate("a","click",function(t){if(a._hasPushState){if(!t.altKey&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&p.targetIsThisWindow(t)){var e=s(this).attr("href");null==e||"#"===e.charAt(0)||/^[a-z]+:/i.test(e)||(p.explicitNavigation=!0,t.preventDefault(),a.navigate(e))}}else p.explicitNavigation=!0}),a.options.silent&&h&&(h.resolve(),h=null)}).promise()},p.deactivate=function(){a.deactivate()},p.install=function(){o.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e,n,i,a){var s=o.utils.unwrapObservable(e())||{};if(s.__router__)s={model:s.activeItem(),attached:s.attached,compositionComplete:s.compositionComplete,activate:!1};else{var l=o.utils.unwrapObservable(s.router||i.router)||p;s.model=l.activeItem(),s.attached=l.attached,s.compositionComplete=l.compositionComplete,s.activate=!1}r.compose(t,s,a)}},o.virtualElements.allowedBindings.router=!0},p}),n("plugins/serializer",["durandal/system"],function(t){return{typeAttribute:"type",space:void 0,replacer:function(t,e){if(t){var n=t[0];if("_"===n||"$"===n)return void 0}return e},serialize:function(e,n){return n=void 0===n?{}:n,(t.isString(n)||t.isNumber(n))&&(n={space:n}),JSON.stringify(e,n.replacer||this.replacer,n.space||this.space)},getTypeId:function(t){return t?t[this.typeAttribute]:void 0},typeMap:{},registerType:function(){var e=arguments[0];if(1==arguments.length){var n=e[this.typeAttribute]||t.getModuleId(e);this.typeMap[n]=e}else this.typeMap[e]=arguments[1]},reviver:function(t,e,n,i){var r=n(e);if(r){var a=i(r);if(a)return a.fromJSON?a.fromJSON(e):new a(e)}return e},deserialize:function(t,e){var n=this;e=e||{};var i=e.getTypeId||function(t){return n.getTypeId(t)},r=e.getConstructor||function(t){return n.typeMap[t]},a=e.reviver||function(t,e){return n.reviver(t,e,i,r)};return JSON.parse(t,a)}}}),n("plugins/widget",["durandal/system","durandal/composition","jquery","knockout"],function(t,e,n,i){function r(t,n){var r=i.utils.domData.get(t,l);r||(r={parts:e.cloneNodes(i.virtualElements.childNodes(t))},i.virtualElements.emptyNode(t),i.utils.domData.set(t,l,r)),n.parts=r.parts}var a={},o={},s=["model","view","kind"],l="durandal-widget-data",u={getSettings:function(e){var n=i.utils.unwrapObservable(e())||{};if(t.isString(n))return{kind:n};for(var r in n)n[r]=-1!=i.utils.arrayIndexOf(s,r)?i.utils.unwrapObservable(n[r]):n[r];return n},registerKind:function(t){i.bindingHandlers[t]={init:function(){return{controlsDescendantBindings:!0}},update:function(e,n,i,a,o){var s=u.getSettings(n);s.kind=t,r(e,s),u.create(e,s,o,!0)}},i.virtualElements.allowedBindings[t]=!0,e.composeBindings.push(t+":")},mapKind:function(t,e,n){e&&(o[t]=e),n&&(a[t]=n)},mapKindToModuleId:function(t){return a[t]||u.convertKindToModulePath(t)},convertKindToModulePath:function(t){return"widgets/"+t+"/viewmodel"},mapKindToViewId:function(t){return o[t]||u.convertKindToViewPath(t)},convertKindToViewPath:function(t){return"widgets/"+t+"/view"},createCompositionSettings:function(t,e){return e.model||(e.model=this.mapKindToModuleId(e.kind)),e.view||(e.view=this.mapKindToViewId(e.kind)),e.preserveContext=!0,e.activate=!0,e.activationData=e,e.mode="templated",e},create:function(t,n,i,r){r||(n=u.getSettings(function(){return n},t));var a=u.createCompositionSettings(t,n);e.compose(t,a,i)},install:function(t){if(t.bindingName=t.bindingName||"widget",t.kinds)for(var n=t.kinds,a=0;a<n.length;a++)u.registerKind(n[a]);i.bindingHandlers[t.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,e,n,i,a){var o=u.getSettings(e);r(t,o),u.create(t,o,a,!0)}},e.composeBindings.push(t.bindingName+":"),i.virtualElements.allowedBindings[t.bindingName]=!0}};return u}),n("transitions/entrance",["durandal/system","durandal/composition","jquery"],function(t,e,n){var i=100,r={marginRight:0,marginLeft:0,opacity:1},a={marginLeft:"",marginRight:"",opacity:"",display:""},o=function(e){return t.defer(function(t){function o(){t.resolve()}function s(){e.keepScrollPosition||n(document).scrollTop(0)}function l(){s(),e.triggerAttach();var t={marginLeft:c?"0":"20px",marginRight:c?"0":"-20px",opacity:0,display:"block"},i=n(e.child);i.css(t),i.animate(r,{duration:u,easing:"swing",always:function(){i.css(a),o()}})}if(e.child){var u=e.duration||500,c=!!e.fadeOnly;e.activeView?n(e.activeView).fadeOut({duration:i,always:l}):l()}else n(e.activeView).fadeOut(i,o)}).promise()};return o}),e(["main"])}();